function dn(t,e){return function(){return t.apply(e,arguments)}}const{toString:zr}=Object.prototype,{getPrototypeOf:xi}=Object,Ht=(t=>e=>{const i=zr.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Te=t=>(t=t.toLowerCase(),e=>Ht(e)===t),kt=t=>e=>typeof e===t,{isArray:je}=Array,ht=kt("undefined");function Vr(t){return t!==null&&!ht(t)&&t.constructor!==null&&!ht(t.constructor)&&ce(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hn=Te("ArrayBuffer");function Hr(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hn(t.buffer),e}const kr=kt("string"),ce=kt("function"),un=kt("number"),qt=t=>t!==null&&typeof t=="object",qr=t=>t===!0||t===!1,Pt=t=>{if(Ht(t)!=="object")return!1;const e=xi(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},$r=Te("Date"),Wr=Te("File"),Zr=Te("Blob"),Yr=Te("FileList"),Xr=t=>qt(t)&&ce(t.pipe),jr=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ce(t.append)&&((e=Ht(t))==="formdata"||e==="object"&&ce(t.toString)&&t.toString()==="[object FormData]"))},Kr=Te("URLSearchParams"),[Qr,Jr,eo,to]=["ReadableStream","Request","Response","Headers"].map(Te),io=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ft(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),je(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{const r=i?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(s=0;s<o;s++)a=r[s],e.call(null,t[a],a,t)}}function pn(t,e){e=e.toLowerCase();const i=Object.keys(t);let s=i.length,n;for(;s-- >0;)if(n=i[s],e===n.toLowerCase())return n;return null}const Le=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fn=t=>!ht(t)&&t!==Le;function pi(){const{caseless:t}=fn(this)&&this||{},e={},i=(s,n)=>{const r=t&&pn(e,n)||n;Pt(e[r])&&Pt(s)?e[r]=pi(e[r],s):Pt(s)?e[r]=pi({},s):je(s)?e[r]=s.slice():e[r]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&ft(arguments[s],i);return e}const so=(t,e,i,{allOwnKeys:s}={})=>(ft(e,(n,r)=>{i&&ce(n)?t[r]=dn(n,i):t[r]=n},{allOwnKeys:s}),t),no=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ro=(t,e,i,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},oo=(t,e,i,s)=>{let n,r,o;const a={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),r=n.length;r-- >0;)o=n[r],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=i!==!1&&xi(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},ao=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const s=t.indexOf(e,i);return s!==-1&&s===i},lo=t=>{if(!t)return null;if(je(t))return t;let e=t.length;if(!un(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},co=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&xi(Uint8Array)),ho=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=s.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},uo=(t,e)=>{let i;const s=[];for(;(i=t.exec(e))!==null;)s.push(i);return s},po=Te("HTMLFormElement"),fo=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,n){return s.toUpperCase()+n}),Ki=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),mo=Te("RegExp"),mn=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),s={};ft(i,(n,r)=>{let o;(o=e(n,r,t))!==!1&&(s[r]=o||n)}),Object.defineProperties(t,s)},go=t=>{mn(t,(e,i)=>{if(ce(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=t[i];if(ce(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},_o=(t,e)=>{const i={},s=n=>{n.forEach(r=>{i[r]=!0})};return je(t)?s(t):s(String(t).split(e)),i},Eo=()=>{},Io=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function To(t){return!!(t&&ce(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const yo=t=>{const e=new Array(10),i=(s,n)=>{if(qt(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[n]=s;const r=je(s)?[]:{};return ft(s,(o,a)=>{const l=i(o,n+1);!ht(l)&&(r[a]=l)}),e[n]=void 0,r}}return s};return i(t,0)},Ro=Te("AsyncFunction"),So=t=>t&&(qt(t)||ce(t))&&ce(t.then)&&ce(t.catch),gn=((t,e)=>t?setImmediate:e?((i,s)=>(Le.addEventListener("message",({source:n,data:r})=>{n===Le&&r===i&&s.length&&s.shift()()},!1),n=>{s.push(n),Le.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",ce(Le.postMessage)),wo=typeof queueMicrotask<"u"?queueMicrotask.bind(Le):typeof process<"u"&&process.nextTick||gn,I={isArray:je,isArrayBuffer:hn,isBuffer:Vr,isFormData:jr,isArrayBufferView:Hr,isString:kr,isNumber:un,isBoolean:qr,isObject:qt,isPlainObject:Pt,isReadableStream:Qr,isRequest:Jr,isResponse:eo,isHeaders:to,isUndefined:ht,isDate:$r,isFile:Wr,isBlob:Zr,isRegExp:mo,isFunction:ce,isStream:Xr,isURLSearchParams:Kr,isTypedArray:co,isFileList:Yr,forEach:ft,merge:pi,extend:so,trim:io,stripBOM:no,inherits:ro,toFlatObject:oo,kindOf:Ht,kindOfTest:Te,endsWith:ao,toArray:lo,forEachEntry:ho,matchAll:uo,isHTMLForm:po,hasOwnProperty:Ki,hasOwnProp:Ki,reduceDescriptors:mn,freezeMethods:go,toObjectSet:_o,toCamelCase:fo,noop:Eo,toFiniteNumber:Io,findKey:pn,global:Le,isContextDefined:fn,isSpecCompliantForm:To,toJSONObject:yo,isAsyncFn:Ro,isThenable:So,setImmediate:gn,asap:wo};function B(t,e,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}I.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const _n=B.prototype,En={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{En[t]={value:t}});Object.defineProperties(B,En);Object.defineProperty(_n,"isAxiosError",{value:!0});B.from=(t,e,i,s,n,r)=>{const o=Object.create(_n);return I.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),B.call(o,t.message,e,i,s,n),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};const vo=null;function fi(t){return I.isPlainObject(t)||I.isArray(t)}function In(t){return I.endsWith(t,"[]")?t.slice(0,-2):t}function Qi(t,e,i){return t?t.concat(e).map(function(n,r){return n=In(n),!i&&r?"["+n+"]":n}).join(i?".":""):e}function Oo(t){return I.isArray(t)&&!t.some(fi)}const Ao=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function $t(t,e,i){if(!I.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=I.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!I.isUndefined(g[m])});const s=i.metaTokens,n=i.visitor||d,r=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(n))throw new TypeError("visitor must be a function");function c(u){if(u===null)return"";if(I.isDate(u))return u.toISOString();if(!l&&I.isBlob(u))throw new B("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(u)||I.isTypedArray(u)?l&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function d(u,m,g){let T=u;if(u&&!g&&typeof u=="object"){if(I.endsWith(m,"{}"))m=s?m:m.slice(0,-2),u=JSON.stringify(u);else if(I.isArray(u)&&Oo(u)||(I.isFileList(u)||I.endsWith(m,"[]"))&&(T=I.toArray(u)))return m=In(m),T.forEach(function(E,y){!(I.isUndefined(E)||E===null)&&e.append(o===!0?Qi([m],y,r):o===null?m:m+"[]",c(E))}),!1}return fi(u)?!0:(e.append(Qi(g,m,r),c(u)),!1)}const h=[],f=Object.assign(Ao,{defaultVisitor:d,convertValue:c,isVisitable:fi});function _(u,m){if(!I.isUndefined(u)){if(h.indexOf(u)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(u),I.forEach(u,function(T,p){(!(I.isUndefined(T)||T===null)&&n.call(e,T,I.isString(p)?p.trim():p,m,f))===!0&&_(T,m?m.concat(p):[p])}),h.pop()}}if(!I.isObject(t))throw new TypeError("data must be an object");return _(t),e}function Ji(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Fi(t,e){this._pairs=[],t&&$t(t,this,e)}const Tn=Fi.prototype;Tn.append=function(e,i){this._pairs.push([e,i])};Tn.toString=function(e){const i=e?function(s){return e.call(this,s,Ji)}:Ji;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function Po(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yn(t,e,i){if(!e)return t;const s=i&&i.encode||Po;I.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let r;if(n?r=n(e,i):r=I.isURLSearchParams(e)?e.toString():new Fi(e,i).toString(s),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class es{constructor(){this.handlers=[]}use(e,i,s){return this.handlers.push({fulfilled:e,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Rn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bo=typeof URLSearchParams<"u"?URLSearchParams:Fi,Do=typeof FormData<"u"?FormData:null,Lo=typeof Blob<"u"?Blob:null,Co={isBrowser:!0,classes:{URLSearchParams:bo,FormData:Do,Blob:Lo},protocols:["http","https","file","blob","url","data"]},Gi=typeof window<"u"&&typeof document<"u",mi=typeof navigator=="object"&&navigator||void 0,Mo=Gi&&(!mi||["ReactNative","NativeScript","NS"].indexOf(mi.product)<0),No=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xo=Gi&&window.location.href||"http://localhost",Fo=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gi,hasStandardBrowserEnv:Mo,hasStandardBrowserWebWorkerEnv:No,navigator:mi,origin:xo},Symbol.toStringTag,{value:"Module"})),J={...Fo,...Co};function Go(t,e){return $t(t,new J.classes.URLSearchParams,Object.assign({visitor:function(i,s,n,r){return J.isNode&&I.isBuffer(i)?(this.append(s,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function Bo(t){return I.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Uo(t){const e={},i=Object.keys(t);let s;const n=i.length;let r;for(s=0;s<n;s++)r=i[s],e[r]=t[r];return e}function Sn(t){function e(i,s,n,r){let o=i[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=i.length;return o=!o&&I.isArray(n)?n.length:o,l?(I.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!I.isObject(n[o]))&&(n[o]=[]),e(i,s,n[o],r)&&I.isArray(n[o])&&(n[o]=Uo(n[o])),!a)}if(I.isFormData(t)&&I.isFunction(t.entries)){const i={};return I.forEachEntry(t,(s,n)=>{e(Bo(s),n,i,0)}),i}return null}function zo(t,e,i){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(t)}const mt={transitional:Rn,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const s=i.getContentType()||"",n=s.indexOf("application/json")>-1,r=I.isObject(e);if(r&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return n?JSON.stringify(Sn(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e)||I.isReadableStream(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Go(e,this.formSerializer).toString();if((a=I.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return $t(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||n?(i.setContentType("application/json",!1),zo(e)):e}],transformResponse:[function(e){const i=this.transitional||mt.transitional,s=i&&i.forcedJSONParsing,n=this.responseType==="json";if(I.isResponse(e)||I.isReadableStream(e))return e;if(e&&I.isString(e)&&(s&&!this.responseType||n)){const o=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?B.from(a,B.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:J.classes.FormData,Blob:J.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],t=>{mt.headers[t]={}});const Vo=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ho=t=>{const e={};let i,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),i=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!i||e[i]&&Vo[i])&&(i==="set-cookie"?e[i]?e[i].push(s):e[i]=[s]:e[i]=e[i]?e[i]+", "+s:s)}),e},ts=Symbol("internals");function et(t){return t&&String(t).trim().toLowerCase()}function bt(t){return t===!1||t==null?t:I.isArray(t)?t.map(bt):String(t)}function ko(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(t);)e[s[1]]=s[2];return e}const qo=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ii(t,e,i,s,n){if(I.isFunction(s))return s.call(this,e,i);if(n&&(e=i),!!I.isString(e)){if(I.isString(s))return e.indexOf(s)!==-1;if(I.isRegExp(s))return s.test(e)}}function $o(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,s)=>i.toUpperCase()+s)}function Wo(t,e){const i=I.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+i,{value:function(n,r,o){return this[s].call(this,e,n,r,o)},configurable:!0})})}let oe=class{constructor(e){e&&this.set(e)}set(e,i,s){const n=this;function r(a,l,c){const d=et(l);if(!d)throw new Error("header name must be a non-empty string");const h=I.findKey(n,d);(!h||n[h]===void 0||c===!0||c===void 0&&n[h]!==!1)&&(n[h||l]=bt(a))}const o=(a,l)=>I.forEach(a,(c,d)=>r(c,d,l));if(I.isPlainObject(e)||e instanceof this.constructor)o(e,i);else if(I.isString(e)&&(e=e.trim())&&!qo(e))o(Ho(e),i);else if(I.isHeaders(e))for(const[a,l]of e.entries())r(l,a,s);else e!=null&&r(i,e,s);return this}get(e,i){if(e=et(e),e){const s=I.findKey(this,e);if(s){const n=this[s];if(!i)return n;if(i===!0)return ko(n);if(I.isFunction(i))return i.call(this,n,s);if(I.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=et(e),e){const s=I.findKey(this,e);return!!(s&&this[s]!==void 0&&(!i||ii(this,this[s],s,i)))}return!1}delete(e,i){const s=this;let n=!1;function r(o){if(o=et(o),o){const a=I.findKey(s,o);a&&(!i||ii(s,s[a],a,i))&&(delete s[a],n=!0)}}return I.isArray(e)?e.forEach(r):r(e),n}clear(e){const i=Object.keys(this);let s=i.length,n=!1;for(;s--;){const r=i[s];(!e||ii(this,this[r],r,e,!0))&&(delete this[r],n=!0)}return n}normalize(e){const i=this,s={};return I.forEach(this,(n,r)=>{const o=I.findKey(s,r);if(o){i[o]=bt(n),delete i[r];return}const a=e?$o(r):String(r).trim();a!==r&&delete i[r],i[a]=bt(n),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return I.forEach(this,(s,n)=>{s!=null&&s!==!1&&(i[n]=e&&I.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const s=new this(e);return i.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[ts]=this[ts]={accessors:{}}).accessors,n=this.prototype;function r(o){const a=et(o);s[a]||(Wo(n,o),s[a]=!0)}return I.isArray(e)?e.forEach(r):r(e),this}};oe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(oe.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[i]=s}}});I.freezeMethods(oe);function si(t,e){const i=this||mt,s=e||i,n=oe.from(s.headers);let r=s.data;return I.forEach(t,function(a){r=a.call(i,r,n.normalize(),e?e.status:void 0)}),n.normalize(),r}function wn(t){return!!(t&&t.__CANCEL__)}function Ke(t,e,i){B.call(this,t??"canceled",B.ERR_CANCELED,e,i),this.name="CanceledError"}I.inherits(Ke,B,{__CANCEL__:!0});function vn(t,e,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):e(new B("Request failed with status code "+i.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Zo(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Yo(t,e){t=t||10;const i=new Array(t),s=new Array(t);let n=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=s[r];o||(o=c),i[n]=l,s[n]=c;let h=r,f=0;for(;h!==n;)f+=i[h++],h=h%t;if(n=(n+1)%t,n===r&&(r=(r+1)%t),c-o<e)return;const _=d&&c-d;return _?Math.round(f*1e3/_):void 0}}function Xo(t,e){let i=0,s=1e3/e,n,r;const o=(c,d=Date.now())=>{i=d,n=null,r&&(clearTimeout(r),r=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),h=d-i;h>=s?o(c,d):(n=c,r||(r=setTimeout(()=>{r=null,o(n)},s-h)))},()=>n&&o(n)]}const Nt=(t,e,i=3)=>{let s=0;const n=Yo(50,250);return Xo(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-s,c=n(l),d=o<=a;s=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},i)},is=(t,e)=>{const i=t!=null;return[s=>e[0]({lengthComputable:i,total:t,loaded:s}),e[1]]},ss=t=>(...e)=>I.asap(()=>t(...e)),jo=J.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,J.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(J.origin),J.navigator&&/(msie|trident)/i.test(J.navigator.userAgent)):()=>!0,Ko=J.hasStandardBrowserEnv?{write(t,e,i,s,n,r){const o=[t+"="+encodeURIComponent(e)];I.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),I.isString(s)&&o.push("path="+s),I.isString(n)&&o.push("domain="+n),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qo(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Jo(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function On(t,e,i){let s=!Qo(e);return t&&(s||i==!1)?Jo(t,e):e}const ns=t=>t instanceof oe?{...t}:t;function Ve(t,e){e=e||{};const i={};function s(c,d,h,f){return I.isPlainObject(c)&&I.isPlainObject(d)?I.merge.call({caseless:f},c,d):I.isPlainObject(d)?I.merge({},d):I.isArray(d)?d.slice():d}function n(c,d,h,f){if(I.isUndefined(d)){if(!I.isUndefined(c))return s(void 0,c,h,f)}else return s(c,d,h,f)}function r(c,d){if(!I.isUndefined(d))return s(void 0,d)}function o(c,d){if(I.isUndefined(d)){if(!I.isUndefined(c))return s(void 0,c)}else return s(void 0,d)}function a(c,d,h){if(h in e)return s(c,d);if(h in t)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>n(ns(c),ns(d),h,!0)};return I.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||n,f=h(t[d],e[d],d);I.isUndefined(f)&&h!==a||(i[d]=f)}),i}const An=t=>{const e=Ve({},t);let{data:i,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=oe.from(o),e.url=yn(On(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(I.isFormData(i)){if(J.hasStandardBrowserEnv||J.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(J.hasStandardBrowserEnv&&(s&&I.isFunction(s)&&(s=s(e)),s||s!==!1&&jo(e.url))){const c=n&&r&&Ko.read(r);c&&o.set(n,c)}return e},ea=typeof XMLHttpRequest<"u",ta=ea&&function(t){return new Promise(function(i,s){const n=An(t);let r=n.data;const o=oe.from(n.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=n,d,h,f,_,u;function m(){_&&_(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function T(){if(!g)return;const E=oe.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:E,config:t,request:g};vn(function(C){i(C),m()},function(C){s(C),m()},R),g=null}"onloadend"in g?g.onloadend=T:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(T)},g.onabort=function(){g&&(s(new B("Request aborted",B.ECONNABORTED,t,g)),g=null)},g.onerror=function(){s(new B("Network Error",B.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const R=n.transitional||Rn;n.timeoutErrorMessage&&(y=n.timeoutErrorMessage),s(new B(y,R.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,t,g)),g=null},r===void 0&&o.setContentType(null),"setRequestHeader"in g&&I.forEach(o.toJSON(),function(y,R){g.setRequestHeader(R,y)}),I.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),a&&a!=="json"&&(g.responseType=n.responseType),c&&([f,u]=Nt(c,!0),g.addEventListener("progress",f)),l&&g.upload&&([h,_]=Nt(l),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",_)),(n.cancelToken||n.signal)&&(d=E=>{g&&(s(!E||E.type?new Ke(null,t,g):E),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const p=Zo(n.url);if(p&&J.protocols.indexOf(p)===-1){s(new B("Unsupported protocol "+p+":",B.ERR_BAD_REQUEST,t));return}g.send(r||null)})},ia=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let s=new AbortController,n;const r=function(c){if(!n){n=!0,a();const d=c instanceof Error?c:this.reason;s.abort(d instanceof B?d:new Ke(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,r(new B(`timeout ${e} of ms exceeded`,B.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),t=null)};t.forEach(c=>c.addEventListener("abort",r));const{signal:l}=s;return l.unsubscribe=()=>I.asap(a),l}},sa=function*(t,e){let i=t.byteLength;if(i<e){yield t;return}let s=0,n;for(;s<i;)n=s+e,yield t.slice(s,n),s=n},na=async function*(t,e){for await(const i of ra(t))yield*sa(i,e)},ra=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:s}=await e.read();if(i)break;yield s}}finally{await e.cancel()}},rs=(t,e,i,s)=>{const n=na(t,e);let r=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await n.next();if(c){a(),l.close();return}let h=d.byteLength;if(i){let f=r+=h;i(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),n.return()}},{highWaterMark:2})},Wt=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Pn=Wt&&typeof ReadableStream=="function",oa=Wt&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bn=(t,...e)=>{try{return!!t(...e)}catch{return!1}},aa=Pn&&bn(()=>{let t=!1;const e=new Request(J.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),os=64*1024,gi=Pn&&bn(()=>I.isReadableStream(new Response("").body)),xt={stream:gi&&(t=>t.body)};Wt&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xt[e]&&(xt[e]=I.isFunction(t[e])?i=>i[e]():(i,s)=>{throw new B(`Response type '${e}' is not supported`,B.ERR_NOT_SUPPORT,s)})})})(new Response);const la=async t=>{if(t==null)return 0;if(I.isBlob(t))return t.size;if(I.isSpecCompliantForm(t))return(await new Request(J.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(I.isArrayBufferView(t)||I.isArrayBuffer(t))return t.byteLength;if(I.isURLSearchParams(t)&&(t=t+""),I.isString(t))return(await oa(t)).byteLength},ca=async(t,e)=>{const i=I.toFiniteNumber(t.getContentLength());return i??la(e)},da=Wt&&(async t=>{let{url:e,method:i,data:s,signal:n,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:h="same-origin",fetchOptions:f}=An(t);c=c?(c+"").toLowerCase():"text";let _=ia([n,r&&r.toAbortSignal()],o),u;const m=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let g;try{if(l&&aa&&i!=="get"&&i!=="head"&&(g=await ca(d,s))!==0){let R=new Request(e,{method:"POST",body:s,duplex:"half"}),P;if(I.isFormData(s)&&(P=R.headers.get("content-type"))&&d.setContentType(P),R.body){const[C,v]=is(g,Nt(ss(l)));s=rs(R.body,os,C,v)}}I.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;u=new Request(e,{...f,signal:_,method:i.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:T?h:void 0});let p=await fetch(u);const E=gi&&(c==="stream"||c==="response");if(gi&&(a||E&&m)){const R={};["status","statusText","headers"].forEach(b=>{R[b]=p[b]});const P=I.toFiniteNumber(p.headers.get("content-length")),[C,v]=a&&is(P,Nt(ss(a),!0))||[];p=new Response(rs(p.body,os,C,()=>{v&&v(),m&&m()}),R)}c=c||"text";let y=await xt[I.findKey(xt,c)||"text"](p,t);return!E&&m&&m(),await new Promise((R,P)=>{vn(R,P,{data:y,headers:oe.from(p.headers),status:p.status,statusText:p.statusText,config:t,request:u})})}catch(T){throw m&&m(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new B("Network Error",B.ERR_NETWORK,t,u),{cause:T.cause||T}):B.from(T,T&&T.code,t,u)}}),_i={http:vo,xhr:ta,fetch:da};I.forEach(_i,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const as=t=>`- ${t}`,ha=t=>I.isFunction(t)||t===null||t===!1,Dn={getAdapter:t=>{t=I.isArray(t)?t:[t];const{length:e}=t;let i,s;const n={};for(let r=0;r<e;r++){i=t[r];let o;if(s=i,!ha(i)&&(s=_i[(o=String(i)).toLowerCase()],s===void 0))throw new B(`Unknown adapter '${o}'`);if(s)break;n[o||"#"+r]=s}if(!s){const r=Object.entries(n).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(as).join(`
`):" "+as(r[0]):"as no adapter specified";throw new B("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:_i};function ni(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ke(null,t)}function ls(t){return ni(t),t.headers=oe.from(t.headers),t.data=si.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Dn.getAdapter(t.adapter||mt.adapter)(t).then(function(s){return ni(t),s.data=si.call(t,t.transformResponse,s),s.headers=oe.from(s.headers),s},function(s){return wn(s)||(ni(t),s&&s.response&&(s.response.data=si.call(t,t.transformResponse,s.response),s.response.headers=oe.from(s.response.headers))),Promise.reject(s)})}const Ln="1.8.4",Zt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zt[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const cs={};Zt.transitional=function(e,i,s){function n(r,o){return"[Axios v"+Ln+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(e===!1)throw new B(n(o," has been removed"+(i?" in "+i:"")),B.ERR_DEPRECATED);return i&&!cs[o]&&(cs[o]=!0,console.warn(n(o," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(r,o,a):!0}};Zt.spelling=function(e){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function ua(t,e,i){if(typeof t!="object")throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const r=s[n],o=e[r];if(o){const a=t[r],l=a===void 0||o(a,r,t);if(l!==!0)throw new B("option "+r+" must be "+l,B.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new B("Unknown option "+r,B.ERR_BAD_OPTION)}}const Dt={assertOptions:ua,validators:Zt},ye=Dt.validators;let Fe=class{constructor(e){this.defaults=e,this.interceptors={request:new es,response:new es}}async request(e,i){try{return await this._request(e,i)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const r=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=Ve(this.defaults,i);const{transitional:s,paramsSerializer:n,headers:r}=i;s!==void 0&&Dt.assertOptions(s,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1),n!=null&&(I.isFunction(n)?i.paramsSerializer={serialize:n}:Dt.assertOptions(n,{encode:ye.function,serialize:ye.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Dt.assertOptions(i,{baseUrl:ye.spelling("baseURL"),withXsrfToken:ye.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o=r&&I.merge(r.common,r[i.method]);r&&I.forEach(["delete","get","head","post","put","patch","common"],u=>{delete r[u]}),i.headers=oe.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(i)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let d,h=0,f;if(!l){const u=[ls.bind(this),void 0];for(u.unshift.apply(u,a),u.push.apply(u,c),f=u.length,d=Promise.resolve(i);h<f;)d=d.then(u[h++],u[h++]);return d}f=a.length;let _=i;for(h=0;h<f;){const u=a[h++],m=a[h++];try{_=u(_)}catch(g){m.call(this,g);break}}try{d=ls.call(this,_)}catch(u){return Promise.reject(u)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Ve(this.defaults,e);const i=On(e.baseURL,e.url,e.allowAbsoluteUrls);return yn(i,e.params,e.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(e){Fe.prototype[e]=function(i,s){return this.request(Ve(s||{},{method:e,url:i,data:(s||{}).data}))}});I.forEach(["post","put","patch"],function(e){function i(s){return function(r,o,a){return this.request(Ve(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Fe.prototype[e]=i(),Fe.prototype[e+"Form"]=i(!0)});let pa=class Cn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,a){s.reason||(s.reason=new Ke(r,o,a),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=s=>{e.abort(s)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new Cn(function(n){e=n}),cancel:e}}};function fa(t){return function(i){return t.apply(null,i)}}function ma(t){return I.isObject(t)&&t.isAxiosError===!0}const Ei={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ei).forEach(([t,e])=>{Ei[e]=t});function Mn(t){const e=new Fe(t),i=dn(Fe.prototype.request,e);return I.extend(i,Fe.prototype,e,{allOwnKeys:!0}),I.extend(i,e,null,{allOwnKeys:!0}),i.create=function(n){return Mn(Ve(t,n))},i}const $=Mn(mt);$.Axios=Fe;$.CanceledError=Ke;$.CancelToken=pa;$.isCancel=wn;$.VERSION=Ln;$.toFormData=$t;$.AxiosError=B;$.Cancel=$.CanceledError;$.all=function(e){return Promise.all(e)};$.spread=fa;$.isAxiosError=ma;$.mergeConfig=Ve;$.AxiosHeaders=oe;$.formToJSON=t=>Sn(I.isHTMLForm(t)?new FormData(t):t);$.getAdapter=Dn.getAdapter;$.HttpStatusCode=Ei;$.default=$;const{Axios:Vp,AxiosError:Hp,CanceledError:kp,isCancel:qp,CancelToken:$p,VERSION:Wp,all:Zp,Cancel:Yp,isAxiosError:Xp,spread:jp,toFormData:Kp,AxiosHeaders:Qp,HttpStatusCode:Jp,formToJSON:ef,getAdapter:tf,mergeConfig:sf}=$,ga={labelIdle:'Перетащите файлы или <span class="filepond--label-action"> выберите </span>',labelInvalidField:"Поле содержит недопустимые файлы",labelFileWaitingForSize:"Укажите размер",labelFileSizeNotAvailable:"Размер не поддерживается",labelFileLoading:"Ожидание",labelFileLoadError:"Ошибка при ожидании",labelFileProcessing:"Загрузка",labelFileProcessingComplete:"Загрузка завершена",labelFileProcessingAborted:"Загрузка отменена",labelFileProcessingError:"Ошибка при загрузке",labelFileProcessingRevertError:"Ошибка при возврате",labelFileRemoveError:"Ошибка при удалении",labelTapToCancel:"нажмите для отмены",labelTapToRetry:"нажмите, чтобы повторить попытку",labelTapToUndo:"нажмите для отмены последнего действия",labelButtonRemoveItem:"Удалить",labelButtonAbortItemLoad:"Прекращено",labelButtonRetryItemLoad:"Повторите попытку",labelButtonAbortItemProcessing:"Отмена",labelButtonUndoItemProcessing:"Отмена последнего действия",labelButtonRetryItemProcessing:"Повторите попытку",labelButtonProcessItem:"Загрузка",labelMaxFileSizeExceeded:"Файл слишком большой",labelMaxFileSize:"Максимальный размер файла: {filesize}",labelMaxTotalFileSizeExceeded:"Превышен максимальный размер",labelMaxTotalFileSize:"Максимальный размер файла: {filesize}",labelFileTypeNotAllowed:"Файл неверного типа",fileValidateTypeLabelExpectedTypes:"Ожидается {allButLastType} или {lastType}",imageValidateSizeLabelFormatError:"Тип изображения не поддерживается",imageValidateSizeLabelImageSizeTooSmall:"Изображение слишком маленькое",imageValidateSizeLabelImageSizeTooBig:"Изображение слишком большое",imageValidateSizeLabelExpectedMinSize:"Минимальный размер: {minWidth} × {minHeight}",imageValidateSizeLabelExpectedMaxSize:"Максимальный размер: {maxWidth} × {maxHeight}",imageValidateSizeLabelImageResolutionTooLow:"Разрешение слишком низкое",imageValidateSizeLabelImageResolutionTooHigh:"Разрешение слишком высокое",imageValidateSizeLabelExpectedMinResolution:"Минимальное разрешение: {minResolution}",imageValidateSizeLabelExpectedMaxResolution:"Максимальное разрешение: {maxResolution}"};/*!
 * FilePond 4.32.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const _a=t=>t instanceof HTMLElement,Ea=(t,e=[],i=[])=>{const s={...t},n=[],r=[],o=()=>({...s}),a=()=>{const u=[...n];return n.length=0,u},l=()=>{const u=[...r];r.length=0,u.forEach(({type:m,data:g})=>{c(m,g)})},c=(u,m,g)=>{if(g&&!document.hidden){r.push({type:u,data:m});return}_[u]&&_[u](m),n.push({type:u,data:m})},d=(u,...m)=>f[u]?f[u](...m):null,h={getState:o,processActionQueue:a,processDispatchQueue:l,dispatch:c,query:d};let f={};e.forEach(u=>{f={...u(s),...f}});let _={};return i.forEach(u=>{_={...u(c,d,s),..._}}),h},Ia=(t,e,i)=>{if(typeof i=="function"){t[e]=i;return}Object.defineProperty(t,e,{...i})},k=(t,e)=>{for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])},Pe=t=>{const e={};return k(t,i=>{Ia(e,i,t[i])}),e},j=(t,e,i=null)=>{if(i===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,i)},Ta="http://www.w3.org/2000/svg",ya=["svg","path"],ds=t=>ya.includes(t),Ft=(t,e,i={})=>{typeof e=="object"&&(i=e,e=null);const s=ds(t)?document.createElementNS(Ta,t):document.createElement(t);return e&&(ds(t)?j(s,"class",e):s.className=e),k(i,(n,r)=>{j(s,n,r)}),s},Ra=t=>(e,i)=>{typeof i<"u"&&t.children[i]?t.insertBefore(e,t.children[i]):t.appendChild(e)},Sa=(t,e)=>(i,s)=>(typeof s<"u"?e.splice(s,0,i):e.push(i),i),wa=(t,e)=>i=>(e.splice(e.indexOf(i),1),i.element.parentNode&&t.removeChild(i.element),i),va=typeof window<"u"&&typeof window.document<"u",Nn=()=>va,Oa=Nn()?Ft("svg"):{},Aa="children"in Oa?t=>t.children.length:t=>t.childNodes.length,xn=(t,e,i,s)=>{const n=i[0]||t.left,r=i[1]||t.top,o=n+t.width,a=r+t.height*(s[1]||1),l={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:n,top:r,right:o,bottom:a}};return e.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{hs(l.inner,{...c.inner}),hs(l.outer,{...c.outer})}),us(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,us(l.outer),l},hs=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},us=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},Ce=t=>typeof t=="number",Pa=(t,e,i,s=.001)=>Math.abs(t-e)<s&&Math.abs(i)<s,ba=({stiffness:t=.5,damping:e=.75,mass:i=10}={})=>{let s=null,n=null,r=0,o=!1;const c=Pe({interpolate:(d,h)=>{if(o)return;if(!(Ce(s)&&Ce(n))){o=!0,r=0;return}const f=-(n-s)*t;r+=f/i,n+=r,r*=e,Pa(n,s,r)||h?(n=s,r=0,o=!0,c.onupdate(n),c.oncomplete(n)):c.onupdate(n)},target:{set:d=>{if(Ce(d)&&!Ce(n)&&(n=d),s===null&&(s=d,n=d),s=d,n===s||typeof s>"u"){o=!0,r=0,c.onupdate(n),c.oncomplete(n);return}o=!1},get:()=>s},resting:{get:()=>o},onupdate:d=>{},oncomplete:d=>{}});return c},Da=t=>t<.5?2*t*t:-1+(4-2*t)*t,La=({duration:t=500,easing:e=Da,delay:i=0}={})=>{let s=null,n,r,o=!0,a=!1,l=null;const d=Pe({interpolate:(h,f)=>{o||l===null||(s===null&&(s=h),!(h-s<i)&&(n=h-s-i,n>=t||f?(n=1,r=a?0:1,d.onupdate(r*l),d.oncomplete(r*l),o=!0):(r=n/t,d.onupdate((n>=0?e(a?1-r:r):0)*l))))},target:{get:()=>a?0:l,set:h=>{if(l===null){l=h,d.onupdate(h),d.oncomplete(h);return}h<l?(l=1,a=!0):(a=!1,l=h),o=!1,s=null}},resting:{get:()=>o},onupdate:h=>{},oncomplete:h=>{}});return d},ps={spring:ba,tween:La},Ca=(t,e,i)=>{const s=t[e]&&typeof t[e][i]=="object"?t[e][i]:t[e]||t,n=typeof s=="string"?s:s.type,r=typeof s=="object"?{...s}:{};return ps[n]?ps[n](r):null},Bi=(t,e,i,s=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(n=>{t.forEach(r=>{let o=r,a=()=>i[r],l=c=>i[r]=c;typeof r=="object"&&(o=r.key,a=r.getter||a,l=r.setter||l),!(n[o]&&!s)&&(n[o]={get:a,set:l})})})},Ma=({mixinConfig:t,viewProps:e,viewInternalAPI:i,viewExternalAPI:s})=>{const n={...e},r=[];return k(t,(o,a)=>{const l=Ca(a);if(!l)return;l.onupdate=d=>{e[o]=d},l.target=n[o],Bi([{key:o,setter:d=>{l.target!==d&&(l.target=d)},getter:()=>e[o]}],[i,s],e,!0),r.push(l)}),{write:o=>{let a=document.hidden,l=!0;return r.forEach(c=>{c.resting||(l=!1),c.interpolate(o,a)}),l},destroy:()=>{}}},Na=t=>(e,i)=>{t.addEventListener(e,i)},xa=t=>(e,i)=>{t.removeEventListener(e,i)},Fa=({mixinConfig:t,viewProps:e,viewInternalAPI:i,viewExternalAPI:s,viewState:n,view:r})=>{const o=[],a=Na(r.element),l=xa(r.element);return s.on=(c,d)=>{o.push({type:c,fn:d}),a(c,d)},s.off=(c,d)=>{o.splice(o.findIndex(h=>h.type===c&&h.fn===d),1),l(c,d)},{write:()=>!0,destroy:()=>{o.forEach(c=>{l(c.type,c.fn)})}}},Ga=({mixinConfig:t,viewProps:e,viewExternalAPI:i})=>{Bi(t,i,e)},ee=t=>t!=null,Ba={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Ua=({mixinConfig:t,viewProps:e,viewInternalAPI:i,viewExternalAPI:s,view:n})=>{const r={...e},o={};Bi(t,[i,s],e);const a=()=>[e.translateX||0,e.translateY||0],l=()=>[e.scaleX||0,e.scaleY||0],c=()=>n.rect?xn(n.rect,n.childViews,a(),l()):null;return i.rect={get:c},s.rect={get:c},t.forEach(d=>{e[d]=typeof r[d]>"u"?Ba[d]:r[d]}),{write:()=>{if(za(o,e))return Va(n.element,e),Object.assign(o,{...e}),!0},destroy:()=>{}}},za=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in e)if(e[i]!==t[i])return!0;return!1},Va=(t,{opacity:e,perspective:i,translateX:s,translateY:n,scaleX:r,scaleY:o,rotateX:a,rotateY:l,rotateZ:c,originX:d,originY:h,width:f,height:_})=>{let u="",m="";(ee(d)||ee(h))&&(m+=`transform-origin: ${d||0}px ${h||0}px;`),ee(i)&&(u+=`perspective(${i}px) `),(ee(s)||ee(n))&&(u+=`translate3d(${s||0}px, ${n||0}px, 0) `),(ee(r)||ee(o))&&(u+=`scale3d(${ee(r)?r:1}, ${ee(o)?o:1}, 1) `),ee(c)&&(u+=`rotateZ(${c}rad) `),ee(a)&&(u+=`rotateX(${a}rad) `),ee(l)&&(u+=`rotateY(${l}rad) `),u.length&&(m+=`transform:${u};`),ee(e)&&(m+=`opacity:${e};`,e===0&&(m+="visibility:hidden;"),e<1&&(m+="pointer-events:none;")),ee(_)&&(m+=`height:${_}px;`),ee(f)&&(m+=`width:${f}px;`);const g=t.elementCurrentStyle||"";(m.length!==g.length||m!==g)&&(t.style.cssText=m,t.elementCurrentStyle=m)},Ha={styles:Ua,listeners:Fa,animations:Ma,apis:Ga},fs=(t={},e={},i={})=>(e.layoutCalculated||(t.paddingTop=parseInt(i.paddingTop,10)||0,t.marginTop=parseInt(i.marginTop,10)||0,t.marginRight=parseInt(i.marginRight,10)||0,t.marginBottom=parseInt(i.marginBottom,10)||0,t.marginLeft=parseInt(i.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),Y=({tag:t="div",name:e=null,attributes:i={},read:s=()=>{},write:n=()=>{},create:r=()=>{},destroy:o=()=>{},filterFrameActionsForChild:a=(_,u)=>u,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:d=!1,ignoreRectUpdate:h=!1,mixins:f=[]}={})=>(_,u={})=>{const m=Ft(t,`filepond--${e}`,i),g=window.getComputedStyle(m,null),T=fs();let p=null,E=!1;const y=[],R=[],P={},C={},v=[n],b=[s],x=[o],D=()=>m,L=()=>y.concat(),V=()=>P,A=z=>(Q,we)=>Q(z,we),U=()=>p||(p=xn(T,y,[0,0],[1,1]),p),w=()=>g,O=()=>{p=null,y.forEach(we=>we._read()),!(h&&T.width&&T.height)&&fs(T,m,g);const Q={root:ge,props:u,rect:T};b.forEach(we=>we(Q))},M=(z,Q,we)=>{let qe=Q.length===0;return v.forEach(se=>{se({props:u,root:ge,actions:Q,timestamp:z,shouldOptimize:we})===!1&&(qe=!1)}),R.forEach(se=>{se.write(z)===!1&&(qe=!1)}),y.filter(se=>!!se.element.parentNode).forEach(se=>{se._write(z,a(se,Q),we)||(qe=!1)}),y.forEach((se,Et)=>{se.element.parentNode||(ge.appendChild(se.element,Et),se._read(),se._write(z,a(se,Q),we),qe=!1)}),E=qe,c({props:u,root:ge,actions:Q,timestamp:z}),qe},N=()=>{R.forEach(z=>z.destroy()),x.forEach(z=>{z({root:ge,props:u})}),y.forEach(z=>z._destroy())},H={element:{get:D},style:{get:w},childViews:{get:L}},G={...H,rect:{get:U},ref:{get:V},is:z=>e===z,appendChild:Ra(m),createChildView:A(_),linkView:z=>(y.push(z),z),unlinkView:z=>{y.splice(y.indexOf(z),1)},appendChildView:Sa(m,y),removeChildView:wa(m,y),registerWriter:z=>v.push(z),registerReader:z=>b.push(z),registerDestroyer:z=>x.push(z),invalidateLayout:()=>m.layoutCalculated=!1,dispatch:_.dispatch,query:_.query},be={element:{get:D},childViews:{get:L},rect:{get:U},resting:{get:()=>E},isRectIgnored:()=>d,_read:O,_write:M,_destroy:N},Je={...H,rect:{get:()=>T}};Object.keys(f).sort((z,Q)=>z==="styles"?1:Q==="styles"?-1:0).forEach(z=>{const Q=Ha[z]({mixinConfig:f[z],viewProps:u,viewState:C,viewInternalAPI:G,viewExternalAPI:be,view:Pe(Je)});Q&&R.push(Q)});const ge=Pe(G);r({root:ge,props:u});const ti=Aa(m);return y.forEach((z,Q)=>{ge.appendChild(z.element,ti+Q)}),l(ge),Pe(be)},ka=(t,e,i=60)=>{const s="__framePainter";if(window[s]){window[s].readers.push(t),window[s].writers.push(e);return}window[s]={readers:[t],writers:[e]};const n=window[s],r=1e3/i;let o=null,a=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout(()=>h(performance.now()),r),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(h),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{c&&c(),d(),h(performance.now())});const h=f=>{a=l(h),o||(o=f);const _=f-o;_<=r||(o=f-_%r,n.readers.forEach(u=>u()),n.writers.forEach(u=>u(f)))};return d(),h(performance.now()),{pause:()=>{c(a)}}},ie=(t,e)=>({root:i,props:s,actions:n=[],timestamp:r,shouldOptimize:o})=>{n.filter(a=>t[a.type]).forEach(a=>t[a.type]({root:i,props:s,action:a.data,timestamp:r,shouldOptimize:o})),e&&e({root:i,props:s,actions:n,timestamp:r,shouldOptimize:o})},ms=(t,e)=>e.parentNode.insertBefore(t,e),gs=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),Yt=t=>Array.isArray(t),ve=t=>t==null,qa=t=>t.trim(),Xt=t=>""+t,$a=(t,e=",")=>ve(t)?[]:Yt(t)?t:Xt(t).split(e).map(qa).filter(i=>i.length),Fn=t=>typeof t=="boolean",Gn=t=>Fn(t)?t:t==="true",te=t=>typeof t=="string",Bn=t=>Ce(t)?t:te(t)?Xt(t).replace(/[a-z]+/gi,""):0,Lt=t=>parseInt(Bn(t),10),_s=t=>parseFloat(Bn(t)),Qe=t=>Ce(t)&&isFinite(t)&&Math.floor(t)===t,Es=(t,e=1e3)=>{if(Qe(t))return t;let i=Xt(t).trim();return/MB$/i.test(i)?(i=i.replace(/MB$i/,"").trim(),Lt(i)*e*e):/KB/i.test(i)?(i=i.replace(/KB$i/,"").trim(),Lt(i)*e):Lt(i)},Me=t=>typeof t=="function",Wa=t=>{let e=self,i=t.split("."),s=null;for(;s=i.shift();)if(e=e[s],!e)return null;return e},Is={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Za=t=>{const e={};return e.url=te(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},k(Is,i=>{e[i]=Ya(i,t[i],Is[i],e.timeout,e.headers)}),e.process=t.process||te(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},Ya=(t,e,i,s,n)=>{if(e===null)return null;if(typeof e=="function")return e;const r={url:i==="GET"||i==="PATCH"?`?${t}=`:"",method:i,headers:n,withCredentials:!1,timeout:s,onload:null,ondata:null,onerror:null};if(te(e))return r.url=e,r;if(Object.assign(r,e),te(r.headers)){const o=r.headers.split(/:(.+)/);r.headers={header:o[0],value:o[1]}}return r.withCredentials=Gn(r.withCredentials),r},Xa=t=>Za(t),ja=t=>t===null,K=t=>typeof t=="object"&&t!==null,Ka=t=>K(t)&&te(t.url)&&K(t.process)&&K(t.revert)&&K(t.restore)&&K(t.fetch),Ii=t=>Yt(t)?"array":ja(t)?"null":Qe(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":Ka(t)?"api":typeof t,Qa=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Ja={array:$a,boolean:Gn,int:t=>Ii(t)==="bytes"?Es(t):Lt(t),number:_s,float:_s,bytes:Es,string:t=>Me(t)?t:Xt(t),function:t=>Wa(t),serverapi:Xa,object:t=>{try{return JSON.parse(Qa(t))}catch{return null}}},el=(t,e)=>Ja[e](t),Un=(t,e,i)=>{if(t===e)return t;let s=Ii(t);if(s!==i){const n=el(t,i);if(s=Ii(n),n===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${i}"`;t=n}return t},tl=(t,e)=>{let i=t;return{enumerable:!0,get:()=>i,set:s=>{i=Un(s,t,e)}}},il=t=>{const e={};return k(t,i=>{const s=t[i];e[i]=tl(s[0],s[1])}),Pe(e)},sl=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:il(t)}),jt=(t,e="-")=>t.split(/(?=[A-Z])/).map(i=>i.toLowerCase()).join(e),nl=(t,e)=>{const i={};return k(e,s=>{i[s]={get:()=>t.getState().options[s],set:n=>{t.dispatch(`SET_${jt(s,"_").toUpperCase()}`,{value:n})}}}),i},rl=t=>(e,i,s)=>{const n={};return k(t,r=>{const o=jt(r,"_").toUpperCase();n[`SET_${o}`]=a=>{try{s.options[r]=a.value}catch{}e(`DID_SET_${o}`,{value:s.options[r]})}}),n},ol=t=>e=>{const i={};return k(t,s=>{i[`GET_${jt(s,"_").toUpperCase()}`]=n=>e.options[s]}),i},me={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Ui=()=>Math.random().toString(36).substring(2,11),zi=(t,e)=>t.splice(e,1),al=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},Kt=()=>{const t=[],e=(s,n)=>{zi(t,t.findIndex(r=>r.event===s&&(r.cb===n||!n)))},i=(s,n,r)=>{t.filter(o=>o.event===s).map(o=>o.cb).forEach(o=>al(()=>o(...n),r))};return{fireSync:(s,...n)=>{i(s,n,!0)},fire:(s,...n)=>{i(s,n,!1)},on:(s,n)=>{t.push({event:s,cb:n})},onOnce:(s,n)=>{t.push({event:s,cb:(...r)=>{e(s,n),n(...r)}})},off:e}},zn=(t,e,i)=>{Object.getOwnPropertyNames(t).filter(s=>!i.includes(s)).forEach(s=>Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s)))},ll=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ne=t=>{const e={};return zn(t,e,ll),e},cl=t=>{t.forEach((e,i)=>{e.released&&zi(t,i)})},F={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},X={INPUT:1,LIMBO:2,LOCAL:3},Vn=t=>/[^0-9]+/.exec(t),Hn=()=>Vn(1.1.toLocaleString())[0],dl=()=>{const t=Hn(),e=1e3.toLocaleString();return e!=="1000"?Vn(e)[0]:t==="."?",":"."},S={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Vi=[],_e=(t,e,i)=>new Promise((s,n)=>{const r=Vi.filter(a=>a.key===t).map(a=>a.cb);if(r.length===0){s(e);return}const o=r.shift();r.reduce((a,l)=>a.then(c=>l(c,i)),o(e,i)).then(a=>s(a)).catch(a=>n(a))}),He=(t,e,i)=>Vi.filter(s=>s.key===t).map(s=>s.cb(e,i)),hl=(t,e)=>Vi.push({key:t,cb:e}),ul=t=>Object.assign($e,t),Gt=()=>({...$e}),pl=t=>{k(t,(e,i)=>{$e[e]&&($e[e][0]=Un(i,$e[e][0],$e[e][1]))})},$e={id:[null,S.STRING],name:["filepond",S.STRING],disabled:[!1,S.BOOLEAN],className:[null,S.STRING],required:[!1,S.BOOLEAN],captureMethod:[null,S.STRING],allowSyncAcceptAttribute:[!0,S.BOOLEAN],allowDrop:[!0,S.BOOLEAN],allowBrowse:[!0,S.BOOLEAN],allowPaste:[!0,S.BOOLEAN],allowMultiple:[!1,S.BOOLEAN],allowReplace:[!0,S.BOOLEAN],allowRevert:[!0,S.BOOLEAN],allowRemove:[!0,S.BOOLEAN],allowProcess:[!0,S.BOOLEAN],allowReorder:[!1,S.BOOLEAN],allowDirectoriesOnly:[!1,S.BOOLEAN],storeAsFile:[!1,S.BOOLEAN],forceRevert:[!1,S.BOOLEAN],maxFiles:[null,S.INT],checkValidity:[!1,S.BOOLEAN],itemInsertLocationFreedom:[!0,S.BOOLEAN],itemInsertLocation:["before",S.STRING],itemInsertInterval:[75,S.INT],dropOnPage:[!1,S.BOOLEAN],dropOnElement:[!0,S.BOOLEAN],dropValidation:[!1,S.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],S.ARRAY],instantUpload:[!0,S.BOOLEAN],maxParallelUploads:[2,S.INT],allowMinimumUploadDuration:[!0,S.BOOLEAN],chunkUploads:[!1,S.BOOLEAN],chunkForce:[!1,S.BOOLEAN],chunkSize:[5e6,S.INT],chunkRetryDelays:[[500,1e3,3e3],S.ARRAY],server:[null,S.SERVER_API],fileSizeBase:[1e3,S.INT],labelFileSizeBytes:["bytes",S.STRING],labelFileSizeKilobytes:["KB",S.STRING],labelFileSizeMegabytes:["MB",S.STRING],labelFileSizeGigabytes:["GB",S.STRING],labelDecimalSeparator:[Hn(),S.STRING],labelThousandsSeparator:[dl(),S.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',S.STRING],labelInvalidField:["Field contains invalid files",S.STRING],labelFileWaitingForSize:["Waiting for size",S.STRING],labelFileSizeNotAvailable:["Size not available",S.STRING],labelFileCountSingular:["file in list",S.STRING],labelFileCountPlural:["files in list",S.STRING],labelFileLoading:["Loading",S.STRING],labelFileAdded:["Added",S.STRING],labelFileLoadError:["Error during load",S.STRING],labelFileRemoved:["Removed",S.STRING],labelFileRemoveError:["Error during remove",S.STRING],labelFileProcessing:["Uploading",S.STRING],labelFileProcessingComplete:["Upload complete",S.STRING],labelFileProcessingAborted:["Upload cancelled",S.STRING],labelFileProcessingError:["Error during upload",S.STRING],labelFileProcessingRevertError:["Error during revert",S.STRING],labelTapToCancel:["tap to cancel",S.STRING],labelTapToRetry:["tap to retry",S.STRING],labelTapToUndo:["tap to undo",S.STRING],labelButtonRemoveItem:["Remove",S.STRING],labelButtonAbortItemLoad:["Abort",S.STRING],labelButtonRetryItemLoad:["Retry",S.STRING],labelButtonAbortItemProcessing:["Cancel",S.STRING],labelButtonUndoItemProcessing:["Undo",S.STRING],labelButtonRetryItemProcessing:["Retry",S.STRING],labelButtonProcessItem:["Upload",S.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',S.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',S.STRING],oninit:[null,S.FUNCTION],onwarning:[null,S.FUNCTION],onerror:[null,S.FUNCTION],onactivatefile:[null,S.FUNCTION],oninitfile:[null,S.FUNCTION],onaddfilestart:[null,S.FUNCTION],onaddfileprogress:[null,S.FUNCTION],onaddfile:[null,S.FUNCTION],onprocessfilestart:[null,S.FUNCTION],onprocessfileprogress:[null,S.FUNCTION],onprocessfileabort:[null,S.FUNCTION],onprocessfilerevert:[null,S.FUNCTION],onprocessfile:[null,S.FUNCTION],onprocessfiles:[null,S.FUNCTION],onremovefile:[null,S.FUNCTION],onpreparefile:[null,S.FUNCTION],onupdatefiles:[null,S.FUNCTION],onreorderfiles:[null,S.FUNCTION],beforeDropFile:[null,S.FUNCTION],beforeAddFile:[null,S.FUNCTION],beforeRemoveFile:[null,S.FUNCTION],beforePrepareFile:[null,S.FUNCTION],stylePanelLayout:[null,S.STRING],stylePanelAspectRatio:[null,S.STRING],styleItemPanelAspectRatio:[null,S.STRING],styleButtonRemoveItemPosition:["left",S.STRING],styleButtonProcessItemPosition:["right",S.STRING],styleLoadIndicatorPosition:["right",S.STRING],styleProgressIndicatorPosition:["right",S.STRING],styleButtonRemoveItemAlign:[!1,S.BOOLEAN],files:[[],S.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],S.ARRAY]},Ne=(t,e)=>ve(e)?t[0]||null:Qe(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(i=>i.id===e)||null),kn=t=>{if(ve(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},Ee=t=>t.filter(e=>!e.archived),qn={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let It=null;const fl=()=>{if(It===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,It=e.files.length===1}catch{It=!1}return It},ml=[F.LOAD_ERROR,F.PROCESSING_ERROR,F.PROCESSING_REVERT_ERROR],gl=[F.LOADING,F.PROCESSING,F.PROCESSING_QUEUED,F.INIT],_l=[F.PROCESSING_COMPLETE],El=t=>ml.includes(t.status),Il=t=>gl.includes(t.status),Tl=t=>_l.includes(t.status),Ts=t=>K(t.options.server)&&(K(t.options.server.process)||Me(t.options.server.process)),yl=t=>({GET_STATUS:()=>{const e=Ee(t.items),{EMPTY:i,ERROR:s,BUSY:n,IDLE:r,READY:o}=qn;return e.length===0?i:e.some(El)?s:e.some(Il)?n:e.some(Tl)?o:r},GET_ITEM:e=>Ne(t.items,e),GET_ACTIVE_ITEM:e=>Ne(Ee(t.items),e),GET_ACTIVE_ITEMS:()=>Ee(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const i=Ne(t.items,e);return i?i.filename:null},GET_ITEM_SIZE:e=>{const i=Ne(t.items,e);return i?i.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:kn(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>Ee(t.items).filter(i=>i.status===e),GET_TOTAL_ITEMS:()=>Ee(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&fl()&&!Ts(t),IS_ASYNC:()=>Ts(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Rl=t=>{const e=Ee(t.items).length;if(!t.options.allowMultiple)return e===0;const i=t.options.maxFiles;return i===null||e<i},$n=(t,e,i)=>Math.max(Math.min(i,t),e),Sl=(t,e,i)=>t.splice(e,0,i),wl=(t,e,i)=>ve(e)?null:typeof i>"u"?(t.push(e),e):(i=$n(i,0,t.length),Sl(t,i,e),e),Ti=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),gt=t=>`${t}`.split("/").pop().split("?").shift(),Qt=t=>t.split(".").pop(),vl=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},tt=(t,e="")=>(e+t).slice(-e.length),Wn=(t=new Date)=>`${t.getFullYear()}-${tt(t.getMonth()+1,"00")}-${tt(t.getDate(),"00")}_${tt(t.getHours(),"00")}-${tt(t.getMinutes(),"00")}-${tt(t.getSeconds(),"00")}`,Xe=(t,e,i=null,s=null)=>{const n=typeof i=="string"?t.slice(0,t.size,i):t.slice(0,t.size,t.type);return n.lastModifiedDate=new Date,t._relativePath&&(n._relativePath=t._relativePath),te(e)||(e=Wn()),e&&s===null&&Qt(e)?n.name=e:(s=s||vl(n.type),n.name=e+(s?"."+s:"")),n},Ol=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Zn=(t,e)=>{const i=Ol();if(i){const s=new i;return s.append(t),s.getBlob(e)}return new Blob([t],{type:e})},Al=(t,e)=>{const i=new ArrayBuffer(t.length),s=new Uint8Array(i);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return Zn(i,e)},Yn=t=>(/^data:(.+);/.exec(t)||[])[1]||null,Pl=t=>t.split(",")[1].replace(/\s/g,""),bl=t=>atob(Pl(t)),Dl=t=>{const e=Yn(t),i=bl(t);return Al(i,e)},Ll=(t,e,i)=>Xe(Dl(t),e,null,i),Cl=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(i=>i.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(i=>i.length);return e.length?decodeURI(e[e.length-1]):null},Ml=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},Nl=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,Hi=t=>{const e={source:null,name:null,size:null},i=t.split(`
`);for(let s of i){const n=Cl(s);if(n){e.name=n;continue}const r=Ml(s);if(r){e.size=r;continue}const o=Nl(s);if(o){e.source=o;continue}}return e},xl=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},i=()=>e.progress,s=()=>{e.request&&e.request.abort&&e.request.abort()},n=()=>{const a=e.source;o.fire("init",a),a instanceof File?o.fire("load",a):a instanceof Blob?o.fire("load",Xe(a,a.name)):Ti(a)?o.fire("load",Ll(a)):r(a)},r=a=>{if(!t){o.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(a,l=>{e.duration=Date.now()-e.timestamp,e.complete=!0,l instanceof Blob&&(l=Xe(l,l.name||gt(a))),o.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{o.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,d)=>{if(d&&(e.size=d),e.duration=Date.now()-e.timestamp,!l){e.progress=null;return}e.progress=c/d,o.fire("progress",e.progress)},()=>{o.fire("abort")},l=>{const c=Hi(typeof l=="string"?l:l.headers);o.fire("meta",{size:e.size||c.size,filename:c.name,source:c.source})})},o={...Kt(),setSource:a=>e.source=a,getProgress:i,abort:s,load:n};return o},ys=t=>/GET|HEAD/.test(t),Ge=(t,e,i)=>{const s={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,o.abort()}};let n=!1,r=!1;i={method:"POST",headers:{},withCredentials:!1,...i},e=encodeURI(e),ys(i.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const o=new XMLHttpRequest,a=ys(i.method)?o:o.upload;return a.onprogress=l=>{n||s.onprogress(l.lengthComputable,l.loaded,l.total)},o.onreadystatechange=()=>{o.readyState<2||o.readyState===4&&o.status===0||r||(r=!0,s.onheaders(o))},o.onload=()=>{o.status>=200&&o.status<300?s.onload(o):s.onerror(o)},o.onerror=()=>s.onerror(o),o.onabort=()=>{n=!0,s.onabort()},o.ontimeout=()=>s.ontimeout(o),o.open(i.method,e,!0),Qe(i.timeout)&&(o.timeout=i.timeout),Object.keys(i.headers).forEach(l=>{const c=unescape(encodeURIComponent(i.headers[l]));o.setRequestHeader(l,c)}),i.responseType&&(o.responseType=i.responseType),i.withCredentials&&(o.withCredentials=!0),o.send(t),s},q=(t,e,i,s)=>({type:t,code:e,body:i,headers:s}),Be=t=>e=>{t(q("error",0,"Timeout",e.getAllResponseHeaders()))},Rs=t=>/\?/.test(t),lt=(...t)=>{let e="";return t.forEach(i=>{e+=Rs(e)&&Rs(i)?i.replace(/\?/,"&"):i}),e},ri=(t="",e)=>{if(typeof e=="function")return e;if(!e||!te(e.url))return null;const i=e.onload||(n=>n),s=e.onerror||(n=>null);return(n,r,o,a,l,c)=>{const d=Ge(n,lt(t,e.url),{...e,responseType:"blob"});return d.onload=h=>{const f=h.getAllResponseHeaders(),_=Hi(f).name||gt(n);r(q("load",h.status,e.method==="HEAD"?null:Xe(i(h.response),_),f))},d.onerror=h=>{o(q("error",h.status,s(h.response)||h.statusText,h.getAllResponseHeaders()))},d.onheaders=h=>{c(q("headers",h.status,null,h.getAllResponseHeaders()))},d.ontimeout=Be(o),d.onprogress=a,d.onabort=l,d}},de={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Fl=(t,e,i,s,n,r,o,a,l,c,d)=>{const h=[],{chunkTransferId:f,chunkServer:_,chunkSize:u,chunkRetryDelays:m}=d,g={serverId:f,aborted:!1},T=e.ondata||(A=>A),p=e.onload||((A,U)=>U==="HEAD"?A.getResponseHeader("Upload-Offset"):A.response),E=e.onerror||(A=>null),y=A=>{const U=new FormData;K(n)&&U.append(i,JSON.stringify(n));const w=typeof e.headers=="function"?e.headers(s,n):{...e.headers,"Upload-Length":s.size},O={...e,headers:w},M=Ge(T(U),lt(t,e.url),O);M.onload=N=>A(p(N,O.method)),M.onerror=N=>o(q("error",N.status,E(N.response)||N.statusText,N.getAllResponseHeaders())),M.ontimeout=Be(o)},R=A=>{const U=lt(t,_.url,g.serverId),O={headers:typeof e.headers=="function"?e.headers(g.serverId):{...e.headers},method:"HEAD"},M=Ge(null,U,O);M.onload=N=>A(p(N,O.method)),M.onerror=N=>o(q("error",N.status,E(N.response)||N.statusText,N.getAllResponseHeaders())),M.ontimeout=Be(o)},P=Math.floor(s.size/u);for(let A=0;A<=P;A++){const U=A*u,w=s.slice(U,U+u,"application/offset+octet-stream");h[A]={index:A,size:w.size,offset:U,data:w,file:s,progress:0,retries:[...m],status:de.QUEUED,error:null,request:null,timeout:null}}const C=()=>r(g.serverId),v=A=>A.status===de.QUEUED||A.status===de.ERROR,b=A=>{if(g.aborted)return;if(A=A||h.find(v),!A){h.every(G=>G.status===de.COMPLETE)&&C();return}A.status=de.PROCESSING,A.progress=null;const U=_.ondata||(G=>G),w=_.onerror||(G=>null),O=_.onload||(()=>{}),M=lt(t,_.url,g.serverId),N=typeof _.headers=="function"?_.headers(A):{..._.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":A.offset,"Upload-Length":s.size,"Upload-Name":s.name},H=A.request=Ge(U(A.data),M,{..._,headers:N});H.onload=G=>{O(G,A.index,h.length),A.status=de.COMPLETE,A.request=null,L()},H.onprogress=(G,be,Je)=>{A.progress=G?be:null,D()},H.onerror=G=>{A.status=de.ERROR,A.request=null,A.error=w(G.response)||G.statusText,x(A)||o(q("error",G.status,w(G.response)||G.statusText,G.getAllResponseHeaders()))},H.ontimeout=G=>{A.status=de.ERROR,A.request=null,x(A)||Be(o)(G)},H.onabort=()=>{A.status=de.QUEUED,A.request=null,l()}},x=A=>A.retries.length===0?!1:(A.status=de.WAITING,clearTimeout(A.timeout),A.timeout=setTimeout(()=>{b(A)},A.retries.shift()),!0),D=()=>{const A=h.reduce((w,O)=>w===null||O.progress===null?null:w+O.progress,0);if(A===null)return a(!1,0,0);const U=h.reduce((w,O)=>w+O.size,0);a(!0,A,U)},L=()=>{h.filter(U=>U.status===de.PROCESSING).length>=1||b()},V=()=>{h.forEach(A=>{clearTimeout(A.timeout),A.request&&A.request.abort()})};return g.serverId?R(A=>{g.aborted||(h.filter(U=>U.offset<A).forEach(U=>{U.status=de.COMPLETE,U.progress=U.size}),L())}):y(A=>{g.aborted||(c(A),g.serverId=A,L())}),{abort:()=>{g.aborted=!0,V()}}},Gl=(t,e,i,s)=>(n,r,o,a,l,c,d)=>{if(!n)return;const h=s.chunkUploads,f=h&&n.size>s.chunkSize,_=h&&(f||s.chunkForce);if(n instanceof Blob&&_)return Fl(t,e,i,n,r,o,a,l,c,d,s);const u=e.ondata||(R=>R),m=e.onload||(R=>R),g=e.onerror||(R=>null),T=typeof e.headers=="function"?e.headers(n,r)||{}:{...e.headers},p={...e,headers:T};var E=new FormData;K(r)&&E.append(i,JSON.stringify(r)),(n instanceof Blob?[{name:null,file:n}]:n).forEach(R=>{E.append(i,R.file,R.name===null?R.file.name:`${R.name}${R.file.name}`)});const y=Ge(u(E),lt(t,e.url),p);return y.onload=R=>{o(q("load",R.status,m(R.response),R.getAllResponseHeaders()))},y.onerror=R=>{a(q("error",R.status,g(R.response)||R.statusText,R.getAllResponseHeaders()))},y.ontimeout=Be(a),y.onprogress=l,y.onabort=c,y},Bl=(t="",e,i,s)=>typeof e=="function"?(...n)=>e(i,...n,s):!e||!te(e.url)?null:Gl(t,e,i,s),it=(t="",e)=>{if(typeof e=="function")return e;if(!e||!te(e.url))return(n,r)=>r();const i=e.onload||(n=>n),s=e.onerror||(n=>null);return(n,r,o)=>{const a=Ge(n,t+e.url,e);return a.onload=l=>{r(q("load",l.status,i(l.response),l.getAllResponseHeaders()))},a.onerror=l=>{o(q("error",l.status,s(l.response)||l.statusText,l.getAllResponseHeaders()))},a.ontimeout=Be(o),a}},Xn=(t=0,e=1)=>t+Math.random()*(e-t),Ul=(t,e=1e3,i=0,s=25,n=250)=>{let r=null;const o=Date.now(),a=()=>{let l=Date.now()-o,c=Xn(s,n);l+c>e&&(c=l+c-e);let d=l/e;if(d>=1||document.hidden){t(1);return}t(d),r=setTimeout(a,c)};return e>0&&a(),{clear:()=>{clearTimeout(r)}}},zl=(t,e)=>{const i={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:s}=e,n=(d,h)=>{const f=()=>{i.duration===0||i.progress===null||c.fire("progress",c.getProgress())},_=()=>{i.complete=!0,c.fire("load-perceived",i.response.body)};c.fire("start"),i.timestamp=Date.now(),i.perceivedPerformanceUpdater=Ul(u=>{i.perceivedProgress=u,i.perceivedDuration=Date.now()-i.timestamp,f(),i.response&&i.perceivedProgress===1&&!i.complete&&_()},s?Xn(750,1500):0),i.request=t(d,h,u=>{i.response=K(u)?u:{type:"load",code:200,body:`${u}`,headers:{}},i.duration=Date.now()-i.timestamp,i.progress=1,c.fire("load",i.response.body),(!s||s&&i.perceivedProgress===1)&&_()},u=>{i.perceivedPerformanceUpdater.clear(),c.fire("error",K(u)?u:{type:"error",code:0,body:`${u}`})},(u,m,g)=>{i.duration=Date.now()-i.timestamp,i.progress=u?m/g:null,f()},()=>{i.perceivedPerformanceUpdater.clear(),c.fire("abort",i.response?i.response.body:null)},u=>{c.fire("transfer",u)})},r=()=>{i.request&&(i.perceivedPerformanceUpdater.clear(),i.request.abort&&i.request.abort(),i.complete=!0)},o=()=>{r(),i.complete=!1,i.perceivedProgress=0,i.progress=0,i.timestamp=null,i.perceivedDuration=0,i.duration=0,i.request=null,i.response=null},a=s?()=>i.progress?Math.min(i.progress,i.perceivedProgress):null:()=>i.progress||null,l=s?()=>Math.min(i.duration,i.perceivedDuration):()=>i.duration,c={...Kt(),process:n,abort:r,getProgress:a,getDuration:l,reset:o};return c},jn=t=>t.substring(0,t.lastIndexOf("."))||t,Vl=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||Ti(t)?e[0]=t.name||Wn():Ti(t)?(e[1]=t.length,e[2]=Yn(t)):te(t)&&(e[0]=gt(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},Ue=t=>!!(t instanceof File||t instanceof Blob&&t.name),Kn=t=>{if(!K(t))return t;const e=Yt(t)?[]:{};for(const i in t){if(!t.hasOwnProperty(i))continue;const s=t[i];e[i]=s&&K(s)?Kn(s):s}return e},Hl=(t=null,e=null,i=null)=>{const s=Ui(),n={archived:!1,frozen:!1,released:!1,source:null,file:i,serverFileReference:e,transferId:null,processingAborted:!1,status:e?F.PROCESSING_COMPLETE:F.INIT,activeLoader:null,activeProcessor:null};let r=null;const o={},a=v=>n.status=v,l=(v,...b)=>{n.released||n.frozen||P.fire(v,...b)},c=()=>Qt(n.file.name),d=()=>n.file.type,h=()=>n.file.size,f=()=>n.file,_=(v,b,x)=>{if(n.source=v,P.fireSync("init"),n.file){P.fireSync("load-skip");return}n.file=Vl(v),b.on("init",()=>{l("load-init")}),b.on("meta",D=>{n.file.size=D.size,n.file.filename=D.filename,D.source&&(t=X.LIMBO,n.serverFileReference=D.source,n.status=F.PROCESSING_COMPLETE),l("load-meta")}),b.on("progress",D=>{a(F.LOADING),l("load-progress",D)}),b.on("error",D=>{a(F.LOAD_ERROR),l("load-request-error",D)}),b.on("abort",()=>{a(F.INIT),l("load-abort")}),b.on("load",D=>{n.activeLoader=null;const L=A=>{n.file=Ue(A)?A:n.file,t===X.LIMBO&&n.serverFileReference?a(F.PROCESSING_COMPLETE):a(F.IDLE),l("load")},V=A=>{n.file=D,l("load-meta"),a(F.LOAD_ERROR),l("load-file-error",A)};if(n.serverFileReference){L(D);return}x(D,L,V)}),b.setSource(v),n.activeLoader=b,b.load()},u=()=>{n.activeLoader&&n.activeLoader.load()},m=()=>{if(n.activeLoader){n.activeLoader.abort();return}a(F.INIT),l("load-abort")},g=(v,b)=>{if(n.processingAborted){n.processingAborted=!1;return}if(a(F.PROCESSING),r=null,!(n.file instanceof Blob)){P.on("load",()=>{g(v,b)});return}v.on("load",L=>{n.transferId=null,n.serverFileReference=L}),v.on("transfer",L=>{n.transferId=L}),v.on("load-perceived",L=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=L,a(F.PROCESSING_COMPLETE),l("process-complete",L)}),v.on("start",()=>{l("process-start")}),v.on("error",L=>{n.activeProcessor=null,a(F.PROCESSING_ERROR),l("process-error",L)}),v.on("abort",L=>{n.activeProcessor=null,n.serverFileReference=L,a(F.IDLE),l("process-abort"),r&&r()}),v.on("progress",L=>{l("process-progress",L)});const x=L=>{n.archived||v.process(L,{...o})},D=console.error;b(n.file,x,D),n.activeProcessor=v},T=()=>{n.processingAborted=!1,a(F.PROCESSING_QUEUED)},p=()=>new Promise(v=>{if(!n.activeProcessor){n.processingAborted=!0,a(F.IDLE),l("process-abort"),v();return}r=()=>{v()},n.activeProcessor.abort()}),E=(v,b)=>new Promise((x,D)=>{const L=n.serverFileReference!==null?n.serverFileReference:n.transferId;if(L===null){x();return}v(L,()=>{n.serverFileReference=null,n.transferId=null,x()},V=>{if(!b){x();return}a(F.PROCESSING_REVERT_ERROR),l("process-revert-error"),D(V)}),a(F.IDLE),l("process-revert")}),y=(v,b,x)=>{const D=v.split("."),L=D[0],V=D.pop();let A=o;D.forEach(U=>A=A[U]),JSON.stringify(A[V])!==JSON.stringify(b)&&(A[V]=b,l("metadata-update",{key:L,value:o[L],silent:x}))},P={id:{get:()=>s},origin:{get:()=>t,set:v=>t=v},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>jn(n.file.name)},fileExtension:{get:c},fileType:{get:d},fileSize:{get:h},file:{get:f},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:v=>Kn(v?o[v]:o),setMetadata:(v,b,x)=>{if(K(v)){const D=v;return Object.keys(D).forEach(L=>{y(L,D[L],b)}),v}return y(v,b,x),b},extend:(v,b)=>C[v]=b,abortLoad:m,retryLoad:u,requestProcessing:T,abortProcessing:p,load:_,process:g,revert:E,...Kt(),freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived},setFile:v=>n.file=v},C=Pe(P);return C},kl=(t,e)=>ve(e)?0:te(e)?t.findIndex(i=>i.id===e):-1,Ss=(t,e)=>{const i=kl(t,e);if(!(i<0))return t[i]||null},ws=(t,e,i,s,n,r)=>{const o=Ge(null,t,{method:"GET",responseType:"blob"});return o.onload=a=>{const l=a.getAllResponseHeaders(),c=Hi(l).name||gt(t);e(q("load",a.status,Xe(a.response,c),l))},o.onerror=a=>{i(q("error",a.status,a.statusText,a.getAllResponseHeaders()))},o.onheaders=a=>{r(q("headers",a.status,null,a.getAllResponseHeaders()))},o.ontimeout=Be(i),o.onprogress=s,o.onabort=n,o},vs=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),ql=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&vs(location.href)!==vs(t),Tt=t=>(...e)=>Me(t)?t(...e):t,$l=t=>!Ue(t.file),oi=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:Ee(e.items)})},0)},Os=(t,...e)=>new Promise(i=>{if(!t)return i(!0);const s=t(...e);if(s==null)return i(!0);if(typeof s=="boolean")return i(s);typeof s.then=="function"&&s.then(i)}),ai=(t,e)=>{t.items.sort((i,s)=>e(ne(i),ne(s)))},he=(t,e)=>({query:i,success:s=()=>{},failure:n=()=>{},...r}={})=>{const o=Ne(t.items,i);if(!o){n({error:q("error",0,"Item not found"),file:null});return}e(o,s,n,r||{})},Wl=(t,e,i)=>({ABORT_ALL:()=>{Ee(i.items).forEach(s=>{s.freeze(),s.abortLoad(),s.abortProcessing()})},DID_SET_FILES:({value:s=[]})=>{const n=s.map(o=>({source:o.source?o.source:o,options:o.options}));let r=Ee(i.items);r.forEach(o=>{n.find(a=>a.source===o.source||a.source===o.file)||t("REMOVE_ITEM",{query:o,remove:!1})}),r=Ee(i.items),n.forEach((o,a)=>{r.find(l=>l.source===o.source||l.file===o.source)||t("ADD_ITEM",{...o,interactionMethod:me.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:s,action:n,change:r})=>{r.silent||(clearTimeout(i.itemUpdateTimeout),i.itemUpdateTimeout=setTimeout(()=>{const o=Ss(i.items,s);if(!e("IS_ASYNC")){_e("SHOULD_PREPARE_OUTPUT",!1,{item:o,query:e,action:n,change:r}).then(d=>{const h=e("GET_BEFORE_PREPARE_FILE");h&&(d=h(o,d)),d&&t("REQUEST_PREPARE_OUTPUT",{query:s,item:o,success:f=>{t("DID_PREPARE_OUTPUT",{id:s,file:f})}},!0)});return}o.origin===X.LOCAL&&t("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.source});const a=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:s})},32)},l=d=>{o.revert(it(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")).then(d?a:()=>{}).catch(()=>{})},c=d=>{o.abortProcessing().then(d?a:()=>{})};if(o.status===F.PROCESSING_COMPLETE)return l(i.options.instantUpload);if(o.status===F.PROCESSING)return c(i.options.instantUpload);i.options.instantUpload&&a()},0))},MOVE_ITEM:({query:s,index:n})=>{const r=Ne(i.items,s);if(!r)return;const o=i.items.indexOf(r);n=$n(n,0,i.items.length-1),o!==n&&i.items.splice(n,0,i.items.splice(o,1)[0])},SORT:({compare:s})=>{ai(i,s),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:s,index:n,interactionMethod:r,success:o=()=>{},failure:a=()=>{}})=>{let l=n;if(n===-1||typeof n>"u"){const _=e("GET_ITEM_INSERT_LOCATION"),u=e("GET_TOTAL_ITEMS");l=_==="before"?0:u}const c=e("GET_IGNORED_FILES"),d=_=>Ue(_)?!c.includes(_.name.toLowerCase()):!ve(_),f=s.filter(d).map(_=>new Promise((u,m)=>{t("ADD_ITEM",{interactionMethod:r,source:_.source||_,success:u,failure:m,index:l++,options:_.options||{}})}));Promise.all(f).then(o).catch(a)},ADD_ITEM:({source:s,index:n=-1,interactionMethod:r,success:o=()=>{},failure:a=()=>{},options:l={}})=>{if(ve(s)){a({error:q("error",0,"No source"),file:null});return}if(Ue(s)&&i.options.ignoredFiles.includes(s.name.toLowerCase()))return;if(!Rl(i)){if(i.options.allowMultiple||!i.options.allowMultiple&&!i.options.allowReplace){const p=q("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:s,error:p}),a({error:p,file:null});return}const T=Ee(i.items)[0];if(T.status===F.PROCESSING_COMPLETE||T.status===F.PROCESSING_REVERT_ERROR){const p=e("GET_FORCE_REVERT");if(T.revert(it(i.options.server.url,i.options.server.revert),p).then(()=>{p&&t("ADD_ITEM",{source:s,index:n,interactionMethod:r,success:o,failure:a,options:l})}).catch(()=>{}),p)return}t("REMOVE_ITEM",{query:T.id})}const c=l.type==="local"?X.LOCAL:l.type==="limbo"?X.LIMBO:X.INPUT,d=Hl(c,c===X.INPUT?null:s,l.file);Object.keys(l.metadata||{}).forEach(T=>{d.setMetadata(T,l.metadata[T])}),He("DID_CREATE_ITEM",d,{query:e,dispatch:t});const h=e("GET_ITEM_INSERT_LOCATION");i.options.itemInsertLocationFreedom||(n=h==="before"?-1:i.items.length),wl(i.items,d,n),Me(h)&&s&&ai(i,h);const f=d.id;d.on("init",()=>{t("DID_INIT_ITEM",{id:f})}),d.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:f})}),d.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:f})}),d.on("load-progress",T=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:f,progress:T})}),d.on("load-request-error",T=>{const p=Tt(i.options.labelFileLoadError)(T);if(T.code>=400&&T.code<500){t("DID_THROW_ITEM_INVALID",{id:f,error:T,status:{main:p,sub:`${T.code} (${T.body})`}}),a({error:T,file:ne(d)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:f,error:T,status:{main:p,sub:i.options.labelTapToRetry}})}),d.on("load-file-error",T=>{t("DID_THROW_ITEM_INVALID",{id:f,error:T.status,status:T.status}),a({error:T.status,file:ne(d)})}),d.on("load-abort",()=>{t("REMOVE_ITEM",{query:f})}),d.on("load-skip",()=>{d.on("metadata-update",T=>{Ue(d.file)&&t("DID_UPDATE_ITEM_METADATA",{id:f,change:T})}),t("COMPLETE_LOAD_ITEM",{query:f,item:d,data:{source:s,success:o}})}),d.on("load",()=>{const T=p=>{if(!p){t("REMOVE_ITEM",{query:f});return}d.on("metadata-update",E=>{t("DID_UPDATE_ITEM_METADATA",{id:f,change:E})}),_e("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:e}).then(E=>{const y=e("GET_BEFORE_PREPARE_FILE");y&&(E=y(d,E));const R=()=>{t("COMPLETE_LOAD_ITEM",{query:f,item:d,data:{source:s,success:o}}),oi(t,i)};if(E){t("REQUEST_PREPARE_OUTPUT",{query:f,item:d,success:P=>{t("DID_PREPARE_OUTPUT",{id:f,file:P}),R()}},!0);return}R()})};_e("DID_LOAD_ITEM",d,{query:e,dispatch:t}).then(()=>{Os(e("GET_BEFORE_ADD_FILE"),ne(d)).then(T)}).catch(p=>{if(!p||!p.error||!p.status)return T(!1);t("DID_THROW_ITEM_INVALID",{id:f,error:p.error,status:p.status})})}),d.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:f})}),d.on("process-progress",T=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:f,progress:T})}),d.on("process-error",T=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:f,error:T,status:{main:Tt(i.options.labelFileProcessingError)(T),sub:i.options.labelTapToRetry}})}),d.on("process-revert-error",T=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:f,error:T,status:{main:Tt(i.options.labelFileProcessingRevertError)(T),sub:i.options.labelTapToRetry}})}),d.on("process-complete",T=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:f,error:null,serverFileReference:T}),t("DID_DEFINE_VALUE",{id:f,value:T})}),d.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:f})}),d.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:f}),t("DID_DEFINE_VALUE",{id:f,value:null})}),t("DID_ADD_ITEM",{id:f,index:n,interactionMethod:r}),oi(t,i);const{url:_,load:u,restore:m,fetch:g}=i.options.server||{};d.load(s,xl(c===X.INPUT?te(s)&&ql(s)&&g?ri(_,g):ws:c===X.LIMBO?ri(_,m):ri(_,u)),(T,p,E)=>{_e("LOAD_FILE",T,{query:e}).then(p).catch(E)})},REQUEST_PREPARE_OUTPUT:({item:s,success:n,failure:r=()=>{}})=>{const o={error:q("error",0,"Item not found"),file:null};if(s.archived)return r(o);_e("PREPARE_OUTPUT",s.file,{query:e,item:s}).then(a=>{_e("COMPLETE_PREPARE_OUTPUT",a,{query:e,item:s}).then(l=>{if(s.archived)return r(o);n(l)})})},COMPLETE_LOAD_ITEM:({item:s,data:n})=>{const{success:r,source:o}=n,a=e("GET_ITEM_INSERT_LOCATION");if(Me(a)&&o&&ai(i,a),t("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.origin===X.INPUT?null:o}),r(ne(s)),s.origin===X.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:s.id});return}if(s.origin===X.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:s.id,error:null,serverFileReference:o}),t("DID_DEFINE_VALUE",{id:s.id,value:s.serverId||o});return}e("IS_ASYNC")&&i.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:s.id})},RETRY_ITEM_LOAD:he(i,s=>{s.retryLoad()}),REQUEST_ITEM_PREPARE:he(i,(s,n,r)=>{t("REQUEST_PREPARE_OUTPUT",{query:s.id,item:s,success:o=>{t("DID_PREPARE_OUTPUT",{id:s.id,file:o}),n({file:s,output:o})},failure:r},!0)}),REQUEST_ITEM_PROCESSING:he(i,(s,n,r)=>{if(!(s.status===F.IDLE||s.status===F.PROCESSING_ERROR)){const a=()=>t("REQUEST_ITEM_PROCESSING",{query:s,success:n,failure:r}),l=()=>document.hidden?a():setTimeout(a,32);s.status===F.PROCESSING_COMPLETE||s.status===F.PROCESSING_REVERT_ERROR?s.revert(it(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")).then(l).catch(()=>{}):s.status===F.PROCESSING&&s.abortProcessing().then(l);return}s.status!==F.PROCESSING_QUEUED&&(s.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:s.id}),t("PROCESS_ITEM",{query:s,success:n,failure:r},!0))}),PROCESS_ITEM:he(i,(s,n,r)=>{const o=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",F.PROCESSING).length===o){i.processingQueue.push({id:s.id,success:n,failure:r});return}if(s.status===F.PROCESSING)return;const l=()=>{const d=i.processingQueue.shift();if(!d)return;const{id:h,success:f,failure:_}=d,u=Ne(i.items,h);if(!u||u.archived){l();return}t("PROCESS_ITEM",{query:h,success:f,failure:_},!0)};s.onOnce("process-complete",()=>{n(ne(s)),l();const d=i.options.server;if(i.options.instantUpload&&s.origin===X.LOCAL&&Me(d.remove)){const _=()=>{};s.origin=X.LIMBO,i.options.server.remove(s.source,_,_)}e("GET_ITEMS_BY_STATUS",F.PROCESSING_COMPLETE).length===i.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),s.onOnce("process-error",d=>{r({error:d,file:ne(s)}),l()});const c=i.options;s.process(zl(Bl(c.server.url,c.server.process,c.name,{chunkTransferId:s.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(d,h,f)=>{_e("PREPARE_OUTPUT",d,{query:e,item:s}).then(_=>{t("DID_PREPARE_OUTPUT",{id:s.id,file:_}),h(_)}).catch(f)})}),RETRY_ITEM_PROCESSING:he(i,s=>{t("REQUEST_ITEM_PROCESSING",{query:s})}),REQUEST_REMOVE_ITEM:he(i,s=>{Os(e("GET_BEFORE_REMOVE_FILE"),ne(s)).then(n=>{n&&t("REMOVE_ITEM",{query:s})})}),RELEASE_ITEM:he(i,s=>{s.release()}),REMOVE_ITEM:he(i,(s,n,r,o)=>{const a=()=>{const c=s.id;Ss(i.items,c).archive(),t("DID_REMOVE_ITEM",{error:null,id:c,item:s}),oi(t,i),n(ne(s))},l=i.options.server;s.origin===X.LOCAL&&l&&Me(l.remove)&&o.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:s.id}),l.remove(s.source,()=>a(),c=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:s.id,error:q("error",0,c,null),status:{main:Tt(i.options.labelFileRemoveError)(c),sub:i.options.labelTapToRetry}})})):((o.revert&&s.origin!==X.LOCAL&&s.serverId!==null||i.options.chunkUploads&&s.file.size>i.options.chunkSize||i.options.chunkUploads&&i.options.chunkForce)&&s.revert(it(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:he(i,s=>{s.abortLoad()}),ABORT_ITEM_PROCESSING:he(i,s=>{if(s.serverId){t("REVERT_ITEM_PROCESSING",{id:s.id});return}s.abortProcessing().then(()=>{i.options.instantUpload&&t("REMOVE_ITEM",{query:s.id})})}),REQUEST_REVERT_ITEM_PROCESSING:he(i,s=>{if(!i.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:s});return}const n=a=>{a&&t("REVERT_ITEM_PROCESSING",{query:s})},r=e("GET_BEFORE_REMOVE_FILE");if(!r)return n(!0);const o=r(ne(s));if(o==null)return n(!0);if(typeof o=="boolean")return n(o);typeof o.then=="function"&&o.then(n)}),REVERT_ITEM_PROCESSING:he(i,s=>{s.revert(it(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(i.options.instantUpload||$l(s))&&t("REMOVE_ITEM",{query:s.id})}).catch(()=>{})}),SET_OPTIONS:({options:s})=>{const n=Object.keys(s),r=Zl.filter(a=>n.includes(a));[...r,...Object.keys(s).filter(a=>!r.includes(a))].forEach(a=>{t(`SET_${jt(a,"_").toUpperCase()}`,{value:s[a]})})}}),Zl=["server"],ki=t=>t,Oe=t=>document.createElement(t),W=(t,e)=>{let i=t.childNodes[0];i?e!==i.nodeValue&&(i.nodeValue=e):(i=document.createTextNode(e),t.appendChild(i))},As=(t,e,i,s)=>{const n=(s%360-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}},Yl=(t,e,i,s,n,r)=>{const o=As(t,e,i,n),a=As(t,e,i,s);return["M",o.x,o.y,"A",i,i,0,r,0,a.x,a.y].join(" ")},Xl=(t,e,i,s,n)=>{let r=1;return n>s&&n-s<=.5&&(r=0),s>n&&s-n>=.5&&(r=0),Yl(t,e,i,Math.min(.9999,s)*360,Math.min(.9999,n)*360,r)},jl=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const i=Ft("svg");t.ref.path=Ft("path",{"stroke-width":2,"stroke-linecap":"round"}),i.appendChild(t.ref.path),t.ref.svg=i,t.appendChild(i)},Kl=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const i=parseInt(j(t.ref.path,"stroke-width"),10),s=t.rect.element.width*.5;let n=0,r=0;e.spin?(n=0,r=.5):(n=0,r=e.progress);const o=Xl(s,s,s-i,n,r);j(t.ref.path,"d",o),j(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},Ps=Y({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:jl,write:Kl,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Ql=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},Jl=({root:t,props:e})=>{const{isDisabled:i}=e,s=t.query("GET_DISABLED")||e.opacity===0;s&&!i?(e.isDisabled=!0,j(t.element,"disabled","disabled")):!s&&i&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},Qn=Y({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Ql,write:Jl}),Jn=(t,e=".",i=1e3,s={})=>{const{labelBytes:n="bytes",labelKilobytes:r="KB",labelMegabytes:o="MB",labelGigabytes:a="GB"}=s;t=Math.round(Math.abs(t));const l=i,c=i*i,d=i*i*i;return t<l?`${t} ${n}`:t<c?`${Math.floor(t/l)} ${r}`:t<d?`${bs(t/c,1,e)} ${o}`:`${bs(t/d,2,e)} ${a}`},bs=(t,e,i)=>t.toFixed(e).split(".").filter(s=>s!=="0").join(i),ec=({root:t,props:e})=>{const i=Oe("span");i.className="filepond--file-info-main",j(i,"aria-hidden","true"),t.appendChild(i),t.ref.fileName=i;const s=Oe("span");s.className="filepond--file-info-sub",t.appendChild(s),t.ref.fileSize=s,W(s,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),W(i,ki(t.query("GET_ITEM_NAME",e.id)))},yi=({root:t,props:e})=>{W(t.ref.fileSize,Jn(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),W(t.ref.fileName,ki(t.query("GET_ITEM_NAME",e.id)))},Ds=({root:t,props:e})=>{if(Qe(t.query("GET_ITEM_SIZE",e.id))){yi({root:t,props:e});return}W(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},tc=Y({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ie({DID_LOAD_ITEM:yi,DID_UPDATE_ITEM_META:yi,DID_THROW_ITEM_LOAD_ERROR:Ds,DID_THROW_ITEM_INVALID:Ds}),didCreateView:t=>{He("CREATE_VIEW",{...t,view:t})},create:ec,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),er=t=>Math.round(t*100),ic=({root:t})=>{const e=Oe("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const i=Oe("span");i.className="filepond--file-status-sub",t.appendChild(i),t.ref.sub=i,tr({root:t,action:{progress:null}})},tr=({root:t,action:e})=>{const i=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${er(e.progress)}%`;W(t.ref.main,i),W(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},sc=({root:t,action:e})=>{const i=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${er(e.progress)}%`;W(t.ref.main,i),W(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},nc=({root:t})=>{W(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),W(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},rc=({root:t})=>{W(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),W(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},oc=({root:t})=>{W(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),W(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},Ls=({root:t})=>{W(t.ref.main,""),W(t.ref.sub,"")},st=({root:t,action:e})=>{W(t.ref.main,e.status.main),W(t.ref.sub,e.status.sub)},ac=Y({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ie({DID_LOAD_ITEM:Ls,DID_REVERT_ITEM_PROCESSING:Ls,DID_REQUEST_ITEM_PROCESSING:nc,DID_ABORT_ITEM_PROCESSING:rc,DID_COMPLETE_ITEM_PROCESSING:oc,DID_UPDATE_ITEM_PROCESS_PROGRESS:sc,DID_UPDATE_ITEM_LOAD_PROGRESS:tr,DID_THROW_ITEM_LOAD_ERROR:st,DID_THROW_ITEM_INVALID:st,DID_THROW_ITEM_PROCESSING_ERROR:st,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:st,DID_THROW_ITEM_REMOVE_ERROR:st}),didCreateView:t=>{He("CREATE_VIEW",{...t,view:t})},create:ic,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Ri={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Si=[];k(Ri,t=>{Si.push(t)});const ae=t=>{if(wi(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},lc=t=>t.ref.buttonAbortItemLoad.rect.element.width,yt=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),cc=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),dc=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),hc=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),wi=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),uc={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:dc},processProgressIndicator:{opacity:0,align:hc},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Cs={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ae},status:{translateX:ae}},li={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},We={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{translateX:ae,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:wi},info:{translateX:ae},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:wi},buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{opacity:1,translateX:ae}},DID_LOAD_ITEM:Cs,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ae},status:{translateX:ae}},DID_START_ITEM_PROCESSING:li,DID_REQUEST_ITEM_PROCESSING:li,DID_UPDATE_ITEM_PROCESS_PROGRESS:li,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ae}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ae},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Cs},pc=Y({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),fc=({root:t,props:e})=>{const i=Object.keys(Ri).reduce((u,m)=>(u[m]={...Ri[m]},u),{}),{id:s}=e,n=t.query("GET_ALLOW_REVERT"),r=t.query("GET_ALLOW_REMOVE"),o=t.query("GET_ALLOW_PROCESS"),a=t.query("GET_INSTANT_UPLOAD"),l=t.query("IS_ASYNC"),c=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let d;l?o&&!n?d=u=>!/RevertItemProcessing/.test(u):!o&&n?d=u=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(u):!o&&!n&&(d=u=>!/Process/.test(u)):d=u=>!/Process/.test(u);const h=d?Si.filter(d):Si.concat();if(a&&n&&(i.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",i.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!n){const u=We.DID_COMPLETE_ITEM_PROCESSING;u.info.translateX=cc,u.info.translateY=yt,u.status.translateY=yt,u.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!o&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(u=>{We[u].status.translateY=yt}),We.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=lc),c&&n){i.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const u=We.DID_COMPLETE_ITEM_PROCESSING;u.info.translateX=ae,u.status.translateY=yt,u.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}r||(i.RemoveItem.disabled=!0),k(i,(u,m)=>{const g=t.createChildView(Qn,{label:t.query(m.label),icon:t.query(m.icon),opacity:0});h.includes(u)&&t.appendChildView(g),m.disabled&&(g.element.setAttribute("disabled","disabled"),g.element.setAttribute("hidden","hidden")),g.element.dataset.align=t.query(`GET_STYLE_${m.align}`),g.element.classList.add(m.className),g.on("click",T=>{T.stopPropagation(),!m.disabled&&t.dispatch(m.action,{query:s})}),t.ref[`button${u}`]=g}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(pc)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(tc,{id:s})),t.ref.status=t.appendChildView(t.createChildView(ac,{id:s}));const f=t.appendChildView(t.createChildView(Ps,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=f;const _=t.appendChildView(t.createChildView(Ps,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));_.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=_,t.ref.activeStyles=[]},mc=({root:t,actions:e,props:i})=>{gc({root:t,actions:e,props:i});let s=e.concat().filter(n=>/^DID_/.test(n.type)).reverse().find(n=>We[n.type]);if(s){t.ref.activeStyles=[];const n=We[s.type];k(uc,(r,o)=>{const a=t.ref[r];k(o,(l,c)=>{const d=n[r]&&typeof n[r][l]<"u"?n[r][l]:c;t.ref.activeStyles.push({control:a,key:l,value:d})})})}t.ref.activeStyles.forEach(({control:n,key:r,value:o})=>{n[r]=typeof o=="function"?o(t):o})},gc=ie({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),_c=Y({create:fc,write:mc,didCreateView:t=>{He("CREATE_VIEW",{...t,view:t})},name:"file"}),Ec=({root:t,props:e})=>{t.ref.fileName=Oe("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(_c,{id:e.id})),t.ref.data=!1},Ic=({root:t,props:e})=>{W(t.ref.fileName,ki(t.query("GET_ITEM_NAME",e.id)))},Tc=Y({create:Ec,ignoreRect:!0,write:ie({DID_LOAD_ITEM:Ic}),didCreateView:t=>{He("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),Ms={type:"spring",damping:.6,mass:7},yc=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Ms},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Ms},styles:["translateY"]}}].forEach(i=>{Rc(t,i,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},Rc=(t,e,i)=>{const s=Y({name:`panel-${e.name} filepond--${i}`,mixins:e.mixins,ignoreRectUpdate:!0}),n=t.createChildView(s,e.props);t.ref[e.name]=t.appendChildView(n)},Sc=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=Fn(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const i=t.ref.top.rect.element,s=t.ref.bottom.rect.element,n=Math.max(i.height+s.height,e.height);t.ref.center.translateY=i.height,t.ref.center.scaleY=(n-i.height-s.height)/100,t.ref.bottom.translateY=n-s.height},ir=Y({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:Sc,create:yc,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),wc=t=>{const e=t.map(s=>s.id);let i;return{setIndex:s=>{i=s},getIndex:()=>i,getItemIndex:s=>e.indexOf(s.id)}},Ns={type:"spring",stiffness:.75,damping:.45,mass:10},xs="spring",Fs={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},vc=({root:t,props:e})=>{if(t.ref.handleClick=s=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(Tc,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(ir,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const i=s=>{if(!s.isPrimary)return;let n=!1;const r={x:s.pageX,y:s.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:s.offsetX,y:s.offsetY};const o=wc(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:o});const a=h=>{if(!h.isPrimary)return;h.stopPropagation(),h.preventDefault(),e.dragOffset={x:h.pageX-r.x,y:h.pageY-r.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!n&&(n=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:o})},l=h=>{h.isPrimary&&(e.dragOffset={x:h.pageX-r.x,y:h.pageY-r.y},d())},c=()=>{d()},d=()=>{document.removeEventListener("pointercancel",c),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:o}),n&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0)};document.addEventListener("pointercancel",c),document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)};t.element.addEventListener("pointerdown",i)},Oc=ie({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),Ac=ie({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:i,shouldOptimize:s})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let n=e.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>Fs[o.type]);n&&n.type!==i.currentState&&(i.currentState=n.type,t.element.dataset.filepondItemState=Fs[i.currentState]||"");const r=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");r?s||(t.height=t.rect.element.width*r):(Oc({root:t,actions:e,props:i}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),s&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),Pc=Y({create:vc,write:Ac,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:xs,scaleY:xs,translateX:Ns,translateY:Ns,opacity:{type:"tween",duration:150}}}});var qi=(t,e)=>Math.max(1,Math.floor((t+1)/e));const $i=(t,e,i)=>{if(!i)return;const s=t.rect.element.width,n=e.length;let r=null;if(n===0||i.top<e[0].rect.element.top)return-1;const a=e[0].rect.element,l=a.marginLeft+a.marginRight,c=a.width+l,d=qi(s,c);if(d===1){for(let _=0;_<n;_++){const u=e[_],m=u.rect.outer.top+u.rect.element.height*.5;if(i.top<m)return _}return n}const h=a.marginTop+a.marginBottom,f=a.height+h;for(let _=0;_<n;_++){const u=_%d,m=Math.floor(_/d),g=u*c,T=m*f,p=T-a.marginTop,E=g+c,y=T+f+a.marginBottom;if(i.top<y&&i.top>p){if(i.left<E)return _;_!==n-1?r=_:r=null}}return r!==null?r:n},Rt={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)}},bc=({root:t})=>{j(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},Dc=({root:t,action:e})=>{const{id:i,index:s,interactionMethod:n}=e;t.ref.addIndex=s;const r=Date.now();let o=r,a=1;if(n!==me.NONE){a=0;const l=t.query("GET_ITEM_INSERT_INTERVAL"),c=r-t.ref.lastItemSpanwDate;o=c<l?r+(l-c):r}t.ref.lastItemSpanwDate=o,t.appendChildView(t.createChildView(Pc,{spawnDate:o,id:i,opacity:a,interactionMethod:n}),s)},Gs=(t,e,i,s=0,n=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=i,Date.now()>t.spawnDate&&(t.opacity===0&&Lc(t,e,i,s,n),t.scaleX=1,t.scaleY=1,t.opacity=1))},Lc=(t,e,i,s,n)=>{t.interactionMethod===me.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=i):t.interactionMethod===me.DROP?(t.translateX=null,t.translateX=e-s*20,t.translateY=null,t.translateY=i-n*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===me.BROWSE?(t.translateY=null,t.translateY=i-30):t.interactionMethod===me.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},Cc=({root:t,action:e})=>{const{id:i}=e,s=t.childViews.find(n=>n.id===i);s&&(s.scaleX=.9,s.scaleY=.9,s.opacity=0,s.markedForRemoval=!0)},ci=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,Mc=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,Nc=({root:t,action:e})=>{const{id:i,dragState:s}=e,n=t.query("GET_ITEM",{id:i}),r=t.childViews.find(g=>g.id===i),o=t.childViews.length,a=s.getItemIndex(n);if(!r)return;const l={x:r.dragOrigin.x+r.dragOffset.x+r.dragCenter.x,y:r.dragOrigin.y+r.dragOffset.y+r.dragCenter.y},c=ci(r),d=Mc(r);let h=Math.floor(t.rect.outer.width/d);h>o&&(h=o);const f=Math.floor(o/h+1);Rt.setHeight=c*f,Rt.setWidth=d*h;var _={y:Math.floor(l.y/c),x:Math.floor(l.x/d),getGridIndex:function(){return l.y>Rt.getHeight||l.y<0||l.x>Rt.getWidth||l.x<0?a:this.y*h+this.x},getColIndex:function(){const T=t.query("GET_ACTIVE_ITEMS"),p=t.childViews.filter(D=>D.rect.element.height),E=T.map(D=>p.find(L=>L.id===D.id)),y=E.findIndex(D=>D===r),R=ci(r),P=E.length;let C=P,v=0,b=0,x=0;for(let D=0;D<P;D++)if(v=ci(E[D]),x=b,b=x+v,l.y<b){if(y>D){if(l.y<x+R){C=D;break}continue}C=D;break}return C}};const u=h>1?_.getGridIndex():_.getColIndex();t.dispatch("MOVE_ITEM",{query:r,index:u});const m=s.getIndex();if(m===void 0||m!==u){if(s.setIndex(u),m===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:a,target:u})}},xc=ie({DID_ADD_ITEM:Dc,DID_REMOVE_ITEM:Cc,DID_DRAG_ITEM:Nc}),Fc=({root:t,props:e,actions:i,shouldOptimize:s})=>{xc({root:t,props:e,actions:i});const{dragCoordinates:n}=e,r=t.rect.element.width,o=t.childViews.filter(E=>E.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(E=>o.find(y=>y.id===E.id)).filter(E=>E),l=n?$i(t,a,n):null,c=t.ref.addIndex||null;t.ref.addIndex=null;let d=0,h=0,f=0;if(a.length===0)return;const _=a[0].rect.element,u=_.marginTop+_.marginBottom,m=_.marginLeft+_.marginRight,g=_.width+m,T=_.height+u,p=qi(r,g);if(p===1){let E=0,y=0;a.forEach((R,P)=>{if(l){let b=P-l;b===-2?y=-u*.25:b===-1?y=-u*.75:b===0?y=u*.75:b===1?y=u*.25:y=0}s&&(R.translateX=null,R.translateY=null),R.markedForRemoval||Gs(R,0,E+y);let v=(R.rect.element.height+u)*(R.markedForRemoval?R.opacity:1);E+=v})}else{let E=0,y=0;a.forEach((R,P)=>{P===l&&(d=1),P===c&&(f+=1),R.markedForRemoval&&R.opacity<.5&&(h-=1);const C=P+f+d+h,v=C%p,b=Math.floor(C/p),x=v*g,D=b*T,L=Math.sign(x-E),V=Math.sign(D-y);E=x,y=D,!R.markedForRemoval&&(s&&(R.translateX=null,R.translateY=null),Gs(R,x,D,L,V))})}},Gc=(t,e)=>e.filter(i=>i.data&&i.data.id?t.id===i.data.id:!0),Bc=Y({create:bc,write:Fc,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:Gc,mixins:{apis:["dragCoordinates"]}}),Uc=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(Bc)),e.dragCoordinates=null,e.overflowing=!1},zc=({root:t,props:e,action:i})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:i.position.scopeLeft-t.ref.list.rect.element.left,top:i.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Vc=({props:t})=>{t.dragCoordinates=null},Hc=ie({DID_DRAG:zc,DID_END_DRAG:Vc}),kc=({root:t,props:e,actions:i})=>{if(Hc({root:t,props:e,actions:i}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const s=Math.round(e.overflow);s!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=s)}},qc=Y({create:Uc,write:kc,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ie=(t,e,i,s="")=>{i?j(t,e,s):t.removeAttribute(e)},$c=t=>{if(!(!t||t.value==="")){try{t.value=""}catch{}if(t.value){const e=Oe("form"),i=t.parentNode,s=t.nextSibling;e.appendChild(t),e.reset(),s?i.insertBefore(t,s):i.appendChild(t)}}},Wc=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,j(t.element,"name",t.query("GET_NAME")),j(t.element,"aria-controls",`filepond--assistant-${e.id}`),j(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),sr({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),nr({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),rr({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),vi({root:t}),or({root:t,action:{value:t.query("GET_REQUIRED")}}),ar({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=i=>{if(!t.element.value)return;const s=Array.from(t.element.files).map(n=>(n._relativePath=n.webkitRelativePath,n));setTimeout(()=>{e.onload(s),$c(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},sr=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Ie(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},nr=({root:t,action:e})=>{Ie(t.element,"multiple",e.value)},rr=({root:t,action:e})=>{Ie(t.element,"webkitdirectory",e.value)},vi=({root:t})=>{const e=t.query("GET_DISABLED"),i=t.query("GET_ALLOW_BROWSE"),s=e||!i;Ie(t.element,"disabled",s)},or=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&Ie(t.element,"required",!0):Ie(t.element,"required",!1)},ar=({root:t,action:e})=>{Ie(t.element,"capture",!!e.value,e.value===!0?"":e.value)},Bs=({root:t})=>{const{element:e}=t;if(t.query("GET_TOTAL_ITEMS")>0){Ie(e,"required",!1),Ie(e,"name",!1);const i=t.query("GET_ACTIVE_ITEMS");let s=!1;for(let n=0;n<i.length;n++)i[n].status===F.LOAD_ERROR&&(s=!0);t.element.setCustomValidity(s?t.query("GET_LABEL_INVALID_FIELD"):"")}else Ie(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&Ie(e,"required",!0)},Zc=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},Yc=Y({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Wc,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:ie({DID_LOAD_ITEM:Bs,DID_REMOVE_ITEM:Bs,DID_THROW_ITEM_INVALID:Zc,DID_SET_DISABLED:vi,DID_SET_ALLOW_BROWSE:vi,DID_SET_ALLOW_DIRECTORIES_ONLY:rr,DID_SET_ALLOW_MULTIPLE:nr,DID_SET_ACCEPTED_FILE_TYPES:sr,DID_SET_CAPTURE_METHOD:ar,DID_SET_REQUIRED:or})}),Us={ENTER:13,SPACE:32},Xc=({root:t,props:e})=>{const i=Oe("label");j(i,"for",`filepond--browser-${e.id}`),j(i,"id",`filepond--drop-label-${e.id}`),t.ref.handleKeyDown=s=>{(s.keyCode===Us.ENTER||s.keyCode===Us.SPACE)&&(s.preventDefault(),t.ref.label.click())},t.ref.handleClick=s=>{s.target===i||i.contains(s.target)||t.ref.label.click()},i.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),lr(i,e.caption),t.appendChild(i),t.ref.label=i},lr=(t,e)=>{t.innerHTML=e;const i=t.querySelector(".filepond--label-action");return i&&j(i,"tabindex","0"),e},jc=Y({name:"drop-label",ignoreRect:!0,create:Xc,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:ie({DID_SET_LABEL_IDLE:({root:t,action:e})=>{lr(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Kc=Y({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Qc=({root:t})=>{const e=t.rect.element.width*.5,i=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(Kc,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:i}))},Jc=({root:t,action:e})=>{if(!t.ref.blob){Qc({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},ed=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},td=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},id=({root:t,props:e,actions:i})=>{sd({root:t,props:e,actions:i});const{blob:s}=t.ref;i.length===0&&s&&s.opacity===0&&(t.removeChildView(s),t.ref.blob=null)},sd=ie({DID_DRAG:Jc,DID_DROP:td,DID_END_DRAG:ed}),nd=Y({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:id}),cr=(t,e)=>{try{const i=new DataTransfer;e.forEach(s=>{s instanceof File?i.items.add(s):i.items.add(new File([s],s.name,{type:s.type}))}),t.files=i.files}catch{return!1}return!0},rd=({root:t})=>{t.ref.fields={};const e=document.createElement("legend");e.textContent="Files",t.element.appendChild(e)},Jt=(t,e)=>t.ref.fields[e],Wi=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},zs=({root:t})=>Wi(t),od=({root:t,action:e})=>{const n=!(t.query("GET_ITEM",e.id).origin===X.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),r=Oe("input");r.type=n?"file":"hidden",r.name=t.query("GET_NAME"),t.ref.fields[e.id]=r,Wi(t)},ad=({root:t,action:e})=>{const i=Jt(t,e.id);if(!i||(e.serverFileReference!==null&&(i.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const s=t.query("GET_ITEM",e.id);cr(i,[s.file])},ld=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const i=Jt(t,e.id);i&&cr(i,[e.file])},0)},cd=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},dd=({root:t,action:e})=>{const i=Jt(t,e.id);i&&(i.parentNode&&i.parentNode.removeChild(i),delete t.ref.fields[e.id])},hd=({root:t,action:e})=>{const i=Jt(t,e.id);i&&(e.value===null?i.removeAttribute("value"):i.type!="file"&&(i.value=e.value),Wi(t))},ud=ie({DID_SET_DISABLED:cd,DID_ADD_ITEM:od,DID_LOAD_ITEM:ad,DID_REMOVE_ITEM:dd,DID_DEFINE_VALUE:hd,DID_PREPARE_OUTPUT:ld,DID_REORDER_ITEMS:zs,DID_SORT_ITEMS:zs}),pd=Y({tag:"fieldset",name:"data",create:rd,write:ud,ignoreRect:!0}),fd=t=>"getRootNode"in t?t.getRootNode():document,md=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],gd=["css","csv","html","txt"],_d={zip:"zip|compressed",epub:"application/epub+zip"},dr=(t="")=>(t=t.toLowerCase(),md.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):gd.includes(t)?"text/"+t:_d[t]||""),Zi=t=>new Promise((e,i)=>{const s=vd(t);if(s.length&&!Ed(t))return e(s);Id(t).then(e)}),Ed=t=>t.files?t.files.length>0:!1,Id=t=>new Promise((e,i)=>{const s=(t.items?Array.from(t.items):[]).filter(n=>Td(n)).map(n=>yd(n));if(!s.length){e(t.files?Array.from(t.files):[]);return}Promise.all(s).then(n=>{const r=[];n.forEach(o=>{r.push.apply(r,o)}),e(r.filter(o=>o).map(o=>(o._relativePath||(o._relativePath=o.webkitRelativePath),o)))}).catch(console.error)}),Td=t=>{if(hr(t)){const e=Yi(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},yd=t=>new Promise((e,i)=>{if(wd(t)){Rd(Yi(t)).then(e).catch(i);return}e([t.getAsFile()])}),Rd=t=>new Promise((e,i)=>{const s=[];let n=0,r=0;const o=()=>{r===0&&n===0&&e(s)},a=l=>{n++;const c=l.createReader(),d=()=>{c.readEntries(h=>{if(h.length===0){n--,o();return}h.forEach(f=>{f.isDirectory?a(f):(r++,f.file(_=>{const u=Sd(_);f.fullPath&&(u._relativePath=f.fullPath),s.push(u),r--,o()}))}),d()},i)};d()};a(t)}),Sd=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,i=t.name,s=dr(Qt(t.name));return s.length&&(t=t.slice(0,t.size,s),t.name=i,t.lastModifiedDate=e),t},wd=t=>hr(t)&&(Yi(t)||{}).isDirectory,hr=t=>"webkitGetAsEntry"in t,Yi=t=>t.webkitGetAsEntry(),vd=t=>{let e=[];try{if(e=Ad(t),e.length)return e;e=Od(t)}catch{}return e},Od=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},Ad=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const i=e.match(/src\s*=\s*"(.+?)"/);if(i)return[i[1]]}return[]},Bt=[],ze=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),Pd=(t,e,i)=>{const s=bd(e),n={element:t,filterElement:i,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=s.addListener(n),n},bd=t=>{const e=Bt.find(s=>s.element===t);if(e)return e;const i=Dd(t);return Bt.push(i),i},Dd=t=>{const e=[],i={dragenter:Cd,dragover:Md,dragleave:xd,drop:Nd},s={};k(i,(r,o)=>{s[r]=o(t,e),t.addEventListener(r,s[r],!1)});const n={element:t,addListener:r=>(e.push(r),()=>{e.splice(e.indexOf(r),1),e.length===0&&(Bt.splice(Bt.indexOf(n),1),k(i,o=>{t.removeEventListener(o,s[o],!1)}))})};return n},Ld=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),Xi=(t,e)=>{const i=fd(e),s=Ld(i,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return s===e||e.contains(s)};let ur=null;const St=(t,e)=>{try{t.dropEffect=e}catch{}},Cd=(t,e)=>i=>{i.preventDefault(),ur=i.target,e.forEach(s=>{const{element:n,onenter:r}=s;Xi(i,n)&&(s.state="enter",r(ze(i)))})},Md=(t,e)=>i=>{i.preventDefault();const s=i.dataTransfer;Zi(s).then(n=>{let r=!1;e.some(o=>{const{filterElement:a,element:l,onenter:c,onexit:d,ondrag:h,allowdrop:f}=o;St(s,"copy");const _=f(n);if(!_){St(s,"none");return}if(Xi(i,l)){if(r=!0,o.state===null){o.state="enter",c(ze(i));return}if(o.state="over",a&&!_){St(s,"none");return}h(ze(i))}else a&&!r&&St(s,"none"),o.state&&(o.state=null,d(ze(i)))})})},Nd=(t,e)=>i=>{i.preventDefault();const s=i.dataTransfer;Zi(s).then(n=>{e.forEach(r=>{const{filterElement:o,element:a,ondrop:l,onexit:c,allowdrop:d}=r;if(r.state=null,!(o&&!Xi(i,a))){if(!d(n))return c(ze(i));l(ze(i),n)}})})},xd=(t,e)=>i=>{ur===i.target&&e.forEach(s=>{const{onexit:n}=s;s.state=null,n(ze(i))})},Fd=(t,e,i)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:s,requiresDropOnElement:n,filterItems:r=d=>d}=i,o=Pd(t,s?document.documentElement:t,n);let a="",l="";o.allowdrop=d=>e(r(d)),o.ondrop=(d,h)=>{const f=r(h);if(!e(f)){c.ondragend(d);return}l="drag-drop",c.onload(f,d)},o.ondrag=d=>{c.ondrag(d)},o.onenter=d=>{l="drag-over",c.ondragstart(d)},o.onexit=d=>{l="drag-exit",c.ondragend(d)};const c={updateHopperState:()=>{a!==l&&(t.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{o.destroy()}};return c};let Oi=!1;const Ye=[],pr=t=>{const e=document.activeElement;if(e&&(/textarea|input/i.test(e.nodeName)||e.getAttribute("contenteditable")==="true")){let s=!1,n=e;for(;n!==document.body;){if(n.classList.contains("filepond--root")){s=!0;break}n=n.parentNode}if(!s)return}Zi(t.clipboardData).then(s=>{s.length&&Ye.forEach(n=>n(s))})},Gd=t=>{Ye.includes(t)||(Ye.push(t),!Oi&&(Oi=!0,document.addEventListener("paste",pr)))},Bd=t=>{zi(Ye,Ye.indexOf(t)),Ye.length===0&&(document.removeEventListener("paste",pr),Oi=!1)},Ud=()=>{const t=i=>{e.onload(i)},e={destroy:()=>{Bd(t)},onload:()=>{}};return Gd(t),e},zd=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,j(t.element,"role","alert"),j(t.element,"aria-live","polite"),j(t.element,"aria-relevant","additions")};let Vs=null,Hs=null;const di=[],ei=(t,e)=>{t.element.textContent=e},Vd=t=>{t.element.textContent=""},fr=(t,e,i)=>{const s=t.query("GET_TOTAL_ITEMS");ei(t,`${i} ${e}, ${s} ${s===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Hs),Hs=setTimeout(()=>{Vd(t)},1500)},mr=t=>t.element.parentNode.contains(document.activeElement),Hd=({root:t,action:e})=>{if(!mr(t))return;t.element.textContent="";const i=t.query("GET_ITEM",e.id);di.push(i.filename),clearTimeout(Vs),Vs=setTimeout(()=>{fr(t,di.join(", "),t.query("GET_LABEL_FILE_ADDED")),di.length=0},750)},kd=({root:t,action:e})=>{if(!mr(t))return;const i=e.item;fr(t,i.filename,t.query("GET_LABEL_FILE_REMOVED"))},qd=({root:t,action:e})=>{const s=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");ei(t,`${s} ${n}`)},ks=({root:t,action:e})=>{const s=t.query("GET_ITEM",e.id).filename,n=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");ei(t,`${s} ${n}`)},wt=({root:t,action:e})=>{const s=t.query("GET_ITEM",e.id).filename;ei(t,`${e.status.main} ${s} ${e.status.sub}`)},$d=Y({create:zd,ignoreRect:!0,ignoreRectUpdate:!0,write:ie({DID_LOAD_ITEM:Hd,DID_REMOVE_ITEM:kd,DID_COMPLETE_ITEM_PROCESSING:qd,DID_ABORT_ITEM_PROCESSING:ks,DID_REVERT_ITEM_PROCESSING:ks,DID_THROW_ITEM_REMOVE_ERROR:wt,DID_THROW_ITEM_LOAD_ERROR:wt,DID_THROW_ITEM_INVALID:wt,DID_THROW_ITEM_PROCESSING_ERROR:wt}),tag:"span",name:"assistant"}),gr=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),i=>i.charAt(1).toUpperCase()),_r=(t,e=16,i=!0)=>{let s=Date.now(),n=null;return(...r)=>{clearTimeout(n);const o=Date.now()-s,a=()=>{s=Date.now(),t(...r)};o<e?i||(n=setTimeout(a,e-o)):a()}},Wd=1e6,Ut=t=>t.preventDefault(),Zd=({root:t,props:e})=>{const i=t.query("GET_ID");i&&(t.element.id=i);const s=t.query("GET_CLASS_NAME");s&&s.split(" ").filter(l=>l.length).forEach(l=>{t.element.classList.add(l)}),t.ref.label=t.appendChildView(t.createChildView(jc,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(qc,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(ir,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView($d,{...e})),t.ref.data=t.appendChildView(t.createChildView(pd,{...e})),t.ref.measure=Oe("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(l=>!ve(l.value)).map(({name:l,value:c})=>{t.element.dataset[l]=c}),t.ref.widthPrevious=null,t.ref.widthUpdated=_r(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,r="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&r&&!n&&(t.element.addEventListener("touchmove",Ut,{passive:!1}),t.element.addEventListener("gesturestart",Ut));const o=t.query("GET_CREDITS");if(o.length===2){const l=document.createElement("a");l.className="filepond--credits",l.href=o[0],l.tabIndex=-1,l.target="_blank",l.rel="noopener noreferrer nofollow",l.textContent=o[1],t.element.appendChild(l),t.ref.credits=l}},Yd=({root:t,props:e,actions:i})=>{if(Jd({root:t,props:e,actions:i}),i.filter(P=>/^DID_SET_STYLE_/.test(P.type)).filter(P=>!ve(P.data.value)).map(({type:P,data:C})=>{const v=gr(P.substring(8).toLowerCase(),"_");t.element.dataset[v]=C.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let s=t.ref.bounds;s||(s=t.ref.bounds=Kd(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:n,label:r,list:o,panel:a}=t.ref;n&&n.updateHopperState();const l=t.query("GET_PANEL_ASPECT_RATIO"),c=t.query("GET_ALLOW_MULTIPLE"),d=t.query("GET_TOTAL_ITEMS"),h=c?t.query("GET_MAX_FILES")||Wd:1,f=d===h,_=i.find(P=>P.type==="DID_ADD_ITEM");if(f&&_){const P=_.data.interactionMethod;r.opacity=0,c?r.translateY=-40:P===me.API?r.translateX=40:P===me.BROWSE?r.translateY=40:r.translateY=30}else f||(r.opacity=1,r.translateX=0,r.translateY=0);const u=Xd(t),m=jd(t),g=r.rect.element.height,T=!c||f?0:g,p=f?o.rect.element.marginTop:0,E=d===0?0:o.rect.element.marginBottom,y=T+p+m.visual+E,R=T+p+m.bounds+E;if(o.translateY=Math.max(0,T-o.rect.element.marginTop)-u.top,l){const P=t.rect.element.width,C=P*l;l!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=l,t.ref.updateHistory=[]);const v=t.ref.updateHistory;v.push(P);const b=2;if(v.length>b*2){const D=v.length,L=D-10;let V=0;for(let A=D;A>=L;A--)if(v[A]===v[A-2]&&V++,V>=b)return}a.scalable=!1,a.height=C;const x=C-T-(E-u.bottom)-(f?p:0);m.visual>x?o.overflow=x:o.overflow=null,t.height=C}else if(s.fixedHeight){a.scalable=!1;const P=s.fixedHeight-T-(E-u.bottom)-(f?p:0);m.visual>P?o.overflow=P:o.overflow=null}else if(s.cappedHeight){const P=y>=s.cappedHeight,C=Math.min(s.cappedHeight,y);a.scalable=!0,a.height=P?C:C-u.top-u.bottom;const v=C-T-(E-u.bottom)-(f?p:0);y>s.cappedHeight&&m.visual>v?o.overflow=v:o.overflow=null,t.height=Math.min(s.cappedHeight,R-u.top-u.bottom)}else{const P=d>0?u.top+u.bottom:0;a.scalable=!0,a.height=Math.max(g,y-P),t.height=Math.max(g,R-P)}t.ref.credits&&a.heightCurrent&&(t.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},Xd=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},jd=t=>{let e=0,i=0;const s=t.ref.list,n=s.childViews[0],r=n.childViews.filter(p=>p.rect.element.height),o=t.query("GET_ACTIVE_ITEMS").map(p=>r.find(E=>E.id===p.id)).filter(p=>p);if(o.length===0)return{visual:e,bounds:i};const a=n.rect.element.width,l=$i(n,o,s.dragCoordinates),c=o[0].rect.element,d=c.marginTop+c.marginBottom,h=c.marginLeft+c.marginRight,f=c.width+h,_=c.height+d,u=typeof l<"u"&&l>=0?1:0,m=o.find(p=>p.markedForRemoval&&p.opacity<.45)?-1:0,g=o.length+u+m,T=qi(a,f);return T===1?o.forEach(p=>{const E=p.rect.element.height+d;i+=E,e+=E*p.opacity}):(i=Math.ceil(g/T)*_,e=i),{visual:e,bounds:i}},Kd=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},ji=(t,e)=>{const i=t.query("GET_ALLOW_REPLACE"),s=t.query("GET_ALLOW_MULTIPLE"),n=t.query("GET_TOTAL_ITEMS");let r=t.query("GET_MAX_FILES");const o=e.length;return!s&&o>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:q("warning",0,"Max files")}),!0):(r=s?r:1,!s&&i?!1:Qe(r)&&n+o>r?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:q("warning",0,"Max files")}),!0):!1)},Qd=(t,e,i)=>{const s=t.childViews[0];return $i(s,e,{left:i.scopeLeft-s.rect.element.left,top:i.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},qs=t=>{const e=t.query("GET_ALLOW_DROP"),i=t.query("GET_DISABLED"),s=e&&!i;if(s&&!t.ref.hopper){const n=Fd(t.element,r=>{const o=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?r.every(l=>He("ALLOW_HOPPER_ITEM",l,{query:t.query}).every(c=>c===!0)&&o(l)):!0},{filterItems:r=>{const o=t.query("GET_IGNORED_FILES");return r.filter(a=>Ue(a)?!o.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});n.onload=(r,o)=>{const l=t.ref.list.childViews[0].childViews.filter(d=>d.rect.element.height),c=t.query("GET_ACTIVE_ITEMS").map(d=>l.find(h=>h.id===d.id)).filter(d=>d);_e("ADD_ITEMS",r,{dispatch:t.dispatch}).then(d=>{if(ji(t,d))return!1;t.dispatch("ADD_ITEMS",{items:d,index:Qd(t.ref.list,c,o),interactionMethod:me.DROP})}),t.dispatch("DID_DROP",{position:o}),t.dispatch("DID_END_DRAG",{position:o})},n.ondragstart=r=>{t.dispatch("DID_START_DRAG",{position:r})},n.ondrag=_r(r=>{t.dispatch("DID_DRAG",{position:r})}),n.ondragend=r=>{t.dispatch("DID_END_DRAG",{position:r})},t.ref.hopper=n,t.ref.drip=t.appendChildView(t.createChildView(nd))}else!s&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},$s=(t,e)=>{const i=t.query("GET_ALLOW_BROWSE"),s=t.query("GET_DISABLED"),n=i&&!s;n&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(Yc,{...e,onload:r=>{_e("ADD_ITEMS",r,{dispatch:t.dispatch}).then(o=>{if(ji(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:me.BROWSE})})}}),0):!n&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},Ws=t=>{const e=t.query("GET_ALLOW_PASTE"),i=t.query("GET_DISABLED"),s=e&&!i;s&&!t.ref.paster?(t.ref.paster=Ud(),t.ref.paster.onload=n=>{_e("ADD_ITEMS",n,{dispatch:t.dispatch}).then(r=>{if(ji(t,r))return!1;t.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:me.PASTE})})}):!s&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},Jd=ie({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{$s(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{qs(t)},DID_SET_ALLOW_PASTE:({root:t})=>{Ws(t)},DID_SET_DISABLED:({root:t,props:e})=>{qs(t),Ws(t),$s(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),eh=Y({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:Zd,write:Yd,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Ut),t.element.removeEventListener("gesturestart",Ut)},mixins:{styles:["height"]}}),th=(t={})=>{let e=null;const i=Gt(),s=Ea(sl(i),[yl,ol(i)],[Wl,rl(i)]);s.dispatch("SET_OPTIONS",{options:t});const n=()=>{document.hidden||s.dispatch("KICK")};document.addEventListener("visibilitychange",n);let r=null,o=!1,a=!1,l=null,c=null;const d=()=>{o||(o=!0),clearTimeout(r),r=setTimeout(()=>{o=!1,l=null,c=null,a&&(a=!1,s.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",d);const h=eh(s,{id:Ui()});let f=!1,_=!1;const u={_read:()=>{o&&(c=window.innerWidth,l||(l=c),!a&&c!==l&&(s.dispatch("DID_START_RESIZE"),a=!0)),_&&f&&(f=h.element.offsetParent===null),!f&&(h._read(),_=h.rect.element.hidden)},_write:w=>{const O=s.processActionQueue().filter(M=>!/^SET_/.test(M.type));f&&!O.length||(p(O),f=h._write(w,O,a),cl(s.query("GET_ITEMS")),f&&s.processDispatchQueue())}},m=w=>O=>{const M={type:w};if(!O)return M;if(O.hasOwnProperty("error")&&(M.error=O.error?{...O.error}:null),O.status&&(M.status={...O.status}),O.file&&(M.output=O.file),O.source)M.file=O.source;else if(O.item||O.id){const N=O.item?O.item:s.query("GET_ITEM",O.id);M.file=N?ne(N):null}return O.items&&(M.items=O.items.map(ne)),/progress/.test(w)&&(M.progress=O.progress),O.hasOwnProperty("origin")&&O.hasOwnProperty("target")&&(M.origin=O.origin,M.target=O.target),M},g={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},T=w=>{const O={pond:U,...w};delete O.type,h.element.dispatchEvent(new CustomEvent(`FilePond:${w.type}`,{detail:O,bubbles:!0,cancelable:!0,composed:!0}));const M=[];w.hasOwnProperty("error")&&M.push(w.error),w.hasOwnProperty("file")&&M.push(w.file);const N=["type","error","file"];Object.keys(w).filter(G=>!N.includes(G)).forEach(G=>M.push(w[G])),U.fire(w.type,...M);const H=s.query(`GET_ON${w.type.toUpperCase()}`);H&&H(...M)},p=w=>{w.length&&w.filter(O=>g[O.type]).forEach(O=>{const M=g[O.type];(Array.isArray(M)?M:[M]).forEach(N=>{O.type==="DID_INIT_ITEM"?T(N(O.data)):setTimeout(()=>{T(N(O.data))},0)})})},E=w=>s.dispatch("SET_OPTIONS",{options:w}),y=w=>s.query("GET_ACTIVE_ITEM",w),R=w=>new Promise((O,M)=>{s.dispatch("REQUEST_ITEM_PREPARE",{query:w,success:N=>{O(N)},failure:N=>{M(N)}})}),P=(w,O={})=>new Promise((M,N)=>{b([{source:w,options:O}],{index:O.index}).then(H=>M(H&&H[0])).catch(N)}),C=w=>w.file&&w.id,v=(w,O)=>(typeof w=="object"&&!C(w)&&!O&&(O=w,w=void 0),s.dispatch("REMOVE_ITEM",{...O,query:w}),s.query("GET_ACTIVE_ITEM",w)===null),b=(...w)=>new Promise((O,M)=>{const N=[],H={};if(Yt(w[0]))N.push.apply(N,w[0]),Object.assign(H,w[1]||{});else{const G=w[w.length-1];typeof G=="object"&&!(G instanceof Blob)&&Object.assign(H,w.pop()),N.push(...w)}s.dispatch("ADD_ITEMS",{items:N,index:H.index,interactionMethod:me.API,success:O,failure:M})}),x=()=>s.query("GET_ACTIVE_ITEMS"),D=w=>new Promise((O,M)=>{s.dispatch("REQUEST_ITEM_PROCESSING",{query:w,success:N=>{O(N)},failure:N=>{M(N)}})}),L=(...w)=>{const O=Array.isArray(w[0])?w[0]:w,M=O.length?O:x();return Promise.all(M.map(R))},V=(...w)=>{const O=Array.isArray(w[0])?w[0]:w;if(!O.length){const M=x().filter(N=>!(N.status===F.IDLE&&N.origin===X.LOCAL)&&N.status!==F.PROCESSING&&N.status!==F.PROCESSING_COMPLETE&&N.status!==F.PROCESSING_REVERT_ERROR);return Promise.all(M.map(D))}return Promise.all(O.map(D))},A=(...w)=>{const O=Array.isArray(w[0])?w[0]:w;let M;typeof O[O.length-1]=="object"?M=O.pop():Array.isArray(w[0])&&(M=w[1]);const N=x();return O.length?O.map(G=>Ce(G)?N[G]?N[G].id:null:G).filter(G=>G).map(G=>v(G,M)):Promise.all(N.map(G=>v(G,M)))},U={...Kt(),...u,...nl(s,i),setOptions:E,addFile:P,addFiles:b,getFile:y,processFile:D,prepareFile:R,removeFile:v,moveFile:(w,O)=>s.dispatch("MOVE_ITEM",{query:w,index:O}),getFiles:x,processFiles:V,removeFiles:A,prepareFiles:L,sort:w=>s.dispatch("SORT",{compare:w}),browse:()=>{var w=h.element.querySelector("input[type=file]");w&&w.click()},destroy:()=>{U.fire("destroy",h.element),s.dispatch("ABORT_ALL"),h._destroy(),window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",n),s.dispatch("DID_DESTROY")},insertBefore:w=>ms(h.element,w),insertAfter:w=>gs(h.element,w),appendTo:w=>w.appendChild(h.element),replaceElement:w=>{ms(h.element,w),w.parentNode.removeChild(w),e=w},restoreElement:()=>{e&&(gs(e,h.element),h.element.parentNode.removeChild(h.element),e=null)},isAttachedTo:w=>h.element===w||e===w,element:{get:()=>h.element},status:{get:()=>s.query("GET_STATUS")}};return s.dispatch("DID_INIT"),Pe(U)},Er=(t={})=>{const e={};return k(Gt(),(s,n)=>{e[s]=n[0]}),th({...e,...t})},ih=t=>t.charAt(0).toLowerCase()+t.slice(1),sh=t=>gr(t.replace(/^data-/,"")),Ir=(t,e)=>{k(e,(i,s)=>{k(t,(n,r)=>{const o=new RegExp(i);if(!o.test(n)||(delete t[n],s===!1))return;if(te(s)){t[s]=r;return}const l=s.group;K(s)&&!t[l]&&(t[l]={}),t[l][ih(n.replace(o,""))]=r}),s.mapping&&Ir(t[s.group],s.mapping)})},nh=(t,e={})=>{const i=[];k(t.attributes,n=>{i.push(t.attributes[n])});const s=i.filter(n=>n.name).reduce((n,r)=>{const o=j(t,r.name);return n[sh(r.name)]=o===r.name?!0:o,n},{});return Ir(s,e),s},rh=(t,e={})=>{const i={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};He("SET_ATTRIBUTE_TO_OPTION_MAP",i);const s={...e},n=nh(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,i);Object.keys(n).forEach(o=>{K(n[o])?(K(s[o])||(s[o]={}),Object.assign(s[o],n[o])):s[o]=n[o]}),s.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(o=>({source:o.value,options:{type:o.dataset.type}})));const r=Er(s);return t.files&&Array.from(t.files).forEach(o=>{r.addFile(o)}),r.replaceElement(t),r},oh=(...t)=>_a(t[0])?rh(...t):Er(...t),ah=["fire","_read","_write"],Zs=t=>{const e={};return zn(t,e,ah),e},lh=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(i,s)=>e[s]),ch=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),i=URL.createObjectURL(e),s=new Worker(i);return{transfer:(n,r)=>{},post:(n,r,o)=>{const a=Ui();s.onmessage=l=>{l.data.id===a&&r(l.data.message)},s.postMessage({id:a,message:n},o)},terminate:()=>{s.terminate(),URL.revokeObjectURL(i)}}},dh=t=>new Promise((e,i)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=n=>{i(n)},s.src=t}),Tr=(t,e)=>{const i=t.slice(0,t.size,t.type);return i.lastModifiedDate=t.lastModifiedDate,i.name=e,i},hh=t=>Tr(t,t.name),Ys=[],uh=t=>{if(Ys.includes(t))return;Ys.push(t);const e=t({addFilter:hl,utils:{Type:S,forin:k,isString:te,isFile:Ue,toNaturalFileSize:Jn,replaceInString:lh,getExtensionFromFilename:Qt,getFilenameWithoutExtension:jn,guesstimateMimeType:dr,getFileFromBlob:Xe,getFilenameFromURL:gt,createRoute:ie,createWorker:ch,createView:Y,createItemAPI:ne,loadImage:dh,copyFile:hh,renameFile:Tr,createBlob:Zn,applyFilterChain:_e,text:W,getNumericAspectRatioFromString:kn},views:{fileActionButton:Qn}});ul(e.options)},ph=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",fh=()=>"Promise"in window,mh=()=>"slice"in Blob.prototype,gh=()=>"URL"in window&&"createObjectURL"in window.URL,_h=()=>"visibilityState"in document,Eh=()=>"performance"in window,Ih=()=>"supports"in(window.CSS||{}),Th=()=>/MSIE|Trident/.test(window.navigator.userAgent),Ai=(()=>{const t=Nn()&&!ph()&&_h()&&fh()&&mh()&&gh()&&Eh()&&(Ih()||Th());return()=>t})(),Ae={apps:[]},yh="filepond",ke=()=>{};let yr={},Rr={},Sr={},Pi={},Ct=ke,Mt=ke,bi=ke,Di=ke,zt=ke,Li=ke,Vt=ke;if(Ai()){ka(()=>{Ae.apps.forEach(i=>i._read())},i=>{Ae.apps.forEach(s=>s._write(i))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Ai,create:Ct,destroy:Mt,parse:bi,find:Di,registerPlugin:zt,setOptions:Vt}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>k(Gt(),(i,s)=>{Pi[i]=s[1]});yr={...qn},Sr={...X},Rr={...F},Pi={},e(),Ct=(...i)=>{const s=oh(...i);return s.on("destroy",Mt),Ae.apps.push(s),Zs(s)},Mt=i=>{const s=Ae.apps.findIndex(n=>n.isAttachedTo(i));return s>=0?(Ae.apps.splice(s,1)[0].restoreElement(),!0):!1},bi=i=>Array.from(i.querySelectorAll(`.${yh}`)).filter(r=>!Ae.apps.find(o=>o.isAttachedTo(r))).map(r=>Ct(r)),Di=i=>{const s=Ae.apps.find(n=>n.isAttachedTo(i));return s?Zs(s):null},zt=(...i)=>{i.forEach(uh),e()},Li=()=>{const i={};return k(Gt(),(s,n)=>{i[s]=n[0]}),i},Vt=i=>(K(i)&&(Ae.apps.forEach(s=>{s.setOptions(i)}),pl(i)),Li())}const Rh=Object.freeze(Object.defineProperty({__proto__:null,get FileOrigin(){return Sr},get FileStatus(){return Rr},get OptionTypes(){return Pi},get Status(){return yr},get create(){return Ct},get destroy(){return Mt},get find(){return Di},get getOptions(){return Li},get parse(){return bi},get registerPlugin(){return zt},get setOptions(){return Vt},supported:Ai},Symbol.toStringTag,{value:"Module"}));/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Sh=t=>/^image/.test(t.type),Xs=(t,e)=>ut(t.x*e,t.y*e),js=(t,e)=>ut(t.x+e.x,t.y+e.y),wh=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:ut(t.x/e,t.y/e)},vt=(t,e,i)=>{const s=Math.cos(e),n=Math.sin(e),r=ut(t.x-i.x,t.y-i.y);return ut(i.x+s*r.x-n*r.y,i.y+n*r.x+s*r.y)},ut=(t=0,e=0)=>({x:t,y:e}),re=(t,e,i=1,s)=>{if(typeof t=="string")return parseFloat(t)*i;if(typeof t=="number")return t*(s?e[s]:Math.min(e.width,e.height))},vh=(t,e,i)=>{const s=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",r=t.borderColor||t.lineColor||"transparent",o=re(t.borderWidth||t.lineWidth,e,i),a=t.lineCap||"round",l=t.lineJoin||"round",c=typeof s=="string"?"":s.map(h=>re(h,e,i)).join(","),d=t.opacity||1;return{"stroke-linecap":a,"stroke-linejoin":l,"stroke-width":o||0,"stroke-dasharray":c,stroke:r,fill:n,opacity:d}},ue=t=>t!=null,Oh=(t,e,i=1)=>{let s=re(t.x,e,i,"width")||re(t.left,e,i,"width"),n=re(t.y,e,i,"height")||re(t.top,e,i,"height"),r=re(t.width,e,i,"width"),o=re(t.height,e,i,"height"),a=re(t.right,e,i,"width"),l=re(t.bottom,e,i,"height");return ue(n)||(ue(o)&&ue(l)?n=e.height-o-l:n=l),ue(s)||(ue(r)&&ue(a)?s=e.width-r-a:s=a),ue(r)||(ue(s)&&ue(a)?r=e.width-s-a:r=0),ue(o)||(ue(n)&&ue(l)?o=e.height-n-l:o=0),{x:s||0,y:n||0,width:r||0,height:o||0}},Ah=t=>t.map((e,i)=>`${i===0?"M":"L"} ${e.x} ${e.y}`).join(" "),Se=(t,e)=>Object.keys(e).forEach(i=>t.setAttribute(i,e[i])),Ph="http://www.w3.org/2000/svg",Ze=(t,e)=>{const i=document.createElementNS(Ph,t);return e&&Se(i,e),i},bh=t=>Se(t,{...t.rect,...t.styles}),Dh=t=>{const e=t.rect.x+t.rect.width*.5,i=t.rect.y+t.rect.height*.5,s=t.rect.width*.5,n=t.rect.height*.5;return Se(t,{cx:e,cy:i,rx:s,ry:n,...t.styles})},Lh={contain:"xMidYMid meet",cover:"xMidYMid slice"},Ch=(t,e)=>{Se(t,{...t.rect,...t.styles,preserveAspectRatio:Lh[e.fit]||"none"})},Mh={left:"start",center:"middle",right:"end"},Nh=(t,e,i,s)=>{const n=re(e.fontSize,i,s),r=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",a=Mh[e.textAlign]||"start";Se(t,{...t.rect,...t.styles,"stroke-width":0,"font-weight":o,"font-size":n,"font-family":r,"text-anchor":a}),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},xh=(t,e,i,s)=>{Se(t,{...t.rect,...t.styles,fill:"none"});const n=t.childNodes[0],r=t.childNodes[1],o=t.childNodes[2],a=t.rect,l={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Se(n,{x1:a.x,y1:a.y,x2:l.x,y2:l.y}),!e.lineDecoration)return;r.style.display="none",o.style.display="none";const c=wh({x:l.x-a.x,y:l.y-a.y}),d=re(.05,i,s);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const h=Xs(c,d),f=js(a,h),_=vt(a,2,f),u=vt(a,-2,f);Se(r,{style:"display:block;",d:`M${_.x},${_.y} L${a.x},${a.y} L${u.x},${u.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const h=Xs(c,-d),f=js(l,h),_=vt(l,2,f),u=vt(l,-2,f);Se(o,{style:"display:block;",d:`M${_.x},${_.y} L${l.x},${l.y} L${u.x},${u.y}`})}},Fh=(t,e,i,s)=>{Se(t,{...t.styles,fill:"none",d:Ah(e.points.map(n=>({x:re(n.x,i,s,"width"),y:re(n.y,i,s,"height")})))})},Ot=t=>e=>Ze(t,{id:e.id}),Gh=t=>{const e=Ze("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},Bh=t=>{const e=Ze("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),i=Ze("line");e.appendChild(i);const s=Ze("path");e.appendChild(s);const n=Ze("path");return e.appendChild(n),e},Uh={image:Gh,rect:Ot("rect"),ellipse:Ot("ellipse"),text:Ot("text"),path:Ot("path"),line:Bh},zh={rect:bh,ellipse:Dh,image:Ch,text:Nh,path:Fh,line:xh},Vh=(t,e)=>Uh[t](e),Hh=(t,e,i,s,n)=>{e!=="path"&&(t.rect=Oh(i,s,n)),t.styles=vh(i,s,n),zh[e](t,i,s,n)},kh=["x","y","left","top","right","bottom","width","height"],qh=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,$h=t=>{const[e,i]=t,s=i.points?{}:kh.reduce((n,r)=>(n[r]=qh(i[r]),n),{});return[e,{zIndex:0,...i,...s}]},Wh=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,Zh=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:i})=>{if(!i.dirty)return;const{crop:s,resize:n,markup:r}=i,o=i.width,a=i.height;let l=s.width,c=s.height;if(n){const{size:_}=n;let u=_&&_.width,m=_&&_.height;const g=n.mode,T=n.upscale;u&&!m&&(m=u),m&&!u&&(u=m);const p=l<u&&c<m;if(!p||p&&T){let E=u/l,y=m/c;if(g==="force")l=u,c=m;else{let R;g==="cover"?R=Math.max(E,y):g==="contain"&&(R=Math.min(E,y)),l=l*R,c=c*R}}}const d={width:o,height:a};e.element.setAttribute("width",d.width),e.element.setAttribute("height",d.height);const h=Math.min(o/l,a/c);e.element.innerHTML="";const f=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");r.filter(f).map($h).sort(Wh).forEach(_=>{const[u,m]=_,g=Vh(u,m);Hh(g,u,m,d,h),e.element.appendChild(g)})}}),ct=(t,e)=>({x:t,y:e}),Yh=(t,e)=>t.x*e.x+t.y*e.y,Ks=(t,e)=>ct(t.x-e.x,t.y-e.y),Xh=(t,e)=>Yh(Ks(t,e),Ks(t,e)),Qs=(t,e)=>Math.sqrt(Xh(t,e)),Js=(t,e)=>{const i=t,s=1.5707963267948966,n=e,r=1.5707963267948966-e,o=Math.sin(s),a=Math.sin(n),l=Math.sin(r),c=Math.cos(r),d=i/o,h=d*a,f=d*l;return ct(c*h,c*f)},jh=(t,e)=>{const i=t.width,s=t.height,n=Js(i,e),r=Js(s,e),o=ct(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),a=ct(t.x+t.width+Math.abs(r.y),t.y+Math.abs(r.x)),l=ct(t.x-Math.abs(r.y),t.y+t.height-Math.abs(r.x));return{width:Qs(o,a),height:Qs(o,l)}},Kh=(t,e,i=1)=>{const s=t.height/t.width;let n=1,r=e,o=1,a=s;a>r&&(a=r,o=a/s);const l=Math.max(n/o,r/a),c=t.width/(i*l*o),d=c*e;return{width:c,height:d}},wr=(t,e,i,s)=>{const n=s.x>.5?1-s.x:s.x,r=s.y>.5?1-s.y:s.y,o=n*2*t.width,a=r*2*t.height,l=jh(e,i);return Math.max(l.width/o,l.height/a)},vr=(t,e)=>{let i=t.width,s=i*e;s>t.height&&(s=t.height,i=s/e);const n=(t.width-i)*.5,r=(t.height-s)*.5;return{x:n,y:r,width:i,height:s}},Qh=(t,e={})=>{let{zoom:i,rotation:s,center:n,aspectRatio:r}=e;r||(r=t.height/t.width);const o=Kh(t,r,i),a={width:o.width,height:o.height},l=typeof e.scaleToFit>"u"||e.scaleToFit,c=wr(t,vr(a,r),s,l?n:{x:.5,y:.5}),d=i*c;return{widthFloat:o.width/d,heightFloat:o.height/d,width:Math.round(o.width/d),height:Math.round(o.height/d)}},Re={type:"spring",stiffness:.5,damping:.45,mass:10},Jh=t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:i})=>{e.appendChild(i.image)}}),eu=t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Re,originY:Re,scaleX:Re,scaleY:Re,translateX:Re,translateY:Re,rotateZ:Re}},create:({root:e,props:i})=>{i.width=i.image.width,i.height=i.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(Jh(t),{image:i.image}))},write:({root:e,props:i})=>{const{flip:s}=i.crop,{bitmap:n}=e.ref;n.scaleX=s.horizontal?-1:1,n.scaleY=s.vertical?-1:1}}),tu=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:i}){i.background&&(e.element.style.backgroundColor=i.background)},create:({root:e,props:i})=>{e.ref.image=e.appendChildView(e.createChildView(eu(t),Object.assign({},i))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(Zh(t),Object.assign({},i))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const s=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");s!==null&&(s==="grid"?e.element.dataset.transparencyIndicator=s:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:i,shouldOptimize:s})=>{const{crop:n,markup:r,resize:o,dirty:a,width:l,height:c}=i;e.ref.image.crop=n;const d={width:l,height:c,center:{x:l*.5,y:c*.5}},h={width:e.ref.image.width,height:e.ref.image.height},f={x:n.center.x*h.width,y:n.center.y*h.height},_={x:d.center.x-h.width*n.center.x,y:d.center.y-h.height*n.center.y},u=Math.PI*2+n.rotation%(Math.PI*2),m=n.aspectRatio||h.height/h.width,g=typeof n.scaleToFit>"u"||n.scaleToFit,T=wr(h,vr(d,m),u,g?n.center:{x:.5,y:.5}),p=n.zoom*T;r&&r.length?(e.ref.createMarkup(),e.ref.markup.width=l,e.ref.markup.height=c,e.ref.markup.resize=o,e.ref.markup.dirty=a,e.ref.markup.markup=r,e.ref.markup.crop=Qh(h,n)):e.ref.markup&&e.ref.destroyMarkup();const E=e.ref.image;if(s){E.originX=null,E.originY=null,E.translateX=null,E.translateY=null,E.rotateZ=null,E.scaleX=null,E.scaleY=null;return}E.originX=f.x,E.originY=f.y,E.translateX=_.x,E.translateY=_.y,E.rotateZ=u,E.scaleX=p,E.scaleY=p}}),iu=t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Re,scaleY:Re,translateY:Re,opacity:{type:"tween",duration:400}}},create:({root:e,props:i})=>{e.ref.clip=e.appendChildView(e.createChildView(tu(t),{id:i.id,image:i.image,crop:i.crop,markup:i.markup,resize:i.resize,dirty:i.dirty,background:i.background}))},write:({root:e,props:i,shouldOptimize:s})=>{const{clip:n}=e.ref,{image:r,crop:o,markup:a,resize:l,dirty:c}=i;if(n.crop=o,n.markup=a,n.resize=l,n.dirty=c,n.opacity=s?0:1,s||e.rect.element.hidden)return;const d=r.height/r.width;let h=o.aspectRatio||d;const f=e.rect.inner.width,_=e.rect.inner.height;let u=e.query("GET_IMAGE_PREVIEW_HEIGHT");const m=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),g=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),T=e.query("GET_PANEL_ASPECT_RATIO"),p=e.query("GET_ALLOW_MULTIPLE");T&&!p&&(u=f*T,h=T);let E=u!==null?u:Math.max(m,Math.min(f*h,g)),y=E/h;y>f&&(y=f,E=y*h),E>_&&(E=_,y=_/h),n.width=y,n.height=E}});let su=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,en=0;const nu=t=>t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:i})=>{let s=su;if(document.querySelector("base")){const n=new URL(window.location.href.replace(window.location.hash,"")).href;s=s.replace(/url\(\#/g,"url("+n+"#")}en++,e.element.classList.add(`filepond--image-preview-overlay-${i.status}`),e.element.innerHTML=s.replace(/__UID__/g,en)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),ru=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then(e=>{self.postMessage({id:t.data.id,message:e},[e])})}},ou=function(){self.onmessage=t=>{const e=t.data.message.imageData,i=t.data.message.colorMatrix,s=e.data,n=s.length,r=i[0],o=i[1],a=i[2],l=i[3],c=i[4],d=i[5],h=i[6],f=i[7],_=i[8],u=i[9],m=i[10],g=i[11],T=i[12],p=i[13],E=i[14],y=i[15],R=i[16],P=i[17],C=i[18],v=i[19];let b=0,x=0,D=0,L=0,V=0;for(;b<n;b+=4)x=s[b]/255,D=s[b+1]/255,L=s[b+2]/255,V=s[b+3]/255,s[b]=Math.max(0,Math.min((x*r+D*o+L*a+V*l+c)*255,255)),s[b+1]=Math.max(0,Math.min((x*d+D*h+L*f+V*_+u)*255,255)),s[b+2]=Math.max(0,Math.min((x*m+D*g+L*T+V*p+E)*255,255)),s[b+3]=Math.max(0,Math.min((x*y+D*R+L*P+V*C+v)*255,255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},au=(t,e)=>{let i=new Image;i.onload=()=>{const s=i.naturalWidth,n=i.naturalHeight;i=null,e(s,n)},i.src=t},lu={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},cu=(t,e,i,s)=>{s!==-1&&t.transform.apply(t,lu[s](e,i))},du=(t,e,i,s)=>{e=Math.round(e),i=Math.round(i);const n=document.createElement("canvas");n.width=e,n.height=i;const r=n.getContext("2d");return s>=5&&s<=8&&([e,i]=[i,e]),cu(r,e,i,s),r.drawImage(t,0,0,e,i),n},Or=t=>/^image/.test(t.type)&&!/svg/.test(t.type),hu=10,uu=10,pu=t=>{const e=Math.min(hu/t.width,uu/t.height),i=document.createElement("canvas"),s=i.getContext("2d"),n=i.width=Math.ceil(t.width*e),r=i.height=Math.ceil(t.height*e);s.drawImage(t,0,0,n,r);let o=null;try{o=s.getImageData(0,0,n,r).data}catch{return null}const a=o.length;let l=0,c=0,d=0,h=0;for(;h<a;h+=4)l+=o[h]*o[h],c+=o[h+1]*o[h+1],d+=o[h+2]*o[h+2];return l=hi(l,a),c=hi(c,a),d=hi(d,a),{r:l,g:c,b:d}},hi=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),fu=(t,e)=>(e=e||document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e),mu=t=>{let e;try{e=new ImageData(t.width,t.height)}catch{e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},gu=t=>new Promise((e,i)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>{e(s)},s.onerror=n=>{i(n)},s.src=t}),_u=t=>{const e=nu(t),i=iu(t),{createWorker:s}=t.utils,n=(p,E,y)=>new Promise(R=>{p.ref.imageData||(p.ref.imageData=y.getContext("2d").getImageData(0,0,y.width,y.height));const P=mu(p.ref.imageData);if(!E||E.length!==20)return y.getContext("2d").putImageData(P,0,0),R();const C=s(ou);C.post({imageData:P,colorMatrix:E},v=>{y.getContext("2d").putImageData(v,0,0),C.terminate(),R()},[P.data.buffer])}),r=(p,E)=>{p.removeChildView(E),E.image.width=1,E.image.height=1,E._destroy()},o=({root:p})=>{const E=p.ref.images.shift();return E.opacity=0,E.translateY=-15,p.ref.imageViewBin.push(E),E},a=({root:p,props:E,image:y})=>{const R=E.id,P=p.query("GET_ITEM",{id:R});if(!P)return;const C=P.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},v=p.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let b,x,D=!1;p.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(b=P.getMetadata("markup")||[],x=P.getMetadata("resize"),D=!0);const L=p.appendChildView(p.createChildView(i,{id:R,image:y,crop:C,resize:x,markup:b,dirty:D,background:v,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),p.childViews.length);p.ref.images.push(L),L.opacity=1,L.scaleX=1,L.scaleY=1,L.translateY=0,setTimeout(()=>{p.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:R})},250)},l=({root:p,props:E})=>{const y=p.query("GET_ITEM",{id:E.id});if(!y)return;const R=p.ref.images[p.ref.images.length-1];R.crop=y.getMetadata("crop"),R.background=p.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),p.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(R.dirty=!0,R.resize=y.getMetadata("resize"),R.markup=y.getMetadata("markup"))},c=({root:p,props:E,action:y})=>{if(!/crop|filter|markup|resize/.test(y.change.key)||!p.ref.images.length)return;const R=p.query("GET_ITEM",{id:E.id});if(R){if(/filter/.test(y.change.key)){const P=p.ref.images[p.ref.images.length-1];n(p,y.change.value,P.image);return}if(/crop|markup|resize/.test(y.change.key)){const P=R.getMetadata("crop"),C=p.ref.images[p.ref.images.length-1];if(P&&P.aspectRatio&&C.crop&&C.crop.aspectRatio&&Math.abs(P.aspectRatio-C.crop.aspectRatio)>1e-5){const v=o({root:p});a({root:p,props:E,image:fu(v.image)})}else l({root:p,props:E})}}},d=p=>{const y=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),R=y?parseInt(y[1]):null;return R!==null&&R<=58?!1:"createImageBitmap"in window&&Or(p)},h=({root:p,props:E})=>{const{id:y}=E,R=p.query("GET_ITEM",y);if(!R)return;const P=URL.createObjectURL(R.file);au(P,(C,v)=>{p.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:y,width:C,height:v})})},f=({root:p,props:E})=>{const{id:y}=E,R=p.query("GET_ITEM",y);if(!R)return;const P=URL.createObjectURL(R.file),C=()=>{gu(P).then(v)},v=b=>{URL.revokeObjectURL(P);const D=(R.getMetadata("exif")||{}).orientation||-1;let{width:L,height:V}=b;if(!L||!V)return;D>=5&&D<=8&&([L,V]=[V,L]);const A=Math.max(1,window.devicePixelRatio*.75),w=p.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*A,O=V/L,M=p.rect.element.width,N=p.rect.element.height;let H=M,G=H*O;O>1?(H=Math.min(L,M*w),G=H*O):(G=Math.min(V,N*w),H=G/O);const be=du(b,H,G,D),Je=()=>{const ti=p.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?pu(data):null;R.setMetadata("color",ti,!0),"close"in b&&b.close(),p.ref.overlayShadow.opacity=1,a({root:p,props:E,image:be})},ge=R.getMetadata("filter");ge?n(p,ge,be).then(Je):Je()};if(d(R.file)){const b=s(ru);b.post({file:R.file},x=>{if(b.terminate(),!x){C();return}v(x)})}else C()},_=({root:p})=>{const E=p.ref.images[p.ref.images.length-1];E.translateY=0,E.scaleX=1,E.scaleY=1,E.opacity=1},u=({root:p})=>{p.ref.overlayShadow.opacity=1,p.ref.overlayError.opacity=0,p.ref.overlaySuccess.opacity=0},m=({root:p})=>{p.ref.overlayShadow.opacity=.25,p.ref.overlayError.opacity=1},g=({root:p})=>{p.ref.overlayShadow.opacity=.25,p.ref.overlaySuccess.opacity=1},T=({root:p})=>{p.ref.images=[],p.ref.imageData=null,p.ref.imageViewBin=[],p.ref.overlayShadow=p.appendChildView(p.createChildView(e,{opacity:0,status:"idle"})),p.ref.overlaySuccess=p.appendChildView(p.createChildView(e,{opacity:0,status:"success"})),p.ref.overlayError=p.appendChildView(p.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:T,styles:["height"],apis:["height"],destroy:({root:p})=>{p.ref.images.forEach(E=>{E.image.width=1,E.image.height=1})},didWriteView:({root:p})=>{p.ref.images.forEach(E=>{E.dirty=!1})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:_,DID_IMAGE_PREVIEW_CONTAINER_CREATE:h,DID_FINISH_CALCULATE_PREVIEWSIZE:f,DID_UPDATE_ITEM_METADATA:c,DID_THROW_ITEM_LOAD_ERROR:m,DID_THROW_ITEM_PROCESSING_ERROR:m,DID_THROW_ITEM_INVALID:m,DID_COMPLETE_ITEM_PROCESSING:g,DID_START_ITEM_PROCESSING:u,DID_REVERT_ITEM_PROCESSING:u},({root:p})=>{const E=p.ref.imageViewBin.filter(y=>y.opacity===0);p.ref.imageViewBin=p.ref.imageViewBin.filter(y=>y.opacity>0),E.forEach(y=>r(p,y)),E.length=0})})},Ar=t=>{const{addFilter:e,utils:i}=t,{Type:s,createRoute:n,isFile:r}=i,o=_u(t);return e("CREATE_VIEW",a=>{const{is:l,view:c,query:d}=a;if(!l("file")||!d("GET_ALLOW_IMAGE_PREVIEW"))return;const h=({root:g,props:T})=>{const{id:p}=T,E=d("GET_ITEM",p);if(!E||!r(E.file)||E.archived)return;const y=E.file;if(!Sh(y)||!d("GET_IMAGE_PREVIEW_FILTER_ITEM")(E))return;const R="createImageBitmap"in(window||{}),P=d("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!R&&P&&y.size>P)return;g.ref.imagePreview=c.appendChildView(c.createChildView(o,{id:p}));const C=g.query("GET_IMAGE_PREVIEW_HEIGHT");C&&g.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:C});const v=!R&&y.size>d("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");g.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:p},v)},f=(g,T)=>{if(!g.ref.imagePreview)return;let{id:p}=T;const E=g.query("GET_ITEM",{id:p});if(!E)return;const y=g.query("GET_PANEL_ASPECT_RATIO"),R=g.query("GET_ITEM_PANEL_ASPECT_RATIO"),P=g.query("GET_IMAGE_PREVIEW_HEIGHT");if(y||R||P)return;let{imageWidth:C,imageHeight:v}=g.ref;if(!C||!v)return;const b=g.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),x=g.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),L=(E.getMetadata("exif")||{}).orientation||-1;if(L>=5&&L<=8&&([C,v]=[v,C]),!Or(E.file)||g.query("GET_IMAGE_PREVIEW_UPSCALE")){const M=2048/C;C*=M,v*=M}const V=v/C,A=(E.getMetadata("crop")||{}).aspectRatio||V;let U=Math.max(b,Math.min(v,x));const w=g.rect.element.width,O=Math.min(w*A,U);g.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:O})},_=({root:g})=>{g.ref.shouldRescale=!0},u=({root:g,action:T})=>{T.change.key==="crop"&&(g.ref.shouldRescale=!0)},m=({root:g,action:T})=>{g.ref.imageWidth=T.width,g.ref.imageHeight=T.height,g.ref.shouldRescale=!0,g.ref.shouldDrawPreview=!0,g.dispatch("KICK")};c.registerWriter(n({DID_RESIZE_ROOT:_,DID_STOP_RESIZE:_,DID_LOAD_ITEM:h,DID_IMAGE_PREVIEW_CALCULATE_SIZE:m,DID_UPDATE_ITEM_METADATA:u},({root:g,props:T})=>{g.ref.imagePreview&&(g.rect.element.hidden||(g.ref.shouldRescale&&(f(g,T),g.ref.shouldRescale=!1),g.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{g.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:T.id})})}),g.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,s.BOOLEAN],imagePreviewFilterItem:[()=>!0,s.FUNCTION],imagePreviewHeight:[null,s.INT],imagePreviewMinHeight:[44,s.INT],imagePreviewMaxHeight:[256,s.INT],imagePreviewMaxFileSize:[null,s.INT],imagePreviewZoomFactor:[2,s.INT],imagePreviewUpscale:[!1,s.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,s.INT],imagePreviewTransparencyIndicator:[null,s.STRING],imagePreviewCalculateAverageImageColor:[!1,s.BOOLEAN],imagePreviewMarkupShow:[!0,s.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,s.FUNCTION]}}},Eu=typeof window<"u"&&typeof window.document<"u";Eu&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ar}));/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function rt(t,e,i){const s=document.createElement(e);return t&&(s.className=t),i&&i.appendChild(s),s}function Iu(t,e,i){let s=`translate3d(${t}px,0px,0)`;return i!==void 0&&(s+=` scale3d(${i},${i},1)`),s}function Ci(t,e,i){t.style.width=typeof e=="number"?`${e}px`:e,t.style.height=typeof i=="number"?`${i}px`:i}const pe={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Tu(t){return"button"in t&&t.button===1||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey}function ot(t,e,i=document){let s=[];if(t instanceof Element)s=[t];else if(t instanceof NodeList||Array.isArray(t))s=Array.from(t);else{const n=typeof t=="string"?t:e;n&&(s=Array.from(i.querySelectorAll(n)))}return s}function yu(t){return typeof t=="function"&&t.prototype&&t.prototype.goTo}function tn(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}let Ru=class{constructor(e,i){this.type=e,this.defaultPrevented=!1,i&&Object.assign(this,i)}preventDefault(){this.defaultPrevented=!0}},Su=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,i,s=100){var n,r,o;this._filters[e]||(this._filters[e]=[]),(n=this._filters[e])===null||n===void 0||n.push({fn:i,priority:s}),(r=this._filters[e])===null||r===void 0||r.sort((a,l)=>a.priority-l.priority),(o=this.pswp)===null||o===void 0||o.addFilter(e,i,s)}removeFilter(e,i){this._filters[e]&&(this._filters[e]=this._filters[e].filter(s=>s.fn!==i)),this.pswp&&this.pswp.removeFilter(e,i)}applyFilters(e,...i){var s;return(s=this._filters[e])===null||s===void 0||s.forEach(n=>{i[0]=n.fn.apply(this,i)}),i[0]}on(e,i){var s,n;this._listeners[e]||(this._listeners[e]=[]),(s=this._listeners[e])===null||s===void 0||s.push(i),(n=this.pswp)===null||n===void 0||n.on(e,i)}off(e,i){var s;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(n=>i!==n)),(s=this.pswp)===null||s===void 0||s.off(e,i)}dispatch(e,i){var s;if(this.pswp)return this.pswp.dispatch(e,i);const n=new Ru(e,i);return(s=this._listeners[e])===null||s===void 0||s.forEach(r=>{r.call(this,n)}),n}},wu=class{constructor(e,i){if(this.element=rt("pswp__img pswp__img--placeholder",e?"img":"div",i),e){const s=this.element;s.decoding="async",s.alt="",s.src=e,s.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,i){this.element&&(this.element.tagName==="IMG"?(Ci(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=Iu(0,0,e/250)):Ci(this.element,e,i))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}},vu=class{constructor(e,i,s){this.instance=i,this.data=e,this.index=s,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=pe.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,i){if(this.slide&&this.usePlaceholder())if(this.placeholder){const s=this.placeholder.element;s&&!s.parentElement&&this.slide.container.prepend(s)}else{const s=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new wu(s,this.slide.container)}this.element&&!i||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=rt("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=rt("pswp__content","div"),this.element.innerHTML=this.data.html||""),i&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var i,s;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const n=this.element;this.updateSrcsetSizes(),this.data.srcset&&(n.srcset=this.data.srcset),n.src=(i=this.data.src)!==null&&i!==void 0?i:"",n.alt=(s=this.data.alt)!==null&&s!==void 0?s:"",this.state=pe.LOADING,n.complete?this.onLoaded():(n.onload=()=>{this.onLoaded()},n.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=pe.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===pe.LOADED||this.state===pe.ERROR)&&this.removePlaceholder())}onError(){this.state=pe.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===pe.LOADING,this)}isError(){return this.state===pe.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,i){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,i),!this.instance.dispatch("contentResize",{content:this,width:e,height:i}).defaultPrevented&&(Ci(this.element,e,i),this.isImageContent()&&!this.isError()))){const s=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=i,s?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:i,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==pe.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,i=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||i>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=i+"px",e.dataset.largestUsedSize=String(i))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,i;let s=rt("pswp__error-msg","div");s.innerText=(e=(i=this.instance.options)===null||i===void 0?void 0:i.errorMsg)!==null&&e!==void 0?e:"",s=this.instance.applyFilters("contentErrorElement",s,this),this.element=rt("pswp__content pswp__error-msg-container","div"),this.element.appendChild(s),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===pe.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||tn())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!tn()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===pe.LOADED||this.state===pe.ERROR)&&this.removePlaceholder()))}};function Ou(t,e){if(t.getViewportSizeFn){const i=t.getViewportSizeFn(t,e);if(i)return i}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function At(t,e,i,s,n){let r=0;if(e.paddingFn)r=e.paddingFn(i,s,n)[t];else if(e.padding)r=e.padding[t];else{const o="padding"+t[0].toUpperCase()+t.slice(1);e[o]&&(r=e[o])}return Number(r)||0}function Au(t,e,i,s){return{x:e.x-At("left",t,e,i,s)-At("right",t,e,i,s),y:e.y-At("top",t,e,i,s)-At("bottom",t,e,i,s)}}const sn=4e3;let Pu=class{constructor(e,i,s,n){this.pswp=n,this.options=e,this.itemData=i,this.index=s,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,i,s){const n={x:e,y:i};this.elementSize=n,this.panAreaSize=s;const r=s.x/n.x,o=s.y/n.y;this.fit=Math.min(1,r<o?r:o),this.fill=Math.min(1,r>o?r:o),this.vFill=Math.min(1,o),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const i=e+"ZoomLevel",s=this.options[i];if(s)return typeof s=="function"?s(this):s==="fill"?this.fill:s==="fit"?this.fit:Number(s)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>sn&&(e=sn/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}};function Pr(t,e,i){const s=e.createContentFromData(t,i);let n;const{options:r}=e;if(r){n=new Pu(r,t,-1);let o;e.pswp?o=e.pswp.viewportSize:o=Ou(r,e);const a=Au(r,o,t,i);n.update(s.width,s.height,a)}return s.lazyLoad(),n&&s.setDisplayedSize(Math.ceil(s.width*n.initial),Math.ceil(s.height*n.initial)),s}function bu(t,e){const i=e.getItemData(t);if(!e.dispatch("lazyLoadSlide",{index:t,itemData:i}).defaultPrevented)return Pr(i,e,t)}let Du=class extends Su{getNumItems(){var e;let i=0;const s=(e=this.options)===null||e===void 0?void 0:e.dataSource;s&&"length"in s?i=s.length:s&&"gallery"in s&&(s.items||(s.items=this._getGalleryDOMElements(s.gallery)),s.items&&(i=s.items.length));const n=this.dispatch("numItems",{dataSource:s,numItems:i});return this.applyFilters("numItems",n.numItems,s)}createContentFromData(e,i){return new vu(e,this,i)}getItemData(e){var i;const s=(i=this.options)===null||i===void 0?void 0:i.dataSource;let n={};Array.isArray(s)?n=s[e]:s&&"gallery"in s&&(s.items||(s.items=this._getGalleryDOMElements(s.gallery)),n=s.items[e]);let r=n;r instanceof Element&&(r=this._domElementToItemData(r));const o=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",o.itemData,e)}_getGalleryDOMElements(e){var i,s;return(i=this.options)!==null&&i!==void 0&&i.children||(s=this.options)!==null&&s!==void 0&&s.childSelector?ot(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const i={element:e},s=e.tagName==="A"?e:e.querySelector("a");if(s){i.src=s.dataset.pswpSrc||s.href,s.dataset.pswpSrcset&&(i.srcset=s.dataset.pswpSrcset),i.width=s.dataset.pswpWidth?parseInt(s.dataset.pswpWidth,10):0,i.height=s.dataset.pswpHeight?parseInt(s.dataset.pswpHeight,10):0,i.w=i.width,i.h=i.height,s.dataset.pswpType&&(i.type=s.dataset.pswpType);const r=e.querySelector("img");if(r){var n;i.msrc=r.currentSrc||r.src,i.alt=(n=r.getAttribute("alt"))!==null&&n!==void 0?n:""}(s.dataset.pswpCropped||s.dataset.cropped)&&(i.thumbCropped=!0)}return this.applyFilters("domItemData",i,e,s)}lazyLoadData(e,i){return Pr(e,this,i)}};class Lu extends Du{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){ot(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Tu(e)||window.pswp)return;let i={x:e.clientX,y:e.clientY};!i.x&&!i.y&&(i=null);let s=this.getClickedIndex(e);s=this.applyFilters("clickedIndex",s,e,this);const n={gallery:e.currentTarget};s>=0&&(e.preventDefault(),this.loadAndOpen(s,n,i))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const i=e.target,n=ot(this.options.children,this.options.childSelector,e.currentTarget).findIndex(r=>r===i||r.contains(i));return n!==-1?n:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,i,s){if(window.pswp||!this.options)return!1;if(!i&&this.options.gallery&&this.options.children){const n=ot(this.options.gallery);n[0]&&(i={gallery:n[0]})}return this.options.index=e,this.options.initialPointerPos=s,this.shouldOpen=!0,this.preload(e,i),!0}preload(e,i){const{options:s}=this;i&&(s.dataSource=i);const n=[],r=typeof s.pswpModule;if(yu(s.pswpModule))n.push(Promise.resolve(s.pswpModule));else{if(r==="string")throw new Error("pswpModule as string is no longer supported");if(r==="function")n.push(s.pswpModule());else throw new Error("pswpModule is not valid")}typeof s.openPromise=="function"&&n.push(s.openPromise()),s.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=bu(e,this));const o=++this._uid;Promise.all(n).then(a=>{if(this.shouldOpen){const l=a[0];this._openPhotoswipe(l,o)}})}_openPhotoswipe(e,i){if(i!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const s=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=s,window.pswp=s,Object.keys(this._listeners).forEach(n=>{var r;(r=this._listeners[n])===null||r===void 0||r.forEach(o=>{s.on(n,o)})}),Object.keys(this._filters).forEach(n=>{var r;(r=this._filters[n])===null||r===void 0||r.forEach(o=>{s.addFilter(n,o.fn,o.priority)})}),this._preloadedContent&&(s.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),s.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),s.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},ot(this.options.gallery,this.options.gallerySelector).forEach(i=>{i.removeEventListener("click",this.onThumbnailsClick,!1)})}}/*!
  * PhotoSwipe 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function le(t,e,i){const s=document.createElement(e);return t&&(s.className=t),i&&i.appendChild(s),s}function Z(t,e){return t.x=e.x,t.y=e.y,e.id!==void 0&&(t.id=e.id),t}function br(t){t.x=Math.round(t.x),t.y=Math.round(t.y)}function Mi(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);return Math.sqrt(i*i+s*s)}function dt(t,e){return t.x===e.x&&t.y===e.y}function _t(t,e,i){return Math.min(Math.max(t,e),i)}function pt(t,e,i){let s=`translate3d(${t}px,${e||0}px,0)`;return i!==void 0&&(s+=` scale3d(${i},${i},1)`),s}function xe(t,e,i,s){t.style.transform=pt(e,i,s)}const Cu="cubic-bezier(.4,0,.22,1)";function Dr(t,e,i,s){t.style.transition=e?`${e} ${i}ms ${s||Cu}`:"none"}function Ni(t,e,i){t.style.width=typeof e=="number"?`${e}px`:e,t.style.height=typeof i=="number"?`${i}px`:i}function Mu(t){Dr(t)}function Nu(t){return"decode"in t?t.decode().catch(()=>{}):t.complete?Promise.resolve(t):new Promise((e,i)=>{t.onload=()=>e(t),t.onerror=i})}const fe={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function xu(t){return"button"in t&&t.button===1||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey}function Fu(t,e,i=document){let s=[];if(t instanceof Element)s=[t];else if(t instanceof NodeList||Array.isArray(t))s=Array.from(t);else{const n=typeof t=="string"?t:e;n&&(s=Array.from(i.querySelectorAll(n)))}return s}function nn(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}let Lr=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{Lr=!0}}))}catch{}class Gu{constructor(){this._pool=[]}add(e,i,s,n){this._toggleListener(e,i,s,n)}remove(e,i,s,n){this._toggleListener(e,i,s,n,!0)}removeAll(){this._pool.forEach(e=>{this._toggleListener(e.target,e.type,e.listener,e.passive,!0,!0)}),this._pool=[]}_toggleListener(e,i,s,n,r,o){if(!e)return;const a=r?"removeEventListener":"addEventListener";i.split(" ").forEach(c=>{if(c){o||(r?this._pool=this._pool.filter(h=>h.type!==c||h.listener!==s||h.target!==e):this._pool.push({target:e,type:c,listener:s,passive:n}));const d=Lr?{passive:n||!1}:!1;e[a](c,s,d)}})}}function Cr(t,e){if(t.getViewportSizeFn){const i=t.getViewportSizeFn(t,e);if(i)return i}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function at(t,e,i,s,n){let r=0;if(e.paddingFn)r=e.paddingFn(i,s,n)[t];else if(e.padding)r=e.padding[t];else{const o="padding"+t[0].toUpperCase()+t.slice(1);e[o]&&(r=e[o])}return Number(r)||0}function Mr(t,e,i,s){return{x:e.x-at("left",t,e,i,s)-at("right",t,e,i,s),y:e.y-at("top",t,e,i,s)-at("bottom",t,e,i,s)}}class Bu{constructor(e){this.slide=e,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}}update(e){this.currZoomLevel=e,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}_updateAxis(e){const{pswp:i}=this.slide,s=this.slide[e==="x"?"width":"height"]*this.currZoomLevel,r=at(e==="x"?"left":"top",i.options,i.viewportSize,this.slide.data,this.slide.index),o=this.slide.panAreaSize[e];this.center[e]=Math.round((o-s)/2)+r,this.max[e]=s>o?Math.round(o-s)+r:this.center[e],this.min[e]=s>o?r:this.center[e]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(e,i){return _t(i,this.max[e],this.min[e])}}const rn=4e3;class Nr{constructor(e,i,s,n){this.pswp=n,this.options=e,this.itemData=i,this.index=s,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,i,s){const n={x:e,y:i};this.elementSize=n,this.panAreaSize=s;const r=s.x/n.x,o=s.y/n.y;this.fit=Math.min(1,r<o?r:o),this.fill=Math.min(1,r>o?r:o),this.vFill=Math.min(1,o),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const i=e+"ZoomLevel",s=this.options[i];if(s)return typeof s=="function"?s(this):s==="fill"?this.fill:s==="fit"?this.fit:Number(s)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>rn&&(e=rn/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}class Uu{constructor(e,i,s){this.data=e,this.index=i,this.pswp=s,this.isActive=i===s.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!s.opener.isOpen,this.zoomLevels=new Nr(s.options,e,i,s),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:i}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=le("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new Bu(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(e){e&&!this.isActive?this.activate():!e&&this.isActive&&this.deactivate()}append(e){this.holderElement=e,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){const{pswp:e}=this;this.heavyAppended||!e.opener.isOpen||e.mainScroll.isShifted()||!this.isActive&&!1||this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this}))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel===this.zoomLevels.initial||!this.isActive?(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize()):(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y))}updateContentSize(e){const i=this.currentResolution||this.zoomLevels.initial;if(!i)return;const s=Math.round(this.width*i)||this.pswp.viewportSize.x,n=Math.round(this.height*i)||this.pswp.viewportSize.y;!this.sizeChanged(s,n)&&!e||this.content.setDisplayedSize(s,n)}sizeChanged(e,i){return e!==this.prevDisplayedWidth||i!==this.prevDisplayedHeight?(this.prevDisplayedWidth=e,this.prevDisplayedHeight=i,!0):!1}getPlaceholderElement(){var e;return(e=this.content.placeholder)===null||e===void 0?void 0:e.element}zoomTo(e,i,s,n){const{pswp:r}=this;if(!this.isZoomable()||r.mainScroll.isShifted())return;r.dispatch("beforeZoomTo",{destZoomLevel:e,centerPoint:i,transitionDuration:s}),r.animations.stopAllPan();const o=this.currZoomLevel;n||(e=_t(e,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(e),this.pan.x=this.calculateZoomToPanOffset("x",i,o),this.pan.y=this.calculateZoomToPanOffset("y",i,o),br(this.pan);const a=()=>{this._setResolution(e),this.applyCurrentZoomPan()};s?r.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:a,duration:s,easing:r.options.easing}):a()}toggleZoom(e){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,e,this.pswp.options.zoomAnimationDuration)}setZoomLevel(e){this.currZoomLevel=e,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(e,i,s){if(this.bounds.max[e]-this.bounds.min[e]===0)return this.bounds.center[e];i||(i=this.pswp.getViewportCenterPoint()),s||(s=this.zoomLevels.initial);const r=this.currZoomLevel/s;return this.bounds.correctPan(e,(this.pan[e]-i[e])*r+i[e])}panTo(e,i){this.pan.x=this.bounds.correctPan("x",e),this.pan.y=this.bounds.correctPan("y",i),this.applyCurrentZoomPan()}isPannable(){return!!this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return!!this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),Z(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_applyZoomTransform(e,i,s){s/=this.currentResolution||this.zoomLevels.initial,xe(this.container,e,i,s)}calculateSize(){const{pswp:e}=this;Z(this.panAreaSize,Mr(e.options,e.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),e.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){const e=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return pt(this.pan.x,this.pan.y,e)}_setResolution(e){e!==this.currentResolution&&(this.currentResolution=e,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}}const zu=.35,Vu=.6,Hu=.4,ku=.5;function qu(t,e){return t*e/(1-e)}class $u{constructor(e){this.gestures=e,this.pswp=e.pswp,this.startPan={x:0,y:0}}start(){this.pswp.currSlide&&Z(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){const{p1:e,prevP1:i,dragAxis:s}=this.gestures,{currSlide:n}=this.pswp;if(s==="y"&&this.pswp.options.closeOnVerticalDrag&&n&&n.currZoomLevel<=n.zoomLevels.fit&&!this.gestures.isMultitouch){const r=n.pan.y+(e.y-i.y);if(!this.pswp.dispatch("verticalDrag",{panY:r}).defaultPrevented){this._setPanWithFriction("y",r,Vu);const o=1-Math.abs(this._getVerticalDragRatio(n.pan.y));this.pswp.applyBgOpacity(o),n.applyCurrentZoomPan()}}else this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),n&&(br(n.pan),n.applyCurrentZoomPan()))}end(){const{velocity:e}=this.gestures,{mainScroll:i,currSlide:s}=this.pswp;let n=0;if(this.pswp.animations.stopAll(),i.isShifted()){const o=(i.x-i.getCurrSlideX())/this.pswp.viewportSize.x;e.x<-.5&&o<0||e.x<.1&&o<-.5?(n=1,e.x=Math.min(e.x,0)):(e.x>ku&&o>0||e.x>-.1&&o>.5)&&(n=-1,e.x=Math.max(e.x,0)),i.moveIndexBy(n,!0,e.x)}s&&s.currZoomLevel>s.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}_finishPanGestureForAxis(e){const{velocity:i}=this.gestures,{currSlide:s}=this.pswp;if(!s)return;const{pan:n,bounds:r}=s,o=n[e],a=this.pswp.bgOpacity<1&&e==="y",c=o+qu(i[e],.995);if(a){const u=this._getVerticalDragRatio(o),m=this._getVerticalDragRatio(c);if(u<0&&m<-.4||u>0&&m>Hu){this.pswp.close();return}}const d=r.correctPan(e,c);if(o===d)return;const h=d===c?1:.82,f=this.pswp.bgOpacity,_=d-o;this.pswp.animations.startSpring({name:"panGesture"+e,isPan:!0,start:o,end:d,velocity:i[e],dampingRatio:h,onUpdate:u=>{if(a&&this.pswp.bgOpacity<1){const m=1-(d-u)/_;this.pswp.applyBgOpacity(_t(f+(1-f)*m,0,1))}n[e]=Math.floor(u),s.applyCurrentZoomPan()}})}_panOrMoveMainScroll(e){const{p1:i,dragAxis:s,prevP1:n,isMultitouch:r}=this.gestures,{currSlide:o,mainScroll:a}=this.pswp,l=i[e]-n[e],c=a.x+l;if(!l||!o)return!1;if(e==="x"&&!o.isPannable()&&!r)return a.moveTo(c,!0),!0;const{bounds:d}=o,h=o.pan[e]+l;if(this.pswp.options.allowPanToNext&&s==="x"&&e==="x"&&!r){const f=a.getCurrSlideX(),_=a.x-f,u=l>0,m=!u;if(h>d.min[e]&&u){if(d.min[e]<=this.startPan[e])return a.moveTo(c,!0),!0;this._setPanWithFriction(e,h)}else if(h<d.max[e]&&m){if(this.startPan[e]<=d.max[e])return a.moveTo(c,!0),!0;this._setPanWithFriction(e,h)}else if(_!==0){if(_>0)return a.moveTo(Math.max(c,f),!0),!0;if(_<0)return a.moveTo(Math.min(c,f),!0),!0}else this._setPanWithFriction(e,h)}else e==="y"?!a.isShifted()&&d.min.y!==d.max.y&&this._setPanWithFriction(e,h):this._setPanWithFriction(e,h);return!1}_getVerticalDragRatio(e){var i,s;return(e-((i=(s=this.pswp.currSlide)===null||s===void 0?void 0:s.bounds.center.y)!==null&&i!==void 0?i:0))/(this.pswp.viewportSize.y/3)}_setPanWithFriction(e,i,s){const{currSlide:n}=this.pswp;if(!n)return;const{pan:r,bounds:o}=n;if(o.correctPan(e,i)!==i||s){const l=Math.round(i-r[e]);r[e]+=l*(s||zu)}else r[e]=i}}const Wu=.05,Zu=.15;function on(t,e,i){return t.x=(e.x+i.x)/2,t.y=(e.y+i.y)/2,t}class Yu{constructor(e){this.gestures=e,this._startPan={x:0,y:0},this._startZoomPoint={x:0,y:0},this._zoomPoint={x:0,y:0},this._wasOverFitZoomLevel=!1,this._startZoomLevel=1}start(){const{currSlide:e}=this.gestures.pswp;e&&(this._startZoomLevel=e.currZoomLevel,Z(this._startPan,e.pan)),this.gestures.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}change(){const{p1:e,startP1:i,p2:s,startP2:n,pswp:r}=this.gestures,{currSlide:o}=r;if(!o)return;const a=o.zoomLevels.min,l=o.zoomLevels.max;if(!o.isZoomable()||r.mainScroll.isShifted())return;on(this._startZoomPoint,i,n),on(this._zoomPoint,e,s);let c=1/Mi(i,n)*Mi(e,s)*this._startZoomLevel;if(c>o.zoomLevels.initial+o.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),c<a)if(r.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=o.zoomLevels.initial){const d=1-(a-c)/(a/1.2);r.dispatch("pinchClose",{bgOpacity:d}).defaultPrevented||r.applyBgOpacity(d)}else c=a-(a-c)*Zu;else c>l&&(c=l+(c-l)*Wu);o.pan.x=this._calculatePanForZoomLevel("x",c),o.pan.y=this._calculatePanForZoomLevel("y",c),o.setZoomLevel(c),o.applyCurrentZoomPan()}end(){const{pswp:e}=this.gestures,{currSlide:i}=e;(!i||i.currZoomLevel<i.zoomLevels.initial)&&!this._wasOverFitZoomLevel&&e.options.pinchToClose?e.close():this.correctZoomPan()}_calculatePanForZoomLevel(e,i){const s=i/this._startZoomLevel;return this._zoomPoint[e]-(this._startZoomPoint[e]-this._startPan[e])*s}correctZoomPan(e){const{pswp:i}=this.gestures,{currSlide:s}=i;if(!(s!=null&&s.isZoomable()))return;this._zoomPoint.x===0&&(e=!0);const n=s.currZoomLevel;let r,o=!0;n<s.zoomLevels.initial?r=s.zoomLevels.initial:n>s.zoomLevels.max?r=s.zoomLevels.max:(o=!1,r=n);const a=i.bgOpacity,l=i.bgOpacity<1,c=Z({x:0,y:0},s.pan);let d=Z({x:0,y:0},c);e&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=n,Z(this._startPan,c)),o&&(d={x:this._calculatePanForZoomLevel("x",r),y:this._calculatePanForZoomLevel("y",r)}),s.setZoomLevel(r),d={x:s.bounds.correctPan("x",d.x),y:s.bounds.correctPan("y",d.y)},s.setZoomLevel(n);const h=!dt(d,c);if(!h&&!o&&!l){s._setResolution(r),s.applyCurrentZoomPan();return}i.animations.stopAllPan(),i.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:f=>{if(f/=1e3,h||o){if(h&&(s.pan.x=c.x+(d.x-c.x)*f,s.pan.y=c.y+(d.y-c.y)*f),o){const _=n+(r-n)*f;s.setZoomLevel(_)}s.applyCurrentZoomPan()}l&&i.bgOpacity<1&&i.applyBgOpacity(_t(a+(1-a)*f,0,1))},onComplete:()=>{s._setResolution(r),s.applyCurrentZoomPan()}})}}function an(t){return!!t.target.closest(".pswp__container")}class Xu{constructor(e){this.gestures=e}click(e,i){const s=i.target.classList,n=s.contains("pswp__img"),r=s.contains("pswp__item")||s.contains("pswp__zoom-wrap");n?this._doClickOrTapAction("imageClick",e,i):r&&this._doClickOrTapAction("bgClick",e,i)}tap(e,i){an(i)&&this._doClickOrTapAction("tap",e,i)}doubleTap(e,i){an(i)&&this._doClickOrTapAction("doubleTap",e,i)}_doClickOrTapAction(e,i,s){var n;const{pswp:r}=this.gestures,{currSlide:o}=r,a=e+"Action",l=r.options[a];if(!r.dispatch(a,{point:i,originalEvent:s}).defaultPrevented){if(typeof l=="function"){l.call(r,i,s);return}switch(l){case"close":case"next":r[l]();break;case"zoom":o==null||o.toggleZoom(i);break;case"zoom-or-close":o!=null&&o.isZoomable()&&o.zoomLevels.secondary!==o.zoomLevels.initial?o.toggleZoom(i):r.options.clickToCloseNonZoomable&&r.close();break;case"toggle-controls":(n=this.gestures.pswp.element)===null||n===void 0||n.classList.toggle("pswp--ui-visible");break}}}}const ju=10,Ku=300,Qu=25;class Ju{constructor(e){this.pswp=e,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this._lastStartP1={x:0,y:0},this._intervalP1={x:0,y:0},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&navigator.maxTouchPoints>1,this._numActivePoints=0,this._intervalTime=0,this._velocityCalculated=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this._tapTimer=null,this.supportsTouch||(e.options.allowPanToNext=!1),this.drag=new $u(this),this.zoomLevels=new Yu(this),this.tapHandler=new Xu(this),e.on("bindEvents",()=>{e.events.add(e.scrollWrap,"click",this._onClick.bind(this)),this._pointerEventEnabled?this._bindEvents("pointer","down","up","cancel"):this._touchEventEnabled?(this._bindEvents("touch","start","end","cancel"),e.scrollWrap&&(e.scrollWrap.ontouchmove=()=>{},e.scrollWrap.ontouchend=()=>{})):this._bindEvents("mouse","down","up")})}_bindEvents(e,i,s,n){const{pswp:r}=this,{events:o}=r,a=n?e+n:"";o.add(r.scrollWrap,e+i,this.onPointerDown.bind(this)),o.add(window,e+"move",this.onPointerMove.bind(this)),o.add(window,e+s,this.onPointerUp.bind(this)),a&&o.add(r.scrollWrap,a,this.onPointerUp.bind(this))}onPointerDown(e){const i=e.type==="mousedown"||e.pointerType==="mouse";if(i&&e.button>0)return;const{pswp:s}=this;if(!s.opener.isOpen){e.preventDefault();return}s.dispatch("pointerDown",{originalEvent:e}).defaultPrevented||(i&&(s.mouseDetected(),this._preventPointerEventBehaviour(e,"down")),s.animations.stopAll(),this._updatePoints(e,"down"),this._numActivePoints===1&&(this.dragAxis=null,Z(this.startP1,this.p1)),this._numActivePoints>1?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1)}onPointerMove(e){this._preventPointerEventBehaviour(e,"move"),this._numActivePoints&&(this._updatePoints(e,"move"),!this.pswp.dispatch("pointerMove",{originalEvent:e}).defaultPrevented&&(this._numActivePoints===1&&!this.isDragging?(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,Z(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop())):this._numActivePoints>1&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop())))}_finishDrag(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(e){this._numActivePoints&&(this._updatePoints(e,"up"),!this.pswp.dispatch("pointerUp",{originalEvent:e}).defaultPrevented&&(this._numActivePoints===0&&(this._rafStopLoop(),this.isDragging?this._finishDrag():!this.isZooming&&!this.isMultitouch&&this._finishTap(e)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this._numActivePoints===1&&(this.dragAxis=null,this._updateStartPoints()))))}_rafRenderLoop(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?dt(this.p1,this.prevP1)||this.drag.change():(!dt(this.p1,this.prevP1)||!dt(this.p2,this.prevP2))&&this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}_updateVelocity(e){const i=Date.now(),s=i-this._intervalTime;s<50&&!e||(this.velocity.x=this._getVelocity("x",s),this.velocity.y=this._getVelocity("y",s),this._intervalTime=i,Z(this._intervalP1,this.p1),this._velocityCalculated=!0)}_finishTap(e){const{mainScroll:i}=this.pswp;if(i.isShifted()){i.moveIndexBy(0,!0);return}if(e.type.indexOf("cancel")>0)return;if(e.type==="mouseup"||e.pointerType==="mouse"){this.tapHandler.click(this.startP1,e);return}const s=this.pswp.options.doubleTapAction?Ku:0;this._tapTimer?(this._clearTapTimer(),Mi(this._lastStartP1,this.startP1)<Qu&&this.tapHandler.doubleTap(this.startP1,e)):(Z(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(()=>{this.tapHandler.tap(this.startP1,e),this._clearTapTimer()},s))}_clearTapTimer(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}_getVelocity(e,i){const s=this.p1[e]-this._intervalP1[e];return Math.abs(s)>1&&i>5?s/i:0}_rafStopLoop(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}_preventPointerEventBehaviour(e,i){this.pswp.applyFilters("preventPointerEvent",!0,e,i)&&e.preventDefault()}_updatePoints(e,i){if(this._pointerEventEnabled){const s=e,n=this._ongoingPointers.findIndex(r=>r.id===s.pointerId);i==="up"&&n>-1?this._ongoingPointers.splice(n,1):i==="down"&&n===-1?this._ongoingPointers.push(this._convertEventPosToPoint(s,{x:0,y:0})):n>-1&&this._convertEventPosToPoint(s,this._ongoingPointers[n]),this._numActivePoints=this._ongoingPointers.length,this._numActivePoints>0&&Z(this.p1,this._ongoingPointers[0]),this._numActivePoints>1&&Z(this.p2,this._ongoingPointers[1])}else{const s=e;this._numActivePoints=0,s.type.indexOf("touch")>-1?s.touches&&s.touches.length>0&&(this._convertEventPosToPoint(s.touches[0],this.p1),this._numActivePoints++,s.touches.length>1&&(this._convertEventPosToPoint(s.touches[1],this.p2),this._numActivePoints++)):(this._convertEventPosToPoint(e,this.p1),i==="up"?this._numActivePoints=0:this._numActivePoints++)}}_updatePrevPoints(){Z(this.prevP1,this.p1),Z(this.prevP2,this.p2)}_updateStartPoints(){Z(this.startP1,this.p1),Z(this.startP2,this.p2),this._updatePrevPoints()}_calculateDragDirection(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{const e=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(e!==0){const i=e>0?"x":"y";Math.abs(this.p1[i]-this.startP1[i])>=ju&&(this.dragAxis=i)}}}_convertEventPosToPoint(e,i){return i.x=e.pageX-this.pswp.offset.x,i.y=e.pageY-this.pswp.offset.y,"pointerId"in e?i.id=e.pointerId:e.identifier!==void 0&&(i.id=e.identifier),i}_onClick(e){this.pswp.mainScroll.isShifted()&&(e.preventDefault(),e.stopPropagation())}}const ep=.35;class tp{constructor(e){this.pswp=e,this.x=0,this.slideWidth=0,this._currPositionIndex=0,this._prevPositionIndex=0,this._containerShiftIndex=-1,this.itemHolders=[]}resize(e){const{pswp:i}=this,s=Math.round(i.viewportSize.x+i.viewportSize.x*i.options.spacing),n=s!==this.slideWidth;n&&(this.slideWidth=s,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((r,o)=>{n&&xe(r.el,(o+this._containerShiftIndex)*this.slideWidth),e&&r.slide&&r.slide.resize()})}resetPosition(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}appendHolders(){this.itemHolders=[];for(let e=0;e<3;e++){const i=le("pswp__item","div",this.pswp.container);i.setAttribute("role","group"),i.setAttribute("aria-roledescription","slide"),i.setAttribute("aria-hidden","true"),i.style.display=e===1?"block":"none",this.itemHolders.push({el:i})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(e,i,s){const{pswp:n}=this;let r=n.potentialIndex+e;const o=n.getNumItems();if(n.canLoop()){r=n.getLoopedIndex(r);const l=(e+o)%o;l<=o/2?e=l:e=l-o}else r<0?r=0:r>=o&&(r=o-1),e=r-n.potentialIndex;n.potentialIndex=r,this._currPositionIndex-=e,n.animations.stopMainScroll();const a=this.getCurrSlideX();if(!i)this.moveTo(a),this.updateCurrItem();else{n.animations.startSpring({isMainScroll:!0,start:this.x,end:a,velocity:s||0,naturalFrequency:30,dampingRatio:1,onUpdate:c=>{this.moveTo(c)},onComplete:()=>{this.updateCurrItem(),n.appendHeavy()}});let l=n.potentialIndex-n.currIndex;if(n.canLoop()){const c=(l+o)%o;c<=o/2?l=c:l=c-o}Math.abs(l)>1&&this.updateCurrItem()}return!!e}getCurrSlideX(){return this.slideWidth*this._currPositionIndex}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){var e;const{pswp:i}=this,s=this._prevPositionIndex-this._currPositionIndex;if(!s)return;this._prevPositionIndex=this._currPositionIndex,i.currIndex=i.potentialIndex;let n=Math.abs(s),r;n>=3&&(this._containerShiftIndex+=s+(s>0?-3:3),n=3,this.itemHolders.forEach(o=>{var a;(a=o.slide)===null||a===void 0||a.destroy(),o.slide=void 0}));for(let o=0;o<n;o++)s>0?(r=this.itemHolders.shift(),r&&(this.itemHolders[2]=r,this._containerShiftIndex++,xe(r.el,(this._containerShiftIndex+2)*this.slideWidth),i.setContent(r,i.currIndex-n+o+2))):(r=this.itemHolders.pop(),r&&(this.itemHolders.unshift(r),this._containerShiftIndex--,xe(r.el,this._containerShiftIndex*this.slideWidth),i.setContent(r,i.currIndex+n-o-2)));Math.abs(this._containerShiftIndex)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),i.animations.stopAllPan(),this.itemHolders.forEach((o,a)=>{o.slide&&o.slide.setIsActive(a===1)}),i.currSlide=(e=this.itemHolders[1])===null||e===void 0?void 0:e.slide,i.contentLoader.updateLazy(s),i.currSlide&&i.currSlide.applyCurrentZoomPan(),i.dispatch("change")}moveTo(e,i){if(!this.pswp.canLoop()&&i){let s=(this.slideWidth*this._currPositionIndex-e)/this.slideWidth;s+=this.pswp.currIndex;const n=Math.round(e-this.x);(s<0&&n>0||s>=this.pswp.getNumItems()-1&&n<0)&&(e=this.x+n*ep)}this.x=e,this.pswp.container&&xe(this.pswp.container,e),this.pswp.dispatch("moveMainScroll",{x:e,dragging:i??!1})}}const ip={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},De=(t,e)=>e?t:ip[t];class sp{constructor(e){this.pswp=e,this._wasFocused=!1,e.on("bindEvents",()=>{e.options.trapFocus&&(e.options.initialPointerPos||this._focusRoot(),e.events.add(document,"focusin",this._onFocusIn.bind(this))),e.events.add(document,"keydown",this._onKeyDown.bind(this))});const i=document.activeElement;e.on("destroy",()=>{e.options.returnFocus&&i&&this._wasFocused&&i.focus()})}_focusRoot(){!this._wasFocused&&this.pswp.element&&(this.pswp.element.focus(),this._wasFocused=!0)}_onKeyDown(e){const{pswp:i}=this;if(i.dispatch("keydown",{originalEvent:e}).defaultPrevented||xu(e))return;let s,n,r=!1;const o="key"in e;switch(o?e.key:e.keyCode){case De("Escape",o):i.options.escKey&&(s="close");break;case De("z",o):s="toggleZoom";break;case De("ArrowLeft",o):n="x";break;case De("ArrowUp",o):n="y";break;case De("ArrowRight",o):n="x",r=!0;break;case De("ArrowDown",o):r=!0,n="y";break;case De("Tab",o):this._focusRoot();break}if(n){e.preventDefault();const{currSlide:a}=i;i.options.arrowKeys&&n==="x"&&i.getNumItems()>1?s=r?"next":"prev":a&&a.currZoomLevel>a.zoomLevels.fit&&(a.pan[n]+=r?-80:80,a.panTo(a.pan.x,a.pan.y))}s&&(e.preventDefault(),i[s]())}_onFocusIn(e){const{template:i}=this.pswp;i&&document!==e.target&&i!==e.target&&!i.contains(e.target)&&i.focus()}}const np="cubic-bezier(.4,0,.22,1)";class rp{constructor(e){var i;this.props=e;const{target:s,onComplete:n,transform:r,onFinish:o=()=>{},duration:a=333,easing:l=np}=e;this.onFinish=o;const c=r?"transform":"opacity",d=(i=e[c])!==null&&i!==void 0?i:"";this._target=s,this._onComplete=n,this._finished=!1,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(()=>{Dr(s,c,a,l),this._helperTimeout=setTimeout(()=>{s.addEventListener("transitionend",this._onTransitionEnd,!1),s.addEventListener("transitioncancel",this._onTransitionEnd,!1),this._helperTimeout=setTimeout(()=>{this._finalizeAnimation()},a+500),s.style[c]=d},30)},0)}_onTransitionEnd(e){e.target===this._target&&this._finalizeAnimation()}_finalizeAnimation(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}destroy(){this._helperTimeout&&clearTimeout(this._helperTimeout),Mu(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}}const op=12,ap=.75;class lp{constructor(e,i,s){this.velocity=e*1e3,this._dampingRatio=i||ap,this._naturalFrequency=s||op,this._dampedFrequency=this._naturalFrequency,this._dampingRatio<1&&(this._dampedFrequency*=Math.sqrt(1-this._dampingRatio*this._dampingRatio))}easeFrame(e,i){let s=0,n;i/=1e3;const r=Math.E**(-this._dampingRatio*this._naturalFrequency*i);if(this._dampingRatio===1)n=this.velocity+this._naturalFrequency*e,s=(e+n*i)*r,this.velocity=s*-this._naturalFrequency+n*r;else if(this._dampingRatio<1){n=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*e+this.velocity);const o=Math.cos(this._dampedFrequency*i),a=Math.sin(this._dampedFrequency*i);s=r*(e*o+n*a),this.velocity=s*-this._naturalFrequency*this._dampingRatio+r*(-this._dampedFrequency*e*a+this._dampedFrequency*n*o)}return s}}class cp{constructor(e){this.props=e,this._raf=0;const{start:i,end:s,velocity:n,onUpdate:r,onComplete:o,onFinish:a=()=>{},dampingRatio:l,naturalFrequency:c}=e;this.onFinish=a;const d=new lp(n,l,c);let h=Date.now(),f=i-s;const _=()=>{this._raf&&(f=d.easeFrame(f,Date.now()-h),Math.abs(f)<1&&Math.abs(d.velocity)<50?(r(s),o&&o(),this.onFinish()):(h=Date.now(),r(f+s),this._raf=requestAnimationFrame(_)))};this._raf=requestAnimationFrame(_)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=0}}class dp{constructor(){this.activeAnimations=[]}startSpring(e){this._start(e,!0)}startTransition(e){this._start(e)}_start(e,i){const s=i?new cp(e):new rp(e);return this.activeAnimations.push(s),s.onFinish=()=>this.stop(s),s}stop(e){e.destroy();const i=this.activeAnimations.indexOf(e);i>-1&&this.activeAnimations.splice(i,1)}stopAll(){this.activeAnimations.forEach(e=>{e.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(e=>e.props.isPan?(e.destroy(),!1):!0)}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(e=>e.props.isMainScroll?(e.destroy(),!1):!0)}isPanRunning(){return this.activeAnimations.some(e=>e.props.isPan)}}class hp{constructor(e){this.pswp=e,e.events.add(e.element,"wheel",this._onWheel.bind(this))}_onWheel(e){e.preventDefault();const{currSlide:i}=this.pswp;let{deltaX:s,deltaY:n}=e;if(i&&!this.pswp.dispatch("wheel",{originalEvent:e}).defaultPrevented)if(e.ctrlKey||this.pswp.options.wheelToZoom){if(i.isZoomable()){let r=-n;e.deltaMode===1?r*=.05:r*=e.deltaMode?1:.002,r=2**r;const o=i.currZoomLevel*r;i.zoomTo(o,{x:e.clientX,y:e.clientY})}}else i.isPannable()&&(e.deltaMode===1&&(s*=18,n*=18),i.panTo(i.pan.x-s,i.pan.y-n))}}function up(t){if(typeof t=="string")return t;if(!t||!t.isCustomSVG)return"";const e=t;let i='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return i=i.split("%d").join(e.size||32),e.outlineID&&(i+='<use class="pswp__icn-shadow" xlink:href="#'+e.outlineID+'"/>'),i+=e.inner,i+="</svg>",i}class pp{constructor(e,i){var s;const n=i.name||i.className;let r=i.html;if(e.options[n]===!1)return;typeof e.options[n+"SVG"]=="string"&&(r=e.options[n+"SVG"]),e.dispatch("uiElementCreate",{data:i});let o="";i.isButton?(o+="pswp__button ",o+=i.className||`pswp__button--${i.name}`):o+=i.className||`pswp__${i.name}`;let a=i.isButton?i.tagName||"button":i.tagName||"div";a=a.toLowerCase();const l=le(o,a);if(i.isButton){a==="button"&&(l.type="button");let{title:h}=i;const{ariaLabel:f}=i;typeof e.options[n+"Title"]=="string"&&(h=e.options[n+"Title"]),h&&(l.title=h);const _=f||h;_&&l.setAttribute("aria-label",_)}l.innerHTML=up(r),i.onInit&&i.onInit(l,e),i.onClick&&(l.onclick=h=>{typeof i.onClick=="string"?e[i.onClick]():typeof i.onClick=="function"&&i.onClick(h,l,e)});const c=i.appendTo||"bar";let d=e.element;c==="bar"?(e.topBar||(e.topBar=le("pswp__top-bar pswp__hide-on-close","div",e.scrollWrap)),d=e.topBar):(l.classList.add("pswp__hide-on-close"),c==="wrapper"&&(d=e.scrollWrap)),(s=d)===null||s===void 0||s.appendChild(e.applyFilters("uiElement",l,i))}}function xr(t,e,i){t.classList.add("pswp__button--arrow"),t.setAttribute("aria-controls","pswp__items"),e.on("change",()=>{e.options.loop||(i?t.disabled=!(e.currIndex<e.getNumItems()-1):t.disabled=!(e.currIndex>0))})}const fp={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:xr},mp={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(t,e)=>{xr(t,e,!0)}},gp={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},_p={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},Ep={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(t,e)=>{let i,s=null;const n=(a,l)=>{t.classList.toggle("pswp__preloader--"+a,l)},r=a=>{i!==a&&(i=a,n("active",a))},o=()=>{var a;if(!((a=e.currSlide)!==null&&a!==void 0&&a.content.isLoading())){r(!1),s&&(clearTimeout(s),s=null);return}s||(s=setTimeout(()=>{var l;r(!!(!((l=e.currSlide)===null||l===void 0)&&l.content.isLoading())),s=null},e.options.preloaderDelay))};e.on("change",o),e.on("loadComplete",a=>{e.currSlide===a.slide&&o()}),e.ui&&(e.ui.updatePreloaderVisibility=o)}},Ip={name:"counter",order:5,onInit:(t,e)=>{e.on("change",()=>{t.innerText=e.currIndex+1+e.options.indexIndicatorSep+e.getNumItems()})}};function ln(t,e){t.classList.toggle("pswp--zoomed-in",e)}class Tp{constructor(e){this.pswp=e,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this._lastUpdatedZoomLevel=void 0}init(){const{pswp:e}=this;this.isRegistered=!1,this.uiElementsData=[gp,fp,mp,_p,Ep,Ip],e.dispatch("uiRegister"),this.uiElementsData.sort((i,s)=>(i.order||0)-(s.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(i=>{this.registerElement(i)}),e.on("change",()=>{var i;(i=e.element)===null||i===void 0||i.classList.toggle("pswp--one-slide",e.getNumItems()===1)}),e.on("zoomPanUpdate",()=>this._onZoomPanUpdate())}registerElement(e){this.isRegistered?this.items.push(new pp(this.pswp,e)):this.uiElementsData.push(e)}_onZoomPanUpdate(){const{template:e,currSlide:i,options:s}=this.pswp;if(this.pswp.opener.isClosing||!e||!i)return;let{currZoomLevel:n}=i;if(this.pswp.opener.isOpen||(n=i.zoomLevels.initial),n===this._lastUpdatedZoomLevel)return;this._lastUpdatedZoomLevel=n;const r=i.zoomLevels.initial-i.zoomLevels.secondary;if(Math.abs(r)<.01||!i.isZoomable()){ln(e,!1),e.classList.remove("pswp--zoom-allowed");return}e.classList.add("pswp--zoom-allowed");const o=n===i.zoomLevels.initial?i.zoomLevels.secondary:i.zoomLevels.initial;ln(e,o<=n),(s.imageClickAction==="zoom"||s.imageClickAction==="zoom-or-close")&&e.classList.add("pswp--click-to-zoom")}}function yp(t){const e=t.getBoundingClientRect();return{x:e.left,y:e.top,w:e.width}}function Rp(t,e,i){const s=t.getBoundingClientRect(),n=s.width/e,r=s.height/i,o=n>r?n:r,a=(s.width-e*o)/2,l=(s.height-i*o)/2,c={x:s.left+a,y:s.top+l,w:e*o};return c.innerRect={w:s.width,h:s.height,x:a,y:l},c}function Sp(t,e,i){const s=i.dispatch("thumbBounds",{index:t,itemData:e,instance:i});if(s.thumbBounds)return s.thumbBounds;const{element:n}=e;let r,o;if(n&&i.options.thumbSelector!==!1){const a=i.options.thumbSelector||"img";o=n.matches(a)?n:n.querySelector(a)}return o=i.applyFilters("thumbEl",o,e,t),o&&(e.thumbCropped?r=Rp(o,e.width||e.w||0,e.height||e.h||0):r=yp(o)),i.applyFilters("thumbBounds",r,e,t)}class wp{constructor(e,i){this.type=e,this.defaultPrevented=!1,i&&Object.assign(this,i)}preventDefault(){this.defaultPrevented=!0}}class vp{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,i,s=100){var n,r,o;this._filters[e]||(this._filters[e]=[]),(n=this._filters[e])===null||n===void 0||n.push({fn:i,priority:s}),(r=this._filters[e])===null||r===void 0||r.sort((a,l)=>a.priority-l.priority),(o=this.pswp)===null||o===void 0||o.addFilter(e,i,s)}removeFilter(e,i){this._filters[e]&&(this._filters[e]=this._filters[e].filter(s=>s.fn!==i)),this.pswp&&this.pswp.removeFilter(e,i)}applyFilters(e,...i){var s;return(s=this._filters[e])===null||s===void 0||s.forEach(n=>{i[0]=n.fn.apply(this,i)}),i[0]}on(e,i){var s,n;this._listeners[e]||(this._listeners[e]=[]),(s=this._listeners[e])===null||s===void 0||s.push(i),(n=this.pswp)===null||n===void 0||n.on(e,i)}off(e,i){var s;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(n=>i!==n)),(s=this.pswp)===null||s===void 0||s.off(e,i)}dispatch(e,i){var s;if(this.pswp)return this.pswp.dispatch(e,i);const n=new wp(e,i);return(s=this._listeners[e])===null||s===void 0||s.forEach(r=>{r.call(this,n)}),n}}class Op{constructor(e,i){if(this.element=le("pswp__img pswp__img--placeholder",e?"img":"div",i),e){const s=this.element;s.decoding="async",s.alt="",s.src=e,s.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,i){this.element&&(this.element.tagName==="IMG"?(Ni(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=pt(0,0,e/250)):Ni(this.element,e,i))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class Ap{constructor(e,i,s){this.instance=i,this.data=e,this.index=s,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=fe.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,i){if(this.slide&&this.usePlaceholder())if(this.placeholder){const s=this.placeholder.element;s&&!s.parentElement&&this.slide.container.prepend(s)}else{const s=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Op(s,this.slide.container)}this.element&&!i||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=le("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=le("pswp__content","div"),this.element.innerHTML=this.data.html||""),i&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var i,s;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const n=this.element;this.updateSrcsetSizes(),this.data.srcset&&(n.srcset=this.data.srcset),n.src=(i=this.data.src)!==null&&i!==void 0?i:"",n.alt=(s=this.data.alt)!==null&&s!==void 0?s:"",this.state=fe.LOADING,n.complete?this.onLoaded():(n.onload=()=>{this.onLoaded()},n.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=fe.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===fe.LOADED||this.state===fe.ERROR)&&this.removePlaceholder())}onError(){this.state=fe.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===fe.LOADING,this)}isError(){return this.state===fe.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,i){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,i),!this.instance.dispatch("contentResize",{content:this,width:e,height:i}).defaultPrevented&&(Ni(this.element,e,i),this.isImageContent()&&!this.isError()))){const s=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=i,s?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:i,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==fe.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,i=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||i>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=i+"px",e.dataset.largestUsedSize=String(i))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,i;let s=le("pswp__error-msg","div");s.innerText=(e=(i=this.instance.options)===null||i===void 0?void 0:i.errorMsg)!==null&&e!==void 0?e:"",s=this.instance.applyFilters("contentErrorElement",s,this),this.element=le("pswp__content pswp__error-msg-container","div"),this.element.appendChild(s),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===fe.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||nn())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!nn()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===fe.LOADED||this.state===fe.ERROR)&&this.removePlaceholder()))}}const Pp=5;function Fr(t,e,i){const s=e.createContentFromData(t,i);let n;const{options:r}=e;if(r){n=new Nr(r,t,-1);let o;e.pswp?o=e.pswp.viewportSize:o=Cr(r,e);const a=Mr(r,o,t,i);n.update(s.width,s.height,a)}return s.lazyLoad(),n&&s.setDisplayedSize(Math.ceil(s.width*n.initial),Math.ceil(s.height*n.initial)),s}function bp(t,e){const i=e.getItemData(t);if(!e.dispatch("lazyLoadSlide",{index:t,itemData:i}).defaultPrevented)return Fr(i,e,t)}class Dp{constructor(e){this.pswp=e,this.limit=Math.max(e.options.preload[0]+e.options.preload[1]+1,Pp),this._cachedItems=[]}updateLazy(e){const{pswp:i}=this;if(i.dispatch("lazyLoad").defaultPrevented)return;const{preload:s}=i.options,n=e===void 0?!0:e>=0;let r;for(r=0;r<=s[1];r++)this.loadSlideByIndex(i.currIndex+(n?r:-r));for(r=1;r<=s[0];r++)this.loadSlideByIndex(i.currIndex+(n?-r:r))}loadSlideByIndex(e){const i=this.pswp.getLoopedIndex(e);let s=this.getContentByIndex(i);s||(s=bp(i,this.pswp),s&&this.addToCache(s))}getContentBySlide(e){let i=this.getContentByIndex(e.index);return i||(i=this.pswp.createContentFromData(e.data,e.index),this.addToCache(i)),i.setSlide(e),i}addToCache(e){if(this.removeByIndex(e.index),this._cachedItems.push(e),this._cachedItems.length>this.limit){const i=this._cachedItems.findIndex(s=>!s.isAttached&&!s.hasSlide);i!==-1&&this._cachedItems.splice(i,1)[0].destroy()}}removeByIndex(e){const i=this._cachedItems.findIndex(s=>s.index===e);i!==-1&&this._cachedItems.splice(i,1)}getContentByIndex(e){return this._cachedItems.find(i=>i.index===e)}destroy(){this._cachedItems.forEach(e=>e.destroy()),this._cachedItems=[]}}class Lp extends vp{getNumItems(){var e;let i=0;const s=(e=this.options)===null||e===void 0?void 0:e.dataSource;s&&"length"in s?i=s.length:s&&"gallery"in s&&(s.items||(s.items=this._getGalleryDOMElements(s.gallery)),s.items&&(i=s.items.length));const n=this.dispatch("numItems",{dataSource:s,numItems:i});return this.applyFilters("numItems",n.numItems,s)}createContentFromData(e,i){return new Ap(e,this,i)}getItemData(e){var i;const s=(i=this.options)===null||i===void 0?void 0:i.dataSource;let n={};Array.isArray(s)?n=s[e]:s&&"gallery"in s&&(s.items||(s.items=this._getGalleryDOMElements(s.gallery)),n=s.items[e]);let r=n;r instanceof Element&&(r=this._domElementToItemData(r));const o=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",o.itemData,e)}_getGalleryDOMElements(e){var i,s;return(i=this.options)!==null&&i!==void 0&&i.children||(s=this.options)!==null&&s!==void 0&&s.childSelector?Fu(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const i={element:e},s=e.tagName==="A"?e:e.querySelector("a");if(s){i.src=s.dataset.pswpSrc||s.href,s.dataset.pswpSrcset&&(i.srcset=s.dataset.pswpSrcset),i.width=s.dataset.pswpWidth?parseInt(s.dataset.pswpWidth,10):0,i.height=s.dataset.pswpHeight?parseInt(s.dataset.pswpHeight,10):0,i.w=i.width,i.h=i.height,s.dataset.pswpType&&(i.type=s.dataset.pswpType);const r=e.querySelector("img");if(r){var n;i.msrc=r.currentSrc||r.src,i.alt=(n=r.getAttribute("alt"))!==null&&n!==void 0?n:""}(s.dataset.pswpCropped||s.dataset.cropped)&&(i.thumbCropped=!0)}return this.applyFilters("domItemData",i,e,s)}lazyLoadData(e,i){return Fr(e,this,i)}}const nt=.003;class Cp{constructor(e){this.pswp=e,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this._duration=void 0,this._useAnimation=!1,this._croppedZoom=!1,this._animateRootOpacity=!1,this._animateBgOpacity=!1,this._placeholder=void 0,this._opacityElement=void 0,this._cropContainer1=void 0,this._cropContainer2=void 0,this._thumbBounds=void 0,this._prepareOpen=this._prepareOpen.bind(this),e.on("firstZoomPan",this._prepareOpen)}open(){this._prepareOpen(),this._start()}close(){if(this.isClosed||this.isClosing||this.isOpening)return;const e=this.pswp.currSlide;this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,e&&e.currZoomLevel*e.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(()=>{this._start()},this._croppedZoom?30:0)}_prepareOpen(){if(this.pswp.off("firstZoomPan",this._prepareOpen),!this.isOpening){const e=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,e&&e.zoomLevels.initial*e.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps()}}_applyStartProps(){const{pswp:e}=this,i=this.pswp.currSlide,{options:s}=e;if(s.showHideAnimationType==="fade"?(s.showHideOpacity=!0,this._thumbBounds=void 0):s.showHideAnimationType==="none"?(s.showHideOpacity=!1,this._duration=0,this._thumbBounds=void 0):this.isOpening&&e._initialThumbBounds?this._thumbBounds=e._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=i==null?void 0:i.getPlaceholderElement(),e.animations.stopAll(),this._useAnimation=!!(this._duration&&this._duration>50),this._animateZoom=!!this._thumbBounds&&(i==null?void 0:i.content.usePlaceholder())&&(!this.isClosing||!e.mainScroll.isShifted()),!this._animateZoom)this._animateRootOpacity=!0,this.isOpening&&i&&(i.zoomAndPanToInitial(),i.applyCurrentZoomPan());else{var n;this._animateRootOpacity=(n=s.showHideOpacity)!==null&&n!==void 0?n:!1}if(this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>nt,this._opacityElement=this._animateRootOpacity?e.element:e.bg,!this._useAnimation){this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(e.element&&(e.element.style.opacity=String(nt)),e.applyBgOpacity(1));return}if(this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect){var r;this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=(r=this.pswp.currSlide)===null||r===void 0?void 0:r.holderElement,e.container&&(e.container.style.overflow="hidden",e.container.style.width=e.viewportSize.x+"px")}else this._croppedZoom=!1;this.isOpening?(this._animateRootOpacity?(e.element&&(e.element.style.opacity=String(nt)),e.applyBgOpacity(1)):(this._animateBgOpacity&&e.bg&&(e.bg.style.opacity=String(nt)),e.element&&(e.element.style.opacity="1")),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(nt)))):this.isClosing&&(e.mainScroll.itemHolders[0]&&(e.mainScroll.itemHolders[0].el.style.display="none"),e.mainScroll.itemHolders[2]&&(e.mainScroll.itemHolders[2].el.style.display="none"),this._croppedZoom&&e.mainScroll.x!==0&&(e.mainScroll.resetPosition(),e.mainScroll.resize()))}_start(){this.isOpening&&this._useAnimation&&this._placeholder&&this._placeholder.tagName==="IMG"?new Promise(e=>{let i=!1,s=!0;Nu(this._placeholder).finally(()=>{i=!0,s||e(!0)}),setTimeout(()=>{s=!1,i&&e(!0)},50),setTimeout(e,250)}).finally(()=>this._initiate()):this._initiate()}_initiate(){var e,i;(e=this.pswp.element)===null||e===void 0||e.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),(i=this.pswp.element)===null||i===void 0||i.classList.toggle("pswp--ui-visible",this.isOpening),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}_onAnimationComplete(){const{pswp:e}=this;if(this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,e.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),e.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed)e.destroy();else if(this.isOpen){var i;this._animateZoom&&e.container&&(e.container.style.overflow="visible",e.container.style.width="100%"),(i=e.currSlide)===null||i===void 0||i.applyCurrentZoomPan()}}_animateToOpenState(){const{pswp:e}=this;this._animateZoom&&(this._croppedZoom&&this._cropContainer1&&this._cropContainer2&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),e.currSlide&&(e.currSlide.zoomAndPanToInitial(),this._animateTo(e.currSlide.container,"transform",e.currSlide.getCurrentTransform()))),this._animateBgOpacity&&e.bg&&this._animateTo(e.bg,"opacity",String(e.options.bgOpacity)),this._animateRootOpacity&&e.element&&this._animateTo(e.element,"opacity","1")}_animateToClosedState(){const{pswp:e}=this;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&e.bgOpacity>.01&&e.bg&&this._animateTo(e.bg,"opacity","0"),this._animateRootOpacity&&e.element&&this._animateTo(e.element,"opacity","0")}_setClosedStateZoomPan(e){if(!this._thumbBounds)return;const{pswp:i}=this,{innerRect:s}=this._thumbBounds,{currSlide:n,viewportSize:r}=i;if(this._croppedZoom&&s&&this._cropContainer1&&this._cropContainer2){const o=-r.x+(this._thumbBounds.x-s.x)+s.w,a=-r.y+(this._thumbBounds.y-s.y)+s.h,l=r.x-s.w,c=r.y-s.h;e?(this._animateTo(this._cropContainer1,"transform",pt(o,a)),this._animateTo(this._cropContainer2,"transform",pt(l,c))):(xe(this._cropContainer1,o,a),xe(this._cropContainer2,l,c))}n&&(Z(n.pan,s||this._thumbBounds),n.currZoomLevel=this._thumbBounds.w/n.width,e?this._animateTo(n.container,"transform",n.getCurrentTransform()):n.applyCurrentZoomPan())}_animateTo(e,i,s){if(!this._duration){e.style[i]=s;return}const{animations:n}=this.pswp,r={duration:this._duration,easing:this.pswp.options.easing,onComplete:()=>{n.activeAnimations.length||this._onAnimationComplete()},target:e};r[i]=s,n.startTransition(r)}}const Mp={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,trapFocus:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"};class Np extends Lp{constructor(e){super(),this.options=this._prepareOptions(e||{}),this.offset={x:0,y:0},this._prevViewportSize={x:0,y:0},this.viewportSize={x:0,y:0},this.bgOpacity=1,this.currIndex=0,this.potentialIndex=0,this.isOpen=!1,this.isDestroying=!1,this.hasMouse=!1,this._initialItemData={},this._initialThumbBounds=void 0,this.topBar=void 0,this.element=void 0,this.template=void 0,this.container=void 0,this.scrollWrap=void 0,this.currSlide=void 0,this.events=new Gu,this.animations=new dp,this.mainScroll=new tp(this),this.gestures=new Ju(this),this.opener=new Cp(this),this.keyboard=new sp(this),this.contentLoader=new Dp(this)}init(){if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();let e="pswp--open";return this.gestures.supportsTouch&&(e+=" pswp--touch"),this.options.mainClass&&(e+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+e),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new hp(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{const{itemHolders:i}=this.mainScroll;i[0]&&(i[0].el.style.display="block",this.setContent(i[0],this.currIndex-1)),i[2]&&(i[2].el.style.display="block",this.setContent(i[2],this.currIndex+1)),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this._handlePageResize.bind(this)),this.events.add(window,"scroll",this._updatePageScrollOffset.bind(this)),this.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(e){const i=this.getNumItems();return this.options.loop&&(e>i-1&&(e-=i),e<0&&(e+=i)),_t(e,0,i-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(e=>{var i;(i=e.slide)===null||i===void 0||i.appendHeavy()})}goTo(e){this.mainScroll.moveIndexBy(this.getLoopedIndex(e)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...e){var i;(i=this.currSlide)===null||i===void 0||i.zoomTo(...e)}toggleZoom(){var e;(e=this.currSlide)===null||e===void 0||e.toggleZoom()}close(){!this.opener.isOpen||this.isDestroying||(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){var e;if(!this.isDestroying){this.options.showHideAnimationType="none",this.close();return}this.dispatch("destroy"),this._listeners={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),(e=this.element)===null||e===void 0||e.remove(),this.mainScroll.itemHolders.forEach(i=>{var s;(s=i.slide)===null||s===void 0||s.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(e){this.contentLoader.removeByIndex(e),this.mainScroll.itemHolders.forEach((i,s)=>{var n,r;let o=((n=(r=this.currSlide)===null||r===void 0?void 0:r.index)!==null&&n!==void 0?n:0)-1+s;if(this.canLoop()&&(o=this.getLoopedIndex(o)),o===e&&(this.setContent(i,e,!0),s===1)){var a;this.currSlide=i.slide,(a=i.slide)===null||a===void 0||a.setIsActive(!0)}}),this.dispatch("change")}setContent(e,i,s){if(this.canLoop()&&(i=this.getLoopedIndex(i)),e.slide){if(e.slide.index===i&&!s)return;e.slide.destroy(),e.slide=void 0}if(!this.canLoop()&&(i<0||i>=this.getNumItems()))return;const n=this.getItemData(i);e.slide=new Uu(n,i,this),i===this.currIndex&&(this.currSlide=e.slide),e.slide.append(e.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(e){if(this.isDestroying)return;const i=Cr(this.options,this);!e&&dt(i,this._prevViewportSize)||(Z(this._prevViewportSize,i),this.dispatch("beforeResize"),Z(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(e){this.bgOpacity=Math.max(e,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}mouseDetected(){if(!this.hasMouse){var e;this.hasMouse=!0,(e=this.element)===null||e===void 0||e.classList.add("pswp--has_mouse")}}_handlePageResize(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}_updatePageScrollOffset(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(e,i){this.offset.x=e,this.offset.y=i,this.dispatch("updateScrollOffset")}_createMainStructure(){this.element=le("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=le("pswp__bg","div",this.element),this.scrollWrap=le("pswp__scroll-wrap","section",this.element),this.container=le("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new Tp(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return Sp(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}_prepareOptions(e){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(e.showHideAnimationType="none",e.zoomAnimationDuration=0),{...Mp,...e}}}window.axios=$;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.FilePond=Rh;Vt(ga);zt(Ar);window.PhotoSwipeLightbox=Lu;window.PhotoSwipe=Np;const ui=[[["ɓ",/ɓ/g],["b_<",/b_</g],["b_<",/b_</g],"voiced bilabial implosive"],[["ɖ",/ɖ/g],["d`",/d`/g],["d`",/d`/g],"voiced retroflex plosive"],[["ɗ",/ɗ/g],["d_<",/d_</g],["d_<",/d_</g],"voiced alveolar implosive"],[["ɡ",/ɡ/g],["g",/g/g],["g",/g/g],"voiced velar plosive"],[["ɠ",/ɠ/g],["g_<",/g_</g],["g_<",/g_</g],"voiced velar implosive"],[["ɦ",/ɦ/g],["h\\",/h\\/g],["h\\",/h\\/g],"voiced glottal fricative"],[["ʝ",/ʝ/g],["j\\",/j\\/g],["j\\",/j\\/g],"voiced palatal fricative"],[["ɭ",/ɭ/g],["l`",/l`/g],["l`",/l`/g],"retroflex lateral approximant"],[["ɺ",/ɺ/g],["l\\",/l\\/g],["l\\",/l\\/g],"alveolar lateral flap"],[["ɳ",/ɳ/g],["n`",/n`/g],["n`",/n`/g],"retroflex nasal"],[["ɸ",/ɸ/g],["p\\",/p\\/g],["p\\",/p\\/g],"voiceless bilabial fricative"],[["ɽ",/ɽ/g],["r`",/r`/g],["r`",/r`/g],"retroflex flap"],[["ɹ",/ɹ/g],["r\\",/r\\/g],["r\\",/r\\/g],"alveolar approximant"],[["ɻ",/ɻ/g],["r\\`",/r\\`/g],["r\\`",/r\\`/g],"retroflex approximant"],[["ʂ",/ʂ/g],["s`",/s`/g],["s`",/s`/g],"voiceless retroflex fricative"],[["ɕ",/ɕ/g],["s\\",/s\\/g],["s\\",/s\\/g],"voiceless alveolo-palatal fricative"],[["ʈ",/ʈ/g],["t`",/t`/g],["t`",/t`/g],"voiceless retroflex plosive"],[["ʋ",/ʋ/g],["v\\",/v\\/g],["v\\",/v\\/g],"labiodental approximant"],[["ɧ",/ɧ/g],["x\\",/x\\/g],["x\\",/x\\/g],"voiceless palatal-velar fricative"],[["ʐ",/ʐ/g],["z`",/z`/g],["z`",/z`/g],"voiced retroflex fricative"],[["ʑ",/ʑ/g],["z\\",/z\\/g],["z\\",/z\\/g],"voiced alveolo-palatal fricative"],[["ʙ",/ʙ/g],["B\\",/B\\/g],["B\\",/B\\/g],"bilabial trill"],[["ɢ",/ɢ/g],["G\\",/G\\/g],["G\\",/G\\/g],"voiced uvular plosive"],[["ʛ",/ʛ/g],["G\\_<",/G\\_</g],["G\\_<",/G\\_</g],"voiced uvular implosive"],[["ʜ",/ʜ/g],["H\\",/H\\/g],["H\\",/H\\/g],"voiceless epiglottal fricative"],[["ɨ̞",/ɨ̞/g],["I\\",/I\\/g],["I\\",/I\\/g],"near-close central unrounded vowel"],[["ɪ̈",/ɪ̈/g],["I\\",/I\\/g],["I\\",/I\\/g],"near-close central unrounded vowel"],[["ɟ",/ɟ/g],["J\\",/J\\/g],["J\\",/J\\/g],"voiced palatal plosive"],[["ʄ",/ʄ/g],["J\\_<",/J\\_</g],["J\\_<",/J\\_</g],"voiced palatal implosive"],[["ɮ",/ɮ/g],["K\\",/K\\/g],["K\\",/K\\/g],"voiced alveolar lateral fricative"],[["ʟ",/ʟ/g],["L\\",/L\\/g],["L\\",/L\\/g],"velar lateral approximant"],[["ɰ",/ɰ/g],["M\\",/M\\/g],["M\\",/M\\/g],"velar approximant"],[["ɴ",/ɴ/g],["N\\",/N\\/g],["N\\",/N\\/g],"uvular nasal"],[["ʘ",/ʘ/g],["O\\",/O\\/g],["O\\",/O\\/g],"bilabial click"],[["ʀ",/ʀ/g],["R\\",/R\\/g],["R\\",/R\\/g],"uvular trill"],[["ʊ̈",/ʊ̈/g],["U\\",/U\\/g],["U\\",/U\\/g],"near-close central rounded-sm vowel"],[["ʉ̞",/ʉ̞/g],["U\\",/U\\/g],["U\\",/U\\/g],"near-close central rounded-sm vowel"],[["ħ",/ħ/g],["X\\",/X\\/g],["X\\",/X\\/g],"voiceless pharyngeal fricative"],[["ˑ",/ˑ/g],[":\\",/:\\/g],[":\\",/:\\/g],"half long"],[["ɘ",/ɘ/g],["@\\",/@\\/g],["@\\",/@\\/g],"close-mid central unrounded vowel"],[["ɞ",/ɞ/g],["3\\",/3\\/g],["3\\",/3\\/g],"open-mid central rounded-sm vowel"],[["ɶ",/ɶ/g],["&",/&/g],["&\\",/&\\/g],"open front rounded-sm vowel"],[["ʕ",/ʕ/g],["?\\",/\?\\/g],["?\\",/\?\\/g],"voiced pharyngeal fricative"],[["ʢ",/ʢ/g],["<\\",/<\\/g],["<\\",/<\\/g],"voiced epiglottal fricative"],[["ʡ",/ʡ/g],[">\\",/>\\/g],[">\\",/>\\/g],"epiglottal plosive"],[["ǃ",/ǃ/g],["!\\",/!\\/g],["!\\",/!\\/g],"postalveolar click"],[["ꜜ",/ꜜ/g],["!",/!/g],["!",/!/g],"downstep"],[["ǁ",/ǁ/g],["|\\|\\",/\|\\\|\\/g],["|\\|\\",/\|\\\|\\/g],"alveolar lateral click"],[["ǀ",/ǀ/g],["|\\",/\|\\/g],["|\\",/\|\\/g],"dental click"],[["‖",/‖/g],["||",/\|\|/g],["||",/\|\|/g],"major intonation group"],[["ǂ",/ǂ/g],["=\\",/=\\/g],["=\\",/=\\/g],"palatal click"],[["‿",/‿/g],["-\\",/-\\/g],["-\\",/-\\/g],"linking mark"],[["̈",/̈/g],['_"',/_"/g],['_"',/_"/g],"centralized"],[["̟",/̟/g],["_+",/_\+/g],["_+",/_\+/g],"advanced"],[["̠",/̠/g],["_-",/_-/g],["_-",/_-/g],"retracted"],[["̌",/̌/g],["_/",/_\//g],["_/",/_\//g],"rising tone"],[["̥",/̥/g],["_0",/_0/g],["_0",/_0/g],"voiceless"],[["ʼ",/ʼ/g],["_>",/_>/g],["_>",/_>/g],"ejective"],[["ˤ",/ˤ/g],["_?\\",/_\?\\/g],["_?\\",/_\?\\/g],"pharyngealized"],[["̂",/̂/g],["_\\",/_\\/g],["_\\",/_\\/g],"falling tone"],[["̯",/̯/g],["_^",/_\^/g],["_^",/_\^/g],"non-syllabic"],[["̚",/̚/g],["_}",/_}/g],["_}",/_}/g],"no audible release"],[["˞",/˞/g],["`",/`/g],["`",/`/g],"rhotacized"],[["̃",/̃/g],["~",/_~/g],["~",/_~/g],"nasalized"],[["̃",/̃/g],["~",/~/g],["~",/~/g],"nasalized"],[["̃",/̃/g],["_~",/_~/g],["_~",/_~/g],"nasalized"],[["̘",/̘/g],["_A",/_A/g],["_A",/_A/g],"advanced tongue root"],[["̺",/̺/g],["_a",/_a/g],["_a",/_a/g],"apical"],[[" ᷅",/ ᷅/g],["_B_L",/_B_L/g],["_B_L",/_B_L/g],"low rising tone"],[["̏",/̏/g],["_B",/_B/g],["_B",/_B/g],"extra low tone"],[["̜",/̜/g],["_c",/_c/g],["_c",/_c/g],"less rounded-sm"],[["̪",/̪/g],["_d",/_d/g],["_d",/_d/g],"dental"],[["̴",/̴/g],["_e",/_e/g],["_e",/_e/g],"velarized or pharyngealized; also see 5"],[["↘",/↘/g],["<F>",/<F>/g],["<F>",/<F>/g],"global fall"],[["ˠ",/ˠ/g],["_G",/_G/g],["_G",/_G/g],"velarized"],[[" ᷄",/ ᷄/g],["_H_T",/_H_T/g],["_H_T",/_H_T/g],"high rising tone"],[["́",/́/g],["_H",/_H/g],["_H",/_H/g],"high tone"],[["ʰ",/ʰ/g],["_h",/_h/g],["_h",/_h/g],"aspirated"],[["̰",/̰/g],["_k",/_k/g],["_k",/_k/g],"creaky voice"],[["̀",/̀/g],["_L",/_L/g],["_L",/_L/g],"low tone"],[["ˡ",/ˡ/g],["_l",/_l/g],["_l",/_l/g],"lateral release"],[["̄",/̄/g],["_M",/_M/g],["_M",/_M/g],"mid tone"],[["̻",/̻/g],["_m",/_m/g],["_m",/_m/g],"laminal"],[["̼",/̼/g],["_N",/_N/g],["_N",/_N/g],"linguolabial"],[["ⁿ",/ⁿ/g],["_n",/_n/g],["_n",/_n/g],"nasal release"],[["̹",/̹/g],["_O",/_O/g],["_O",/_O/g],"more rounded-sm"],[["̞",/̞/g],["_o",/_o/g],["_o",/_o/g],"lowered"],[["̙",/̙/g],["_q",/_q/g],["_q",/_q/g],"retracted tongue root"],[["↗",/↗/g],["<R>",/<R>/g],["<R>",/<R>/g],"global rise"],[[" ᷈",/ ᷈/g],["_R_F",/_R_F/g],["_R_F",/_R_F/g],"rising falling tone"],[["̌",/̌/g],["_R",/_R/g],["_R",/_R/g],"rising tone"],[["̂",/̂/g],["_F",/_F/g],["_F",/_F/g],"falling tone"],[["̝",/̝/g],["_r",/_r/g],["_r",/_r/g],"raised"],[["̋",/̋/g],["_T",/_T/g],["_T",/_T/g],"extra high tone"],[["̤",/̤/g],["_t",/_t/g],["_t",/_t/g],"breathy voice"],[["̬",/̬/g],["_v",/_v/g],["_v",/_v/g],"voiced"],[["ʷ",/ʷ/g],["_w",/_w/g],["_w",/_w/g],"labialized"],[["̆",/̆/g],["_X",/_X/g],["_X",/_X/g],"extra-short"],[["̽",/̽/g],["_x",/_x/g],["_x",/_x/g],"mid-centralized"],[["ꜛ",/ꜛ/g],["^",/\^/g],["^",/\^/g],"upstep"],[["ː",/ː/g],[":",/:/g],[":",/:/g],"long"],[["|",/\|/g],["|",/\|/g],["|",/\|/g],"minor (foot) group"],[["̩",/̩/g],["=",/_=/g],["=",/_=/g],"syllabic"],[["̩",/̩/g],["=",/=/g],["=",/=/g],"syllabic"],[["ˈ",/ˈ/g],['"',/"/g],["'",/'/g],"primary stress"],[["ˌ",/ˌ/g],["%",/%/g],[",",/,/g],"secondary stress"],[["ə",/ə/g],["@",/@/g],["@",/@/g],"schwa"],[["ʲ",/ʲ/g],["_j",/_j/g],["_j",/_j/g],"palatalized"],[["æ",/æ/g],["{",/\{/g],["&",/&/g],"near-open front unrounded vowel"],[["ʉ",/ʉ/g],["}",/}/g],["u\\",/u\\/g],"close central rounded-sm vowel"],[["ʔ",/ʔ/g],["?",/\?/g],["?",/\?/g],"glottal stop"],[["ɨ",/ɨ/g],["1",/1/g],["1",/1/g],"close central unrounded vowel"],[["ø",/ø/g],["2",/2/g],["2",/2/g],"close-mid front rounded-sm vowel"],[["ɜ",/ɜ/g],["3",/3/g],["3",/3/g],"open-mid central unrounded vowel"],[["ɾ",/ɾ/g],["4",/4/g],["4",/4/g],"alveolar flap"],[["ɫ",/ɫ/g],["5",/5/g],["5",/5/g],"velarized alveolar lateral approximant; also see _e"],[["ɐ",/ɐ/g],["6",/6/g],["6",/6/g],"near-open central vowel"],[["ɤ",/ɤ/g],["7",/7/g],["7",/7/g],"close-mid back unrounded vowel"],[["ɵ",/ɵ/g],["8",/8/g],["8",/8/g],"close-mid central rounded-sm vowel"],[["œ",/œ/g],["9",/9/g],["9",/9/g],"open-mid front rounded-sm vowel"],[["ɑ",/ɑ/g],["A",/A/g],["A",/A/g],"open back unrounded vowel"],[["β",/β/g],["B",/B/g],["B",/B/g],"voiced bilabial fricative"],[["ç",/ç/g],["C",/C/g],["C",/C/g],"voiceless palatal fricative"],[["ð",/ð/g],["D",/D/g],["D",/D/g],"voiced dental fricative"],[["ɛ",/ɛ/g],["E",/E/g],["E",/E/g],"open-mid front unrounded vowel"],[["ɱ",/ɱ/g],["F",/F/g],["F",/F/g],"labiodental nasal"],[["ɣ",/ɣ/g],["G",/G/g],["G",/G/g],"voiced velar fricative"],[["ɥ",/ɥ/g],["H",/H/g],["H",/H/g],"labial-palatal approximant"],[["ɪ",/ɪ/g],["I",/I/g],["I",/I/g],"near-close front unrounded vowel"],[["ɲ",/ɲ/g],["J",/J/g],["J",/J/g],"palatal nasal"],[["ɬ",/ɬ/g],["K",/K/g],["K",/K/g],"voiceless alveolar lateral fricative"],[["ʎ",/ʎ/g],["L",/L/g],["L",/L/g],"palatal lateral approximant"],[["ɯ",/ɯ/g],["M",/M/g],["M",/M/g],"close back unrounded vowel"],[["ŋ",/ŋ/g],["N",/N/g],["N",/N/g],"velar nasal"],[["ɔ",/ɔ/g],["O",/O/g],["O",/O/g],"open-mid back rounded-sm vowel"],[["ɒ",/ɒ/g],["Q",/Q/g],["Q",/Q/g],"open back rounded-sm vowel"],[["ʁ",/ʁ/g],["R",/R/g],["R",/R/g],"voiced uvular fricative"],[["ʃ",/ʃ/g],["S",/S/g],["S",/S/g],"voiceless postalveolar fricative"],[["θ",/θ/g],["T",/T/g],["T",/T/g],"voiceless dental fricative"],[["ʊ",/ʊ/g],["U",/U/g],["U",/U/g],"near-close back rounded-sm vowel"],[["ʌ",/ʌ/g],["V",/V/g],["V",/V/g],"open-mid back unrounded vowel"],[["ʍ",/ʍ/g],["W",/W/g],["W",/W/g],"voiceless labial-velar fricative"],[["χ",/χ/g],["X",/X/g],["X",/X/g],"voiceless uvular fricative"],[["ʏ",/ʏ/g],["Y",/Y/g],["Y",/Y/g],"near-close front rounded-sm vowel"],[["ʒ",/ʒ/g],["Z",/Z/g],["Z",/Z/g],"voiced postalveolar fricative"],[["ʋ",/ʋ/g],["P",/P/g],["P",/P/g],"labiodental approximant"],[["͡",/͡/g],["_",/_/g],[")",/\)/g],"affricate tie bar"]];function Gr(t){let e=t;for(let i=0;i<ui.length;i++){let s=ui[i][1][1];e=e.replace(s,ui[i][0][0])}return e}function xp(t){document.getElementsByName(t).forEach(i=>{i.value=Gr(i.value),i.dispatchEvent(new Event("input",{bubbles:!0}))})}window.x2i_input=xp;function Fp(){let t=window.getSelection();if(!t.rangeCount)return;let e=t.getRangeAt(0),i=t.toString();if(i.trim()==="")return;let s=Gr(i),n=document.createTextNode(s);e.deleteContents(),e.insertNode(n),t.removeAllRanges()}window.x2i_select=Fp;function Gp(t){if(isNaN(t))return NaN;for(var e=String(+t).split(""),i=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],s="",n=3;n--;)s=(i[+e.pop()+n*10]||"")+s;return Array(+e.join("")+1).join("M")+s}window.romanize=Gp;document.addEventListener("scrollTop",function(){window.scrollTo({top:0,behavior:"smooth"})});let Br=0,Ur=0;const cn=document.getElementById("sidebar-toggle");document.addEventListener("touchstart",t=>{Br=t.changedTouches[0].screenX});document.addEventListener("touchend",t=>{Ur=t.changedTouches[0].screenX,Bp()});function Bp(){const t=Ur-Br;t>70&&cn.click(),t<-70&&cn.click()}
